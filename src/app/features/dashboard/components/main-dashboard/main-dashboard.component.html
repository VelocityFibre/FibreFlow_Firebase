<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <p class="welcome-text">
      Welcome to FibreFlow. Quick access to all your project management tools.
    </p>
  </div>

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="loading-container">
      <mat-card class="loading-card">
        <div class="loading-content">
          <mat-icon class="loading-spinner">hourglass_empty</mat-icon>
          <p>Loading dashboard data...</p>
        </div>
      </mat-card>
    </div>
  } @else {
    <!-- Main Dashboard Cards -->
    <div class="dashboard-grid">
      <!-- Projects Card -->
      <mat-card class="dashboard-card ff-card-projects" routerLink="/projects">
        <div class="card-icon projects-icon">
          <mat-icon>folder</mat-icon>
        </div>
        <mat-card-header>
          <mat-card-title>Projects</mat-card-title>
          <mat-card-subtitle>Manage and track all projects</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="card-stats">
            <div class="stat-item">
              <span class="stat-number">{{ projectsCount() }}</span>
              <span class="stat-label">Total Projects</span>
            </div>
            <div class="action-link">
              <span>Open →</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Suppliers Card -->
      <mat-card class="dashboard-card ff-card-suppliers" routerLink="/suppliers">
        <div class="card-icon suppliers-icon">
          <mat-icon>business</mat-icon>
        </div>
        <mat-card-header>
          <mat-card-title>Suppliers</mat-card-title>
          <mat-card-subtitle>Supplier management and contacts</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="card-stats">
            <div class="stat-item">
              <span class="stat-number">{{ suppliersCount() }}</span>
              <span class="stat-label">Total Suppliers</span>
            </div>
            <div class="action-link">
              <span>Open →</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Stock Card -->
      <mat-card class="dashboard-card ff-card-stock" routerLink="/stock">
        <div class="card-icon stock-icon">
          <mat-icon>inventory_2</mat-icon>
        </div>
        <mat-card-header>
          <mat-card-title>Stock</mat-card-title>
          <mat-card-subtitle>Inventory and stock management</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="card-stats">
            <div class="stat-item">
              <span class="stat-number">{{ stockItemsCount() }}</span>
              <span class="stat-label">Stock Items</span>
            </div>
            <div class="action-link">
              <span>Open →</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Clients Card -->
      <mat-card class="dashboard-card ff-card-clients" routerLink="/clients">
        <div class="card-icon clients-icon">
          <mat-icon>groups</mat-icon>
        </div>
        <mat-card-header>
          <mat-card-title>Clients</mat-card-title>
          <mat-card-subtitle>Client information and projects</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="card-stats">
            <div class="stat-item">
              <span class="stat-number">{{ clientsCount() }}</span>
              <span class="stat-label">Total Clients</span>
            </div>
            <div class="action-link">
              <span>Open →</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Flagged Issues Card -->
      <mat-card class="dashboard-card ff-card-flagged-issues" routerLink="/projects">
        <div class="card-icon issues-icon">
          <mat-icon>flag</mat-icon>
        </div>
        <mat-card-header>
          <mat-card-title>Flagged Issues</mat-card-title>
          <mat-card-subtitle>High priority projects requiring attention</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="card-stats">
            <div class="stat-item">
              <span class="stat-number">{{ flaggedIssuesCount() }}</span>
              <span class="stat-label">Priority Projects</span>
            </div>
            <div class="action-link">
              <span>Open →</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

    <!-- Analytics Card -->
    <mat-card class="dashboard-card ff-card-analytics" routerLink="/analytics">
      <div class="card-icon analytics-icon">
        <mat-icon>analytics</mat-icon>
      </div>
      <mat-card-header>
        <mat-card-title>Analytics</mat-card-title>
        <mat-card-subtitle>Detailed reports and analytics</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="card-stats">
          <div class="stat-item">
            <span class="view-reports">View Reports</span>
          </div>
          <div class="action-link">
            <span>Open →</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Quick Summary Section -->
  <div class="summary-section">
    <h2>Quick Summary</h2>
    <div class="summary-cards">
      <mat-card class="summary-card">
        <mat-card-content>
          <div class="summary-icon">
            <mat-icon>trending_up</mat-icon>
          </div>
          <div class="summary-content">
            <h3>Tasks Completed</h3>
            <div class="summary-value">{{ dashboardStats().polesPlanted }}</div>
            <div class="summary-detail">Across all projects</div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="summary-card">
        <mat-card-content>
          <div class="summary-icon">
            <mat-icon>construction</mat-icon>
          </div>
          <div class="summary-content">
            <h3>Materials Needed</h3>
            <div class="summary-value">{{ dashboardStats().materialsNeeded }}</div>
            <div class="summary-detail">Below minimum stock</div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="summary-card">
        <mat-card-content>
          <div class="summary-icon">
            <mat-icon>folder_open</mat-icon>
          </div>
          <div class="summary-content">
            <h3>Active Projects</h3>
            <div class="summary-value">{{ dashboardStats().activeProjects }}</div>
            <div class="summary-detail">Currently running</div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="summary-card">
        <mat-card-content>
          <div class="summary-icon">
            <mat-icon>check_circle</mat-icon>
          </div>
          <div class="summary-content">
            <h3>Completion Rate</h3>
            <div class="summary-value">{{ dashboardStats().completionRate }}%</div>
            <div class="summary-detail">Project completion</div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="activity-section">
    <h2>Recent Activity</h2>
    <mat-card>
      <mat-card-content>
        <div class="activity-list">
          <div class="activity-item">
            <mat-icon class="activity-icon">check_circle</mat-icon>
            <div class="activity-content">
              <p><strong>Project "Fiber Installation - Downtown"</strong> completed Phase 2</p>
              <span class="activity-time">5 hours ago</span>
            </div>
          </div>
          <div class="activity-item">
            <mat-icon class="activity-icon">warning</mat-icon>
            <div class="activity-content">
              <p>Low stock alert: Fiber Optic Cable (Single Mode)</p>
              <span class="activity-time">1 day ago</span>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
}
