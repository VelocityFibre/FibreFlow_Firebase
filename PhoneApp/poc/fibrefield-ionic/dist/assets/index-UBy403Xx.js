(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var Hm={exports:{}},eu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function CI(){if(Xv)return eu;Xv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:u}}return eu.Fragment=e,eu.jsx=t,eu.jsxs=t,eu}var $v;function DI(){return $v||($v=1,Hm.exports=CI()),Hm.exports}var D=DI(),Gm={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function NI(){if(Zv)return Re;Zv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.iterator;function A(N){return N===null||typeof N!="object"?null:(N=S&&N[S]||N["@@iterator"],typeof N=="function"?N:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,ee={};function X(N,W,oe){this.props=N,this.context=W,this.refs=ee,this.updater=oe||P}X.prototype.isReactComponent={},X.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},X.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function ce(){}ce.prototype=X.prototype;function ue(N,W,oe){this.props=N,this.context=W,this.refs=ee,this.updater=oe||P}var ne=ue.prototype=new ce;ne.constructor=ue,H(ne,X.prototype),ne.isPureReactComponent=!0;var J=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},ge=Object.prototype.hasOwnProperty;function x(N,W,oe,ie,ve,De){return oe=De.ref,{$$typeof:s,type:N,key:W,ref:oe!==void 0?oe:null,props:De}}function I(N,W){return x(N.type,W,void 0,void 0,void 0,N.props)}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function O(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(oe){return W[oe]})}var M=/\/+/g;function U(N,W){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):W.toString(36)}function C(){}function jt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ct(N,W,oe,ie,ve){var De=typeof N;(De==="undefined"||De==="boolean")&&(N=null);var Ae=!1;if(N===null)Ae=!0;else switch(De){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(N.$$typeof){case s:case e:Ae=!0;break;case T:return Ae=N._init,ct(Ae(N._payload),W,oe,ie,ve)}}if(Ae)return ve=ve(N),Ae=ie===""?"."+U(N,0):ie,J(ve)?(oe="",Ae!=null&&(oe=Ae.replace(M,"$&/")+"/"),ct(ve,W,oe,"",function($n){return $n})):ve!=null&&(R(ve)&&(ve=I(ve,oe+(ve.key==null||N&&N.key===ve.key?"":(""+ve.key).replace(M,"$&/")+"/")+Ae)),W.push(ve)),1;Ae=0;var Ot=ie===""?".":ie+":";if(J(N))for(var nt=0;nt<N.length;nt++)ie=N[nt],De=Ot+U(ie,nt),Ae+=ct(ie,W,oe,De,ve);else if(nt=A(N),typeof nt=="function")for(N=nt.call(N),nt=0;!(ie=N.next()).done;)ie=ie.value,De=Ot+U(ie,nt++),Ae+=ct(ie,W,oe,De,ve);else if(De==="object"){if(typeof N.then=="function")return ct(jt(N),W,oe,ie,ve);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function K(N,W,oe){if(N==null)return N;var ie=[],ve=0;return ct(N,ie,"","",function(De){return W.call(oe,De,ve++)}),ie}function se(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(oe){(N._status===0||N._status===-1)&&(N._status=1,N._result=oe)},function(oe){(N._status===0||N._status===-1)&&(N._status=2,N._result=oe)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var _e=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function qe(){}return Re.Children={map:K,forEach:function(N,W,oe){K(N,function(){W.apply(this,arguments)},oe)},count:function(N){var W=0;return K(N,function(){W++}),W},toArray:function(N){return K(N,function(W){return W})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Re.Component=X,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=ue,Re.StrictMode=r,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Re.__COMPILER_RUNTIME={__proto__:null,c:function(N){return ae.H.useMemoCache(N)}},Re.cache=function(N){return function(){return N.apply(null,arguments)}},Re.cloneElement=function(N,W,oe){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ie=H({},N.props),ve=N.key,De=void 0;if(W!=null)for(Ae in W.ref!==void 0&&(De=void 0),W.key!==void 0&&(ve=""+W.key),W)!ge.call(W,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&W.ref===void 0||(ie[Ae]=W[Ae]);var Ae=arguments.length-2;if(Ae===1)ie.children=oe;else if(1<Ae){for(var Ot=Array(Ae),nt=0;nt<Ae;nt++)Ot[nt]=arguments[nt+2];ie.children=Ot}return x(N.type,ve,void 0,void 0,De,ie)},Re.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Re.createElement=function(N,W,oe){var ie,ve={},De=null;if(W!=null)for(ie in W.key!==void 0&&(De=""+W.key),W)ge.call(W,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ve[ie]=W[ie]);var Ae=arguments.length-2;if(Ae===1)ve.children=oe;else if(1<Ae){for(var Ot=Array(Ae),nt=0;nt<Ae;nt++)Ot[nt]=arguments[nt+2];ve.children=Ot}if(N&&N.defaultProps)for(ie in Ae=N.defaultProps,Ae)ve[ie]===void 0&&(ve[ie]=Ae[ie]);return x(N,De,void 0,void 0,null,ve)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(N){return{$$typeof:m,render:N}},Re.isValidElement=R,Re.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:se}},Re.memo=function(N,W){return{$$typeof:_,type:N,compare:W===void 0?null:W}},Re.startTransition=function(N){var W=ae.T,oe={};ae.T=oe;try{var ie=N(),ve=ae.S;ve!==null&&ve(oe,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(qe,_e)}catch(De){_e(De)}finally{ae.T=W}},Re.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Re.use=function(N){return ae.H.use(N)},Re.useActionState=function(N,W,oe){return ae.H.useActionState(N,W,oe)},Re.useCallback=function(N,W){return ae.H.useCallback(N,W)},Re.useContext=function(N){return ae.H.useContext(N)},Re.useDebugValue=function(){},Re.useDeferredValue=function(N,W){return ae.H.useDeferredValue(N,W)},Re.useEffect=function(N,W,oe){var ie=ae.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(N,W)},Re.useId=function(){return ae.H.useId()},Re.useImperativeHandle=function(N,W,oe){return ae.H.useImperativeHandle(N,W,oe)},Re.useInsertionEffect=function(N,W){return ae.H.useInsertionEffect(N,W)},Re.useLayoutEffect=function(N,W){return ae.H.useLayoutEffect(N,W)},Re.useMemo=function(N,W){return ae.H.useMemo(N,W)},Re.useOptimistic=function(N,W){return ae.H.useOptimistic(N,W)},Re.useReducer=function(N,W,oe){return ae.H.useReducer(N,W,oe)},Re.useRef=function(N){return ae.H.useRef(N)},Re.useState=function(N){return ae.H.useState(N)},Re.useSyncExternalStore=function(N,W,oe){return ae.H.useSyncExternalStore(N,W,oe)},Re.useTransition=function(){return ae.H.useTransition()},Re.version="19.1.1",Re}var Jv;function Hp(){return Jv||(Jv=1,Gm.exports=NI()),Gm.exports}var Me=Hp(),Km={exports:{}},tu={},Qm={exports:{}},Ym={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function xI(){return Wv||(Wv=1,(function(s){function e(K,se){var _e=K.length;K.push(se);e:for(;0<_e;){var qe=_e-1>>>1,N=K[qe];if(0<o(N,se))K[qe]=se,K[_e]=N,_e=qe;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var se=K[0],_e=K.pop();if(_e!==se){K[0]=_e;e:for(var qe=0,N=K.length,W=N>>>1;qe<W;){var oe=2*(qe+1)-1,ie=K[oe],ve=oe+1,De=K[ve];if(0>o(ie,_e))ve<N&&0>o(De,ie)?(K[qe]=De,K[ve]=_e,qe=ve):(K[qe]=ie,K[oe]=_e,qe=oe);else if(ve<N&&0>o(De,_e))K[qe]=De,K[ve]=_e,qe=ve;else break e}}return se}function o(K,se){var _e=K.sortIndex-se.sortIndex;return _e!==0?_e:K.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var p=[],_=[],T=1,S=null,A=3,P=!1,H=!1,ee=!1,X=!1,ce=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function J(K){for(var se=t(_);se!==null;){if(se.callback===null)r(_);else if(se.startTime<=K)r(_),se.sortIndex=se.expirationTime,e(p,se);else break;se=t(_)}}function ae(K){if(ee=!1,J(K),!H)if(t(p)!==null)H=!0,ge||(ge=!0,U());else{var se=t(_);se!==null&&ct(ae,se.startTime-K)}}var ge=!1,x=-1,I=5,R=-1;function O(){return X?!0:!(s.unstable_now()-R<I)}function M(){if(X=!1,ge){var K=s.unstable_now();R=K;var se=!0;try{e:{H=!1,ee&&(ee=!1,ue(x),x=-1),P=!0;var _e=A;try{t:{for(J(K),S=t(p);S!==null&&!(S.expirationTime>K&&O());){var qe=S.callback;if(typeof qe=="function"){S.callback=null,A=S.priorityLevel;var N=qe(S.expirationTime<=K);if(K=s.unstable_now(),typeof N=="function"){S.callback=N,J(K),se=!0;break t}S===t(p)&&r(p),J(K)}else r(p);S=t(p)}if(S!==null)se=!0;else{var W=t(_);W!==null&&ct(ae,W.startTime-K),se=!1}}break e}finally{S=null,A=_e,P=!1}se=void 0}}finally{se?U():ge=!1}}}var U;if(typeof ne=="function")U=function(){ne(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,jt=C.port2;C.port1.onmessage=M,U=function(){jt.postMessage(null)}}else U=function(){ce(M,0)};function ct(K,se){x=ce(function(){K(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(K){switch(A){case 1:case 2:case 3:var se=3;break;default:se=A}var _e=A;A=se;try{return K()}finally{A=_e}},s.unstable_requestPaint=function(){X=!0},s.unstable_runWithPriority=function(K,se){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var _e=A;A=K;try{return se()}finally{A=_e}},s.unstable_scheduleCallback=function(K,se,_e){var qe=s.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?qe+_e:qe):_e=qe,K){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=_e+N,K={id:T++,callback:se,priorityLevel:K,startTime:_e,expirationTime:N,sortIndex:-1},_e>qe?(K.sortIndex=_e,e(_,K),t(p)===null&&K===t(_)&&(ee?(ue(x),x=-1):ee=!0,ct(ae,_e-qe))):(K.sortIndex=N,e(p,K),H||P||(H=!0,ge||(ge=!0,U()))),K},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(K){var se=A;return function(){var _e=A;A=se;try{return K.apply(this,arguments)}finally{A=_e}}}})(Ym)),Ym}var eT;function VI(){return eT||(eT=1,Qm.exports=xI()),Qm.exports}var Xm={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function OI(){if(tT)return $t;tT=1;var s=Hp();function e(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,_,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:_,implementation:T}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,_){if(p==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,$t.createPortal=function(p,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(p,_,null,T)},$t.flushSync=function(p){var _=h.T,T=r.p;try{if(h.T=null,r.p=2,p)return p()}finally{h.T=_,r.p=T,r.d.f()}},$t.preconnect=function(p,_){typeof p=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(p,_))},$t.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},$t.preinit=function(p,_){if(typeof p=="string"&&_&&typeof _.as=="string"){var T=_.as,S=m(T,_.crossOrigin),A=typeof _.integrity=="string"?_.integrity:void 0,P=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?r.d.S(p,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:P}):T==="script"&&r.d.X(p,{crossOrigin:S,integrity:A,fetchPriority:P,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},$t.preinitModule=function(p,_){if(typeof p=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=m(_.as,_.crossOrigin);r.d.M(p,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(p)},$t.preload=function(p,_){if(typeof p=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,S=m(T,_.crossOrigin);r.d.L(p,T,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},$t.preloadModule=function(p,_){if(typeof p=="string")if(_){var T=m(_.as,_.crossOrigin);r.d.m(p,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(p)},$t.requestFormReset=function(p){r.d.r(p)},$t.unstable_batchedUpdates=function(p,_){return p(_)},$t.useFormState=function(p,_,T){return h.H.useFormState(p,_,T)},$t.useFormStatus=function(){return h.H.useHostTransitionStatus()},$t.version="19.1.1",$t}var nT;function PI(){if(nT)return Xm.exports;nT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Xm.exports=OI(),Xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function MI(){if(iT)return tu;iT=1;var s=VI(),e=Hp(),t=PI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function h(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),n;if(d===l)return m(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var v=!1,E=f.child;E;){if(E===a){v=!0,a=f,l=d;break}if(E===l){v=!0,l=f,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,l=f;break}if(E===l){v=!0,l=d,a=f;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function _(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=_(n),i!==null)return i;n=n.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),ue=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function jt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case X:return"Profiler";case ee:return"StrictMode";case ae:return"Suspense";case ge:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case P:return"Portal";case ne:return(n.displayName||"Context")+".Provider";case ue:return(n._context.displayName||"Context")+".Consumer";case J:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return i=n.displayName||null,i!==null?i:jt(n.type)||"Memo";case I:i=n._payload,n=n._init;try{return jt(n(i))}catch{}}return null}var ct=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},qe=[],N=-1;function W(n){return{current:n}}function oe(n){0>N||(n.current=qe[N],qe[N]=null,N--)}function ie(n,i){N++,qe[N]=n.current,n.current=i}var ve=W(null),De=W(null),Ae=W(null),Ot=W(null);function nt(n,i){switch(ie(Ae,i),ie(De,n),ie(ve,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Sv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Sv(i),n=Av(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}oe(ve),ie(ve,n)}function $n(){oe(ve),oe(De),oe(Ae)}function ar(n){n.memoizedState!==null&&ie(Ot,n);var i=ve.current,a=Av(i,n.type);i!==a&&(ie(De,n),ie(ve,a))}function Ai(n){De.current===n&&(oe(ve),oe(De)),Ot.current===n&&(oe(Ot),Xl._currentValue=_e)}var ss=Object.prototype.hasOwnProperty,as=s.unstable_scheduleCallback,os=s.unstable_cancelCallback,Ko=s.unstable_shouldYield,Xu=s.unstable_requestPaint,En=s.unstable_now,Hf=s.unstable_getCurrentPriorityLevel,Qo=s.unstable_ImmediatePriority,_a=s.unstable_UserBlockingPriority,ls=s.unstable_NormalPriority,Gf=s.unstable_LowPriority,ya=s.unstable_IdlePriority,Yo=s.log,$u=s.unstable_setDisableYieldValue,ht=null,Ge=null;function cn(n){if(typeof Yo=="function"&&$u(n),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(ht,n)}catch{}}var Yt=Math.clz32?Math.clz32:us,Zu=Math.log,Kf=Math.LN2;function us(n){return n>>>=0,n===0?32:31-(Zu(n)/Kf|0)|0}var cs=256,hs=4194304;function Bn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function va(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?f=Bn(l):(v&=E,v!==0?f=Bn(v):a||(a=E&~n,a!==0&&(f=Bn(a))))):(E=l&~d,E!==0?f=Bn(E):v!==0?f=Bn(v):a||(a=l&~n,a!==0&&(f=Bn(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function fs(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Xo(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $o(){var n=cs;return cs<<=1,(cs&4194048)===0&&(cs=256),n}function Zo(){var n=hs;return hs<<=1,(hs&62914560)===0&&(hs=4194304),n}function Ii(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function wi(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Jo(n,i,a,l,f,d){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var E=n.entanglements,w=n.expirationTimes,z=n.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-Yt(a),$=1<<Q;E[Q]=0,w[Q]=-1;var q=z[Q];if(q!==null)for(z[Q]=null,Q=0;Q<q.length;Q++){var F=q[Q];F!==null&&(F.lane&=-536870913)}a&=~$}l!==0&&Zn(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(v&~i))}function Zn(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-Yt(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function Wo(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-Yt(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function or(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ta(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function lr(){var n=se.p;return n!==0?n:(n=window.event,n===void 0?32:Fv(n.type))}function Ju(n,i){var a=se.p;try{return se.p=n,i()}finally{se.p=a}}var rt=Math.random().toString(36).slice(2),wt="__reactFiber$"+rt,vt="__reactProps$"+rt,bn="__reactContainer$"+rt,el="__reactEvents$"+rt,Qf="__reactListeners$"+rt,ur="__reactHandles$"+rt,Wu="__reactResources$"+rt,ds="__reactMarker$"+rt;function cr(n){delete n[wt],delete n[vt],delete n[el],delete n[Qf],delete n[ur]}function Ri(n){var i=n[wt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[bn]||a[wt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Cv(n);n!==null;){if(a=n[wt])return a;n=Cv(n)}return i}n=a,a=n.parentNode}return null}function Jn(n){if(n=n[wt]||n[bn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Wn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function en(n){var i=n[Wu];return i||(i=n[Wu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function pt(n){n[ds]=!0}var tl=new Set,Ea={};function jn(n,i){Ci(n,i),Ci(n+"Capture",i)}function Ci(n,i){for(Ea[n]=i,n=0;n<i.length;n++)tl.add(i[n])}var ec=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tc={},ms={};function nc(n){return ss.call(ms,n)?!0:ss.call(tc,n)?!1:ec.test(n)?ms[n]=!0:(tc[n]=!0,!1)}function hr(n,i,a){if(nc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function ei(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function zt(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}var ps,ic;function Di(n){if(ps===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ps=i&&i[1]||"",ic=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ps+n+ic}var ba=!1;function Sa(n,i){if(!n||ba)return"";ba=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(F){var q=F}Reflect.construct(n,[],$)}else{try{$.call()}catch(F){q=F}n.call($.prototype)}}else{try{throw Error()}catch(F){q=F}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(F){if(F&&q&&typeof F.stack=="string")return[F.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var w=v.split(`
`),z=E.split(`
`);for(f=l=0;l<w.length&&!w[l].includes("DetermineComponentFrameRoot");)l++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(l===w.length||f===z.length)for(l=w.length-1,f=z.length-1;1<=l&&0<=f&&w[l]!==z[f];)f--;for(;1<=l&&0<=f;l--,f--)if(w[l]!==z[f]){if(l!==1||f!==1)do if(l--,f--,0>f||w[l]!==z[f]){var Q=`
`+w[l].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=l&&0<=f);break}}}finally{ba=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Di(a):""}function nl(n){switch(n.tag){case 26:case 27:case 5:return Di(n.type);case 16:return Di("Lazy");case 13:return Di("Suspense");case 19:return Di("SuspenseList");case 0:case 15:return Sa(n.type,!1);case 11:return Sa(n.type.render,!1);case 1:return Sa(n.type,!0);case 31:return Di("Activity");default:return""}}function Aa(n){try{var i="";do i+=nl(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function tn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function il(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Yf(n){var i=il(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ia(n){n._valueTracker||(n._valueTracker=Yf(n))}function rl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=il(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function gs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Xf=/[\n"\\]/g;function Tt(n){return n.replace(Xf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function hn(n,i,a,l,f,d,v,E){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+tn(i)):n.value!==""+tn(i)&&(n.value=""+tn(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?fr(n,v,tn(i)):a!=null?fr(n,v,tn(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+tn(E):n.removeAttribute("name")}function _s(n,i,a,l,f,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+tn(a):"",i=i!=null?""+tn(i):a,E||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=E?n.checked:!!l,n.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v)}function fr(n,i,a){i==="number"&&gs(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Ni(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+tn(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Xe(n,i,a){if(i!=null&&(i=""+tn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+tn(a):""}function ys(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ct(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=tn(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Sn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var vs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rc(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||vs.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function sl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&rc(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&rc(n,d,i[d])}function al(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $f=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wa(n){return Zf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var xi=null;function An(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vi=null,Oi=null;function ol(n){var i=Jn(n);if(i&&(n=i.stateNode)){var a=n[vt]||null;e:switch(n=i.stateNode,i.type){case"input":if(hn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[vt]||null;if(!f)throw Error(r(90));hn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&rl(l)}break e;case"textarea":Xe(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ni(n,!!a.multiple,i,!1)}}}var ti=!1;function sc(n,i,a){if(ti)return n(i,a);ti=!0;try{var l=n(i);return l}finally{if(ti=!1,(Vi!==null||Oi!==null)&&(Jc(),Vi&&(i=Vi,n=Oi,Oi=Vi=null,ol(i),n)))for(i=0;i<n.length;i++)ol(n[i])}}function Ts(n,i){var a=n.stateNode;if(a===null)return null;var l=a[vt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),In=!1;if(zn)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){In=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{In=!1}var ni=null,dr=null,Pi=null;function ll(){if(Pi)return Pi;var n,i=dr,a=i.length,l,f="value"in ni?ni.value:ni.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var v=a-n;for(l=1;l<=v&&i[a-l]===f[d-l];l++);return Pi=f.slice(n,1<l?1-l:void 0)}function ii(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ri(){return!0}function ul(){return!1}function Pt(n){function i(a,l,f,d,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(a=n[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ri:ul,this.isPropagationStopped=ul,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),i}var He={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=Pt(He),bs=T({},He,{view:0,detail:0}),ac=Pt(bs),Ca,Da,si,Ss=T({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ws,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==si&&(si&&n.type==="mousemove"?(Ca=n.screenX-si.screenX,Da=n.screenY-si.screenY):Da=Ca=0,si=n),Ca)},movementY:function(n){return"movementY"in n?n.movementY:Da}}),wn=Pt(Ss),oc=T({},Ss,{dataTransfer:0}),Jf=Pt(oc),As=T({},bs,{relatedTarget:0}),Na=Pt(As),cl=T({},He,{animationName:0,elapsedTime:0,pseudoElement:0}),xa=Pt(cl),lc=T({},He,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Va=Pt(lc),Wf=T({},He,{data:0}),hl=Pt(Wf),Is={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=cc[n])?!!i[n]:!1}function ws(){return fl}var hc=T({},bs,{key:function(n){if(n.key){var i=Is[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ii(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?uc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ws,charCode:function(n){return n.type==="keypress"?ii(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ii(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Oa=Pt(hc),fc=T({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dl=Pt(fc),Mi=T({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ws}),dc=Pt(Mi),mc=T({},He,{propertyName:0,elapsedTime:0,pseudoElement:0}),pc=Pt(mc),gc=T({},Ss,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Pa=Pt(gc),nn=T({},He,{newState:0,oldState:0}),_c=Pt(nn),yc=[9,13,27,32],ai=zn&&"CompositionEvent"in window,c=null;zn&&"documentMode"in document&&(c=document.documentMode);var g=zn&&"TextEvent"in window&&!c,y=zn&&(!ai||c&&8<c&&11>=c),b=" ",L=!1;function G(n,i){switch(n){case"keyup":return yc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function re(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ue=!1;function Rt(n,i){switch(n){case"compositionend":return re(i);case"keypress":return i.which!==32?null:(L=!0,b);case"textInput":return n=i.data,n===b&&L?null:n;default:return null}}function Le(n,i){if(Ue)return n==="compositionend"||!ai&&G(n,i)?(n=ll(),Pi=dr=ni=null,Ue=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var Mt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ct(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Mt[n.type]:i==="textarea"}function ki(n,i,a,l){Vi?Oi?Oi.push(l):Oi=[l]:Vi=l,i=rh(i,"onChange"),0<i.length&&(a=new Ra("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var qt=null,oi=null;function ml(n){yv(n,0)}function vc(n){var i=Wn(n);if(rl(i))return n}function Bg(n,i){if(n==="change")return i}var jg=!1;if(zn){var ed;if(zn){var td="oninput"in document;if(!td){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),td=typeof zg.oninput=="function"}ed=td}else ed=!1;jg=ed&&(!document.documentMode||9<document.documentMode)}function qg(){qt&&(qt.detachEvent("onpropertychange",Fg),oi=qt=null)}function Fg(n){if(n.propertyName==="value"&&vc(oi)){var i=[];ki(i,oi,n,An(n)),sc(ml,i)}}function rA(n,i,a){n==="focusin"?(qg(),qt=i,oi=a,qt.attachEvent("onpropertychange",Fg)):n==="focusout"&&qg()}function sA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return vc(oi)}function aA(n,i){if(n==="click")return vc(i)}function oA(n,i){if(n==="input"||n==="change")return vc(i)}function lA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var fn=typeof Object.is=="function"?Object.is:lA;function pl(n,i){if(fn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!ss.call(i,f)||!fn(n[f],i[f]))return!1}return!0}function Hg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gg(n,i){var a=Hg(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Hg(a)}}function Kg(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Kg(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Qg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=gs(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=gs(n.document)}return i}function nd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var uA=zn&&"documentMode"in document&&11>=document.documentMode,Ma=null,id=null,gl=null,rd=!1;function Yg(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;rd||Ma==null||Ma!==gs(l)||(l=Ma,"selectionStart"in l&&nd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),gl&&pl(gl,l)||(gl=l,l=rh(id,"onSelect"),0<l.length&&(i=new Ra("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ma)))}function Rs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var ka={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionrun:Rs("Transition","TransitionRun"),transitionstart:Rs("Transition","TransitionStart"),transitioncancel:Rs("Transition","TransitionCancel"),transitionend:Rs("Transition","TransitionEnd")},sd={},Xg={};zn&&(Xg=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Cs(n){if(sd[n])return sd[n];if(!ka[n])return n;var i=ka[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Xg)return sd[n]=i[a];return n}var $g=Cs("animationend"),Zg=Cs("animationiteration"),Jg=Cs("animationstart"),cA=Cs("transitionrun"),hA=Cs("transitionstart"),fA=Cs("transitioncancel"),Wg=Cs("transitionend"),e_=new Map,ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ad.push("scrollEnd");function qn(n,i){e_.set(n,i),jn(i,[n])}var t_=new WeakMap;function Rn(n,i){if(typeof n=="object"&&n!==null){var a=t_.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Aa(i)},t_.set(n,i),i)}return{value:n,source:i,stack:Aa(i)}}var Cn=[],Ua=0,od=0;function Tc(){for(var n=Ua,i=od=Ua=0;i<n;){var a=Cn[i];Cn[i++]=null;var l=Cn[i];Cn[i++]=null;var f=Cn[i];Cn[i++]=null;var d=Cn[i];if(Cn[i++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&n_(a,f,d)}}function Ec(n,i,a,l){Cn[Ua++]=n,Cn[Ua++]=i,Cn[Ua++]=a,Cn[Ua++]=l,od|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function ld(n,i,a,l){return Ec(n,i,a,l),bc(n)}function La(n,i){return Ec(n,null,null,i),bc(n)}function n_(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-Yt(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function bc(n){if(50<zl)throw zl=0,mm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ba={};function dA(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(n,i,a,l){return new dA(n,i,a,l)}function ud(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ui(n,i){var a=n.alternate;return a===null?(a=dn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function i_(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Sc(n,i,a,l,f,d){var v=0;if(l=n,typeof n=="function")ud(n)&&(v=1);else if(typeof n=="string")v=pI(n,a,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=dn(31,a,i,f),n.elementType=R,n.lanes=d,n;case H:return Ds(a.children,f,d,i);case ee:v=8,f|=24;break;case X:return n=dn(12,a,i,f|2),n.elementType=X,n.lanes=d,n;case ae:return n=dn(13,a,i,f),n.elementType=ae,n.lanes=d,n;case ge:return n=dn(19,a,i,f),n.elementType=ge,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ce:case ne:v=10;break e;case ue:v=9;break e;case J:v=11;break e;case x:v=14;break e;case I:v=16,l=null;break e}v=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=dn(v,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Ds(n,i,a,l){return n=dn(7,n,l,i),n.lanes=a,n}function cd(n,i,a){return n=dn(6,n,null,i),n.lanes=a,n}function hd(n,i,a){return i=dn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var ja=[],za=0,Ac=null,Ic=0,Dn=[],Nn=0,Ns=null,Li=1,Bi="";function xs(n,i){ja[za++]=Ic,ja[za++]=Ac,Ac=n,Ic=i}function r_(n,i,a){Dn[Nn++]=Li,Dn[Nn++]=Bi,Dn[Nn++]=Ns,Ns=n;var l=Li;n=Bi;var f=32-Yt(l)-1;l&=~(1<<f),a+=1;var d=32-Yt(i)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Li=1<<32-Yt(i)+f|a<<f|l,Bi=d+n}else Li=1<<d|a<<f|l,Bi=n}function fd(n){n.return!==null&&(xs(n,1),r_(n,1,0))}function dd(n){for(;n===Ac;)Ac=ja[--za],ja[za]=null,Ic=ja[--za],ja[za]=null;for(;n===Ns;)Ns=Dn[--Nn],Dn[Nn]=null,Bi=Dn[--Nn],Dn[Nn]=null,Li=Dn[--Nn],Dn[Nn]=null}var rn=null,ft=null,Fe=!1,Vs=null,li=!1,md=Error(r(519));function Os(n){var i=Error(r(418,""));throw vl(Rn(i,n)),md}function s_(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[wt]=n,i[vt]=l,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<Fl.length;a++)Ve(Fl[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),_s(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ia(i);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),ys(i,l.value,l.defaultValue,l.children),Ia(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||bv(i.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),l.onScroll!=null&&Ve("scroll",i),l.onScrollEnd!=null&&Ve("scrollend",i),l.onClick!=null&&(i.onclick=sh),i=!0):i=!1,i||Os(n)}function a_(n){for(rn=n.return;rn;)switch(rn.tag){case 5:case 13:li=!1;return;case 27:case 3:li=!0;return;default:rn=rn.return}}function _l(n){if(n!==rn)return!1;if(!Fe)return a_(n),Fe=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Nm(n.type,n.memoizedProps)),a=!a),a&&ft&&Os(n),a_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){ft=Hn(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}ft=null}}else i===27?(i=ft,Dr(n.type)?(n=Pm,Pm=null,ft=n):ft=i):ft=rn?Hn(n.stateNode.nextSibling):null;return!0}function yl(){ft=rn=null,Fe=!1}function o_(){var n=Vs;return n!==null&&(un===null?un=n:un.push.apply(un,n),Vs=null),n}function vl(n){Vs===null?Vs=[n]:Vs.push(n)}var pd=W(null),Ps=null,ji=null;function mr(n,i,a){ie(pd,i._currentValue),i._currentValue=a}function zi(n){n._currentValue=pd.current,oe(pd)}function gd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function _d(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=f;for(var w=0;w<i.length;w++)if(E.context===i[w]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),gd(d.return,a,n),l||(v=null);break e}d=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),gd(v,a,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Tl(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var E=f.type;fn(f.pendingProps.value,v.value)||(n!==null?n.push(E):n=[E])}}else if(f===Ot.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Xl):n=[Xl])}f=f.return}n!==null&&_d(i,n,a,l),i.flags|=262144}function wc(n){for(n=n.firstContext;n!==null;){if(!fn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ms(n){Ps=n,ji=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xt(n){return l_(Ps,n)}function Rc(n,i){return Ps===null&&Ms(n),l_(n,i)}function l_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ji===null){if(n===null)throw Error(r(308));ji=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ji=ji.next=i;return a}var mA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},pA=s.unstable_scheduleCallback,gA=s.unstable_NormalPriority,Dt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yd(){return{controller:new mA,data:new Map,refCount:0}}function El(n){n.refCount--,n.refCount===0&&pA(gA,function(){n.controller.abort()})}var bl=null,vd=0,qa=0,Fa=null;function _A(n,i){if(bl===null){var a=bl=[];vd=0,qa=Em(),Fa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return vd++,i.then(u_,u_),i}function u_(){if(--vd===0&&bl!==null){Fa!==null&&(Fa.status="fulfilled");var n=bl;bl=null,qa=0,Fa=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function yA(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var c_=K.S;K.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&_A(n,i),c_!==null&&c_(n,i)};var ks=W(null);function Td(){var n=ks.current;return n!==null?n:it.pooledCache}function Cc(n,i){i===null?ie(ks,ks.current):ie(ks,i.pool)}function h_(){var n=Td();return n===null?null:{parent:Dt._currentValue,pool:n}}var Sl=Error(r(460)),f_=Error(r(474)),Dc=Error(r(542)),Ed={then:function(){}};function d_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Nc(){}function m_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Nc,Nc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,g_(n),n;default:if(typeof i.status=="string")i.then(Nc,Nc);else{if(n=it,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,g_(n),n}throw Al=i,Sl}}var Al=null;function p_(){if(Al===null)throw Error(r(459));var n=Al;return Al=null,n}function g_(n){if(n===Sl||n===Dc)throw Error(r(483))}var pr=!1;function bd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function gr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function _r(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=bc(n),n_(n,null,a),i}return Ec(n,l,i,a),bc(n)}function Il(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Wo(n,a)}}function Ad(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Id=!1;function wl(){if(Id){var n=Fa;if(n!==null)throw n}}function Rl(n,i,a,l){Id=!1;var f=n.updateQueue;pr=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var w=E,z=w.next;w.next=null,v===null?d=z:v.next=z,v=w;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==v&&(E===null?Q.firstBaseUpdate=z:E.next=z,Q.lastBaseUpdate=w))}if(d!==null){var $=f.baseState;v=0,Q=z=w=null,E=d;do{var q=E.lane&-536870913,F=q!==E.lane;if(F?(Be&q)===q:(l&q)===q){q!==0&&q===qa&&(Id=!0),Q!==null&&(Q=Q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var be=n,Te=E;q=i;var Je=a;switch(Te.tag){case 1:if(be=Te.payload,typeof be=="function"){$=be.call(Je,$,q);break e}$=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Te.payload,q=typeof be=="function"?be.call(Je,$,q):be,q==null)break e;$=T({},$,q);break e;case 2:pr=!0}}q=E.callback,q!==null&&(n.flags|=64,F&&(n.flags|=8192),F=f.callbacks,F===null?f.callbacks=[q]:F.push(q))}else F={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(z=Q=F,w=$):Q=Q.next=F,v|=q;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;F=E,E=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);Q===null&&(w=$),f.baseState=w,f.firstBaseUpdate=z,f.lastBaseUpdate=Q,d===null&&(f.shared.lanes=0),Ir|=v,n.lanes=v,n.memoizedState=$}}function __(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function y_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)__(a[n],i)}var Ha=W(null),xc=W(0);function v_(n,i){n=Yi,ie(xc,n),ie(Ha,i),Yi=n|i.baseLanes}function wd(){ie(xc,Yi),ie(Ha,Ha.current)}function Rd(){Yi=xc.current,oe(Ha),oe(xc)}var yr=0,Ce=null,$e=null,Et=null,Vc=!1,Ga=!1,Us=!1,Oc=0,Cl=0,Ka=null,vA=0;function gt(){throw Error(r(321))}function Cd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!fn(n[a],i[a]))return!1;return!0}function Dd(n,i,a,l,f,d){return yr=d,Ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=n===null||n.memoizedState===null?ny:iy,Us=!1,d=a(l,f),Us=!1,Ga&&(d=E_(i,a,l,f)),T_(n),d}function T_(n){K.H=Bc;var i=$e!==null&&$e.next!==null;if(yr=0,Et=$e=Ce=null,Vc=!1,Cl=0,Ka=null,i)throw Error(r(300));n===null||kt||(n=n.dependencies,n!==null&&wc(n)&&(kt=!0))}function E_(n,i,a,l){Ce=n;var f=0;do{if(Ga&&(Ka=null),Cl=0,Ga=!1,25<=f)throw Error(r(301));if(f+=1,Et=$e=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=wA,d=i(a,l)}while(Ga);return d}function TA(){var n=K.H,i=n.useState()[0];return i=typeof i.then=="function"?Dl(i):i,n=n.useState()[0],($e!==null?$e.memoizedState:null)!==n&&(Ce.flags|=1024),i}function Nd(){var n=Oc!==0;return Oc=0,n}function xd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Vd(n){if(Vc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Vc=!1}yr=0,Et=$e=Ce=null,Ga=!1,Cl=Oc=0,Ka=null}function on(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ce.memoizedState=Et=n:Et=Et.next=n,Et}function bt(){if($e===null){var n=Ce.alternate;n=n!==null?n.memoizedState:null}else n=$e.next;var i=Et===null?Ce.memoizedState:Et.next;if(i!==null)Et=i,$e=n;else{if(n===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));$e=n,n={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Et===null?Ce.memoizedState=Et=n:Et=Et.next=n}return Et}function Od(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(n){var i=Cl;return Cl+=1,Ka===null&&(Ka=[]),n=m_(Ka,n,i),i=Ce,(Et===null?i.memoizedState:Et.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?ny:iy),n}function Pc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Dl(n);if(n.$$typeof===ne)return Xt(n)}throw Error(r(438,String(n)))}function Pd(n){var i=null,a=Ce.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Od(),Ce.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=O;return i.index++,a}function qi(n,i){return typeof i=="function"?i(n):i}function Mc(n){var i=bt();return Md(i,$e,n)}function Md(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var E=v=null,w=null,z=i,Q=!1;do{var $=z.lane&-536870913;if($!==z.lane?(Be&$)===$:(yr&$)===$){var q=z.revertLane;if(q===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),$===qa&&(Q=!0);else if((yr&q)===q){z=z.next,q===qa&&(Q=!0);continue}else $={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},w===null?(E=w=$,v=d):w=w.next=$,Ce.lanes|=q,Ir|=q;$=z.action,Us&&a(d,$),d=z.hasEagerState?z.eagerState:a(d,$)}else q={lane:$,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},w===null?(E=w=q,v=d):w=w.next=q,Ce.lanes|=$,Ir|=$;z=z.next}while(z!==null&&z!==i);if(w===null?v=d:w.next=E,!fn(d,n.memoizedState)&&(kt=!0,Q&&(a=Fa,a!==null)))throw a;n.memoizedState=d,n.baseState=v,n.baseQueue=w,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function kd(n){var i=bt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=n(d,v.action),v=v.next;while(v!==f);fn(d,i.memoizedState)||(kt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function b_(n,i,a){var l=Ce,f=bt(),d=Fe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!fn(($e||f).memoizedState,a);v&&(f.memoizedState=a,kt=!0),f=f.queue;var E=I_.bind(null,l,f,n);if(Nl(2048,8,E,[n]),f.getSnapshot!==i||v||Et!==null&&Et.memoizedState.tag&1){if(l.flags|=2048,Qa(9,kc(),A_.bind(null,l,f,a,i),null),it===null)throw Error(r(349));d||(yr&124)!==0||S_(l,i,a)}return a}function S_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ce.updateQueue,i===null?(i=Od(),Ce.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function A_(n,i,a,l){i.value=a,i.getSnapshot=l,w_(i)&&R_(n)}function I_(n,i,a){return a(function(){w_(i)&&R_(n)})}function w_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!fn(n,a)}catch{return!0}}function R_(n){var i=La(n,2);i!==null&&yn(i,n,2)}function Ud(n){var i=on();if(typeof n=="function"){var a=n;if(n=a(),Us){cn(!0);try{a()}finally{cn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:n},i}function C_(n,i,a,l){return n.baseState=a,Md(n,$e,typeof l=="function"?l:qi)}function EA(n,i,a,l,f){if(Lc(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,D_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function D_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=K.T,v={};K.T=v;try{var E=a(f,l),w=K.S;w!==null&&w(v,E),N_(n,i,E)}catch(z){Ld(n,i,z)}finally{K.T=d}}else try{d=a(f,l),N_(n,i,d)}catch(z){Ld(n,i,z)}}function N_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){x_(n,i,l)},function(l){return Ld(n,i,l)}):x_(n,i,a)}function x_(n,i,a){i.status="fulfilled",i.value=a,V_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,D_(n,a)))}function Ld(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,V_(i),i=i.next;while(i!==l)}n.action=null}function V_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function O_(n,i){return i}function P_(n,i){if(Fe){var a=it.formState;if(a!==null){e:{var l=Ce;if(Fe){if(ft){t:{for(var f=ft,d=li;f.nodeType!==8;){if(!d){f=null;break t}if(f=Hn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ft=Hn(f.nextSibling),l=f.data==="F!";break e}}Os(l)}l=!1}l&&(i=a[0])}}return a=on(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O_,lastRenderedState:i},a.queue=l,a=W_.bind(null,Ce,l),l.dispatch=a,l=Ud(!1),d=Fd.bind(null,Ce,!1,l.queue),l=on(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=EA.bind(null,Ce,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function M_(n){var i=bt();return k_(i,$e,n)}function k_(n,i,a){if(i=Md(n,i,O_)[0],n=Mc(qi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Dl(i)}catch(v){throw v===Sl?Dc:v}else l=i;i=bt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Ce.flags|=2048,Qa(9,kc(),bA.bind(null,f,a),null)),[l,d,n]}function bA(n,i){n.action=i}function U_(n){var i=bt(),a=$e;if(a!==null)return k_(i,a,n);bt(),i=i.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function Qa(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Ce.updateQueue,i===null&&(i=Od(),Ce.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function kc(){return{destroy:void 0,resource:void 0}}function L_(){return bt().memoizedState}function Uc(n,i,a,l){var f=on();l=l===void 0?null:l,Ce.flags|=n,f.memoizedState=Qa(1|i,kc(),a,l)}function Nl(n,i,a,l){var f=bt();l=l===void 0?null:l;var d=f.memoizedState.inst;$e!==null&&l!==null&&Cd(l,$e.memoizedState.deps)?f.memoizedState=Qa(i,d,a,l):(Ce.flags|=n,f.memoizedState=Qa(1|i,d,a,l))}function B_(n,i){Uc(8390656,8,n,i)}function j_(n,i){Nl(2048,8,n,i)}function z_(n,i){return Nl(4,2,n,i)}function q_(n,i){return Nl(4,4,n,i)}function F_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function H_(n,i,a){a=a!=null?a.concat([n]):null,Nl(4,4,F_.bind(null,i,n),a)}function Bd(){}function G_(n,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Cd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function K_(n,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Cd(i,l[1]))return l[0];if(l=n(),Us){cn(!0);try{n()}finally{cn(!1)}}return a.memoizedState=[l,i],l}function jd(n,i,a){return a===void 0||(yr&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=Xy(),Ce.lanes|=n,Ir|=n,a)}function Q_(n,i,a,l){return fn(a,i)?a:Ha.current!==null?(n=jd(n,a,l),fn(n,i)||(kt=!0),n):(yr&42)===0?(kt=!0,n.memoizedState=a):(n=Xy(),Ce.lanes|=n,Ir|=n,i)}function Y_(n,i,a,l,f){var d=se.p;se.p=d!==0&&8>d?d:8;var v=K.T,E={};K.T=E,Fd(n,!1,i,a);try{var w=f(),z=K.S;if(z!==null&&z(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var Q=yA(w,l);xl(n,i,Q,_n(n))}else xl(n,i,l,_n(n))}catch($){xl(n,i,{then:function(){},status:"rejected",reason:$},_n())}finally{se.p=d,K.T=v}}function SA(){}function zd(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=X_(n).queue;Y_(n,f,i,_e,a===null?SA:function(){return $_(n),a(l)})}function X_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:_e},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function $_(n){var i=X_(n).next.queue;xl(n,i,{},_n())}function qd(){return Xt(Xl)}function Z_(){return bt().memoizedState}function J_(){return bt().memoizedState}function AA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=_n();n=gr(a);var l=_r(i,n,a);l!==null&&(yn(l,i,a),Il(l,i,a)),i={cache:yd()},n.payload=i;return}i=i.return}}function IA(n,i,a){var l=_n();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Lc(n)?ey(i,a):(a=ld(n,i,a,l),a!==null&&(yn(a,n,l),ty(a,i,l)))}function W_(n,i,a){var l=_n();xl(n,i,a,l)}function xl(n,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lc(n))ey(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(f.hasEagerState=!0,f.eagerState=E,fn(E,v))return Ec(n,i,f,0),it===null&&Tc(),!1}catch{}finally{}if(a=ld(n,i,f,l),a!==null)return yn(a,n,l),ty(a,i,l),!0}return!1}function Fd(n,i,a,l){if(l={lane:2,revertLane:Em(),action:l,hasEagerState:!1,eagerState:null,next:null},Lc(n)){if(i)throw Error(r(479))}else i=ld(n,a,l,2),i!==null&&yn(i,n,2)}function Lc(n){var i=n.alternate;return n===Ce||i!==null&&i===Ce}function ey(n,i){Ga=Vc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function ty(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Wo(n,a)}}var Bc={readContext:Xt,use:Pc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},ny={readContext:Xt,use:Pc,useCallback:function(n,i){return on().memoizedState=[n,i===void 0?null:i],n},useContext:Xt,useEffect:B_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Uc(4194308,4,F_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Uc(4194308,4,n,i)},useInsertionEffect:function(n,i){Uc(4,2,n,i)},useMemo:function(n,i){var a=on();i=i===void 0?null:i;var l=n();if(Us){cn(!0);try{n()}finally{cn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=on();if(a!==void 0){var f=a(i);if(Us){cn(!0);try{a(i)}finally{cn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=IA.bind(null,Ce,n),[l.memoizedState,n]},useRef:function(n){var i=on();return n={current:n},i.memoizedState=n},useState:function(n){n=Ud(n);var i=n.queue,a=W_.bind(null,Ce,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Bd,useDeferredValue:function(n,i){var a=on();return jd(a,n,i)},useTransition:function(){var n=Ud(!1);return n=Y_.bind(null,Ce,n.queue,!0,!1),on().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Ce,f=on();if(Fe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),it===null)throw Error(r(349));(Be&124)!==0||S_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,B_(I_.bind(null,l,d,n),[n]),l.flags|=2048,Qa(9,kc(),A_.bind(null,l,d,a,i),null),a},useId:function(){var n=on(),i=it.identifierPrefix;if(Fe){var a=Bi,l=Li;a=(l&~(1<<32-Yt(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=Oc++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=vA++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:qd,useFormState:P_,useActionState:P_,useOptimistic:function(n){var i=on();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Fd.bind(null,Ce,!0,a),a.dispatch=i,[n,i]},useMemoCache:Pd,useCacheRefresh:function(){return on().memoizedState=AA.bind(null,Ce)}},iy={readContext:Xt,use:Pc,useCallback:G_,useContext:Xt,useEffect:j_,useImperativeHandle:H_,useInsertionEffect:z_,useLayoutEffect:q_,useMemo:K_,useReducer:Mc,useRef:L_,useState:function(){return Mc(qi)},useDebugValue:Bd,useDeferredValue:function(n,i){var a=bt();return Q_(a,$e.memoizedState,n,i)},useTransition:function(){var n=Mc(qi)[0],i=bt().memoizedState;return[typeof n=="boolean"?n:Dl(n),i]},useSyncExternalStore:b_,useId:Z_,useHostTransitionStatus:qd,useFormState:M_,useActionState:M_,useOptimistic:function(n,i){var a=bt();return C_(a,$e,n,i)},useMemoCache:Pd,useCacheRefresh:J_},wA={readContext:Xt,use:Pc,useCallback:G_,useContext:Xt,useEffect:j_,useImperativeHandle:H_,useInsertionEffect:z_,useLayoutEffect:q_,useMemo:K_,useReducer:kd,useRef:L_,useState:function(){return kd(qi)},useDebugValue:Bd,useDeferredValue:function(n,i){var a=bt();return $e===null?jd(a,n,i):Q_(a,$e.memoizedState,n,i)},useTransition:function(){var n=kd(qi)[0],i=bt().memoizedState;return[typeof n=="boolean"?n:Dl(n),i]},useSyncExternalStore:b_,useId:Z_,useHostTransitionStatus:qd,useFormState:U_,useActionState:U_,useOptimistic:function(n,i){var a=bt();return $e!==null?C_(a,$e,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Pd,useCacheRefresh:J_},Ya=null,Vl=0;function jc(n){var i=Vl;return Vl+=1,Ya===null&&(Ya=[]),m_(Ya,n,i)}function Ol(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function zc(n,i){throw i.$$typeof===S?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function ry(n){var i=n._init;return i(n._payload)}function sy(n){function i(k,V){if(n){var j=k.deletions;j===null?(k.deletions=[V],k.flags|=16):j.push(V)}}function a(k,V){if(!n)return null;for(;V!==null;)i(k,V),V=V.sibling;return null}function l(k){for(var V=new Map;k!==null;)k.key!==null?V.set(k.key,k):V.set(k.index,k),k=k.sibling;return V}function f(k,V){return k=Ui(k,V),k.index=0,k.sibling=null,k}function d(k,V,j){return k.index=j,n?(j=k.alternate,j!==null?(j=j.index,j<V?(k.flags|=67108866,V):j):(k.flags|=67108866,V)):(k.flags|=1048576,V)}function v(k){return n&&k.alternate===null&&(k.flags|=67108866),k}function E(k,V,j,Y){return V===null||V.tag!==6?(V=cd(j,k.mode,Y),V.return=k,V):(V=f(V,j),V.return=k,V)}function w(k,V,j,Y){var fe=j.type;return fe===H?Q(k,V,j.props.children,Y,j.key):V!==null&&(V.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===I&&ry(fe)===V.type)?(V=f(V,j.props),Ol(V,j),V.return=k,V):(V=Sc(j.type,j.key,j.props,null,k.mode,Y),Ol(V,j),V.return=k,V)}function z(k,V,j,Y){return V===null||V.tag!==4||V.stateNode.containerInfo!==j.containerInfo||V.stateNode.implementation!==j.implementation?(V=hd(j,k.mode,Y),V.return=k,V):(V=f(V,j.children||[]),V.return=k,V)}function Q(k,V,j,Y,fe){return V===null||V.tag!==7?(V=Ds(j,k.mode,Y,fe),V.return=k,V):(V=f(V,j),V.return=k,V)}function $(k,V,j){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=cd(""+V,k.mode,j),V.return=k,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case A:return j=Sc(V.type,V.key,V.props,null,k.mode,j),Ol(j,V),j.return=k,j;case P:return V=hd(V,k.mode,j),V.return=k,V;case I:var Y=V._init;return V=Y(V._payload),$(k,V,j)}if(ct(V)||U(V))return V=Ds(V,k.mode,j,null),V.return=k,V;if(typeof V.then=="function")return $(k,jc(V),j);if(V.$$typeof===ne)return $(k,Rc(k,V),j);zc(k,V)}return null}function q(k,V,j,Y){var fe=V!==null?V.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return fe!==null?null:E(k,V,""+j,Y);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return j.key===fe?w(k,V,j,Y):null;case P:return j.key===fe?z(k,V,j,Y):null;case I:return fe=j._init,j=fe(j._payload),q(k,V,j,Y)}if(ct(j)||U(j))return fe!==null?null:Q(k,V,j,Y,null);if(typeof j.then=="function")return q(k,V,jc(j),Y);if(j.$$typeof===ne)return q(k,V,Rc(k,j),Y);zc(k,j)}return null}function F(k,V,j,Y,fe){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return k=k.get(j)||null,E(V,k,""+Y,fe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return k=k.get(Y.key===null?j:Y.key)||null,w(V,k,Y,fe);case P:return k=k.get(Y.key===null?j:Y.key)||null,z(V,k,Y,fe);case I:var Ne=Y._init;return Y=Ne(Y._payload),F(k,V,j,Y,fe)}if(ct(Y)||U(Y))return k=k.get(j)||null,Q(V,k,Y,fe,null);if(typeof Y.then=="function")return F(k,V,j,jc(Y),fe);if(Y.$$typeof===ne)return F(k,V,j,Rc(V,Y),fe);zc(V,Y)}return null}function be(k,V,j,Y){for(var fe=null,Ne=null,pe=V,Ee=V=0,Lt=null;pe!==null&&Ee<j.length;Ee++){pe.index>Ee?(Lt=pe,pe=null):Lt=pe.sibling;var ze=q(k,pe,j[Ee],Y);if(ze===null){pe===null&&(pe=Lt);break}n&&pe&&ze.alternate===null&&i(k,pe),V=d(ze,V,Ee),Ne===null?fe=ze:Ne.sibling=ze,Ne=ze,pe=Lt}if(Ee===j.length)return a(k,pe),Fe&&xs(k,Ee),fe;if(pe===null){for(;Ee<j.length;Ee++)pe=$(k,j[Ee],Y),pe!==null&&(V=d(pe,V,Ee),Ne===null?fe=pe:Ne.sibling=pe,Ne=pe);return Fe&&xs(k,Ee),fe}for(pe=l(pe);Ee<j.length;Ee++)Lt=F(pe,k,Ee,j[Ee],Y),Lt!==null&&(n&&Lt.alternate!==null&&pe.delete(Lt.key===null?Ee:Lt.key),V=d(Lt,V,Ee),Ne===null?fe=Lt:Ne.sibling=Lt,Ne=Lt);return n&&pe.forEach(function(Pr){return i(k,Pr)}),Fe&&xs(k,Ee),fe}function Te(k,V,j,Y){if(j==null)throw Error(r(151));for(var fe=null,Ne=null,pe=V,Ee=V=0,Lt=null,ze=j.next();pe!==null&&!ze.done;Ee++,ze=j.next()){pe.index>Ee?(Lt=pe,pe=null):Lt=pe.sibling;var Pr=q(k,pe,ze.value,Y);if(Pr===null){pe===null&&(pe=Lt);break}n&&pe&&Pr.alternate===null&&i(k,pe),V=d(Pr,V,Ee),Ne===null?fe=Pr:Ne.sibling=Pr,Ne=Pr,pe=Lt}if(ze.done)return a(k,pe),Fe&&xs(k,Ee),fe;if(pe===null){for(;!ze.done;Ee++,ze=j.next())ze=$(k,ze.value,Y),ze!==null&&(V=d(ze,V,Ee),Ne===null?fe=ze:Ne.sibling=ze,Ne=ze);return Fe&&xs(k,Ee),fe}for(pe=l(pe);!ze.done;Ee++,ze=j.next())ze=F(pe,k,Ee,ze.value,Y),ze!==null&&(n&&ze.alternate!==null&&pe.delete(ze.key===null?Ee:ze.key),V=d(ze,V,Ee),Ne===null?fe=ze:Ne.sibling=ze,Ne=ze);return n&&pe.forEach(function(RI){return i(k,RI)}),Fe&&xs(k,Ee),fe}function Je(k,V,j,Y){if(typeof j=="object"&&j!==null&&j.type===H&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case A:e:{for(var fe=j.key;V!==null;){if(V.key===fe){if(fe=j.type,fe===H){if(V.tag===7){a(k,V.sibling),Y=f(V,j.props.children),Y.return=k,k=Y;break e}}else if(V.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===I&&ry(fe)===V.type){a(k,V.sibling),Y=f(V,j.props),Ol(Y,j),Y.return=k,k=Y;break e}a(k,V);break}else i(k,V);V=V.sibling}j.type===H?(Y=Ds(j.props.children,k.mode,Y,j.key),Y.return=k,k=Y):(Y=Sc(j.type,j.key,j.props,null,k.mode,Y),Ol(Y,j),Y.return=k,k=Y)}return v(k);case P:e:{for(fe=j.key;V!==null;){if(V.key===fe)if(V.tag===4&&V.stateNode.containerInfo===j.containerInfo&&V.stateNode.implementation===j.implementation){a(k,V.sibling),Y=f(V,j.children||[]),Y.return=k,k=Y;break e}else{a(k,V);break}else i(k,V);V=V.sibling}Y=hd(j,k.mode,Y),Y.return=k,k=Y}return v(k);case I:return fe=j._init,j=fe(j._payload),Je(k,V,j,Y)}if(ct(j))return be(k,V,j,Y);if(U(j)){if(fe=U(j),typeof fe!="function")throw Error(r(150));return j=fe.call(j),Te(k,V,j,Y)}if(typeof j.then=="function")return Je(k,V,jc(j),Y);if(j.$$typeof===ne)return Je(k,V,Rc(k,j),Y);zc(k,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,V!==null&&V.tag===6?(a(k,V.sibling),Y=f(V,j),Y.return=k,k=Y):(a(k,V),Y=cd(j,k.mode,Y),Y.return=k,k=Y),v(k)):a(k,V)}return function(k,V,j,Y){try{Vl=0;var fe=Je(k,V,j,Y);return Ya=null,fe}catch(pe){if(pe===Sl||pe===Dc)throw pe;var Ne=dn(29,pe,null,k.mode);return Ne.lanes=Y,Ne.return=k,Ne}finally{}}}var Xa=sy(!0),ay=sy(!1),xn=W(null),ui=null;function vr(n){var i=n.alternate;ie(Nt,Nt.current&1),ie(xn,n),ui===null&&(i===null||Ha.current!==null||i.memoizedState!==null)&&(ui=n)}function oy(n){if(n.tag===22){if(ie(Nt,Nt.current),ie(xn,n),ui===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(ui=n)}}else Tr()}function Tr(){ie(Nt,Nt.current),ie(xn,xn.current)}function Fi(n){oe(xn),ui===n&&(ui=null),oe(Nt)}var Nt=W(0);function qc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Om(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Hd(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Gd={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=_n(),f=gr(l);f.payload=i,a!=null&&(f.callback=a),i=_r(n,f,l),i!==null&&(yn(i,n,l),Il(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=_n(),f=gr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=_r(n,f,l),i!==null&&(yn(i,n,l),Il(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=_n(),l=gr(a);l.tag=2,i!=null&&(l.callback=i),i=_r(n,l,a),i!==null&&(yn(i,n,a),Il(i,n,a))}};function ly(n,i,a,l,f,d,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!pl(a,l)||!pl(f,d):!0}function uy(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&Gd.enqueueReplaceState(i,i.state,null)}function Ls(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var Fc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function cy(n){Fc(n)}function hy(n){console.error(n)}function fy(n){Fc(n)}function Hc(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function dy(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Kd(n,i,a){return a=gr(a),a.tag=3,a.payload={element:null},a.callback=function(){Hc(n,i)},a}function my(n){return n=gr(n),n.tag=3,n}function py(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){dy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){dy(i,a,l),typeof f!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function RA(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Tl(i,a,f,!0),a=xn.current,a!==null){switch(a.tag){case 13:return ui===null?gm():a.alternate===null&&dt===0&&(dt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Ed?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),ym(n,l,f)),!1;case 22:return a.flags|=65536,l===Ed?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),ym(n,l,f)),!1}throw Error(r(435,a.tag))}return ym(n,l,f),gm(),!1}if(Fe)return i=xn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==md&&(n=Error(r(422),{cause:l}),vl(Rn(n,a)))):(l!==md&&(i=Error(r(423),{cause:l}),vl(Rn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Rn(l,a),f=Kd(n.stateNode,l,f),Ad(n,f),dt!==4&&(dt=2)),!1;var d=Error(r(520),{cause:l});if(d=Rn(d,a),jl===null?jl=[d]:jl.push(d),dt!==4&&(dt=2),i===null)return!0;l=Rn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Kd(a.stateNode,l,n),Ad(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(wr===null||!wr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=my(f),py(f,n,a,l),Ad(a,f),!1}a=a.return}while(a!==null);return!1}var gy=Error(r(461)),kt=!1;function Ft(n,i,a,l){i.child=n===null?ay(i,null,a,l):Xa(i,n.child,a,l)}function _y(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return Ms(i),l=Dd(n,i,a,v,d,f),E=Nd(),n!==null&&!kt?(xd(n,i,f),Hi(n,i,f)):(Fe&&E&&fd(i),i.flags|=1,Ft(n,i,l,f),i.child)}function yy(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!ud(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,vy(n,i,d,l,f)):(n=Sc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!em(n,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:pl,a(v,l)&&n.ref===i.ref)return Hi(n,i,f)}return i.flags|=1,n=Ui(d,l),n.ref=i.ref,n.return=i,i.child=n}function vy(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(pl(d,l)&&n.ref===i.ref)if(kt=!1,i.pendingProps=l=d,em(n,f))(n.flags&131072)!==0&&(kt=!0);else return i.lanes=n.lanes,Hi(n,i,f)}return Qd(n,i,a,l,f)}function Ty(n,i,a){var l=i.pendingProps,f=l.children,d=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,n!==null){for(f=i.child=n.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Ey(n,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Cc(i,d!==null?d.cachePool:null),d!==null?v_(i,d):wd(),oy(i);else return i.lanes=i.childLanes=536870912,Ey(n,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Cc(i,d.cachePool),v_(i,d),Tr(),i.memoizedState=null):(n!==null&&Cc(i,null),wd(),Tr());return Ft(n,i,f,a),i.child}function Ey(n,i,a,l){var f=Td();return f=f===null?null:{parent:Dt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&Cc(i,null),wd(),oy(i),n!==null&&Tl(n,i,l,!0),null}function Gc(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function Qd(n,i,a,l,f){return Ms(i),a=Dd(n,i,a,l,void 0,f),l=Nd(),n!==null&&!kt?(xd(n,i,f),Hi(n,i,f)):(Fe&&l&&fd(i),i.flags|=1,Ft(n,i,a,f),i.child)}function by(n,i,a,l,f,d){return Ms(i),i.updateQueue=null,a=E_(i,l,a,f),T_(n),l=Nd(),n!==null&&!kt?(xd(n,i,d),Hi(n,i,d)):(Fe&&l&&fd(i),i.flags|=1,Ft(n,i,a,d),i.child)}function Sy(n,i,a,l,f){if(Ms(i),i.stateNode===null){var d=Ba,v=a.contextType;typeof v=="object"&&v!==null&&(d=Xt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Gd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},bd(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Xt(v):Ba,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Hd(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Gd.enqueueReplaceState(d,d.state,null),Rl(i,l,d,f),wl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var E=i.memoizedProps,w=Ls(a,E);d.props=w;var z=d.context,Q=a.contextType;v=Ba,typeof Q=="object"&&Q!==null&&(v=Xt(Q));var $=a.getDerivedStateFromProps;Q=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||z!==v)&&uy(i,d,l,v),pr=!1;var q=i.memoizedState;d.state=q,Rl(i,l,d,f),wl(),z=i.memoizedState,E||q!==z||pr?(typeof $=="function"&&(Hd(i,a,$,l),z=i.memoizedState),(w=pr||ly(i,a,w,l,q,z,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=v,l=w):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Sd(n,i),v=i.memoizedProps,Q=Ls(a,v),d.props=Q,$=i.pendingProps,q=d.context,z=a.contextType,w=Ba,typeof z=="object"&&z!==null&&(w=Xt(z)),E=a.getDerivedStateFromProps,(z=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==$||q!==w)&&uy(i,d,l,w),pr=!1,q=i.memoizedState,d.state=q,Rl(i,l,d,f),wl();var F=i.memoizedState;v!==$||q!==F||pr||n!==null&&n.dependencies!==null&&wc(n.dependencies)?(typeof E=="function"&&(Hd(i,a,E,l),F=i.memoizedState),(Q=pr||ly(i,a,Q,l,q,F,w)||n!==null&&n.dependencies!==null&&wc(n.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,w),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,w)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=w,l=Q):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,Gc(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=Xa(i,n.child,null,f),i.child=Xa(i,null,a,f)):Ft(n,i,a,f),i.memoizedState=d.state,n=i.child):n=Hi(n,i,f),n}function Ay(n,i,a,l){return yl(),i.flags|=256,Ft(n,i,a,l),i.child}var Yd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(n){return{baseLanes:n,cachePool:h_()}}function $d(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Vn),n}function Iy(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=n!==null&&n.memoizedState===null?!1:(Nt.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(Fe){if(f?vr(i):Tr(),Fe){var E=ft,w;if(w=E){e:{for(w=E,E=li;w.nodeType!==8;){if(!E){E=null;break e}if(w=Hn(w.nextSibling),w===null){E=null;break e}}E=w}E!==null?(i.memoizedState={dehydrated:E,treeContext:Ns!==null?{id:Li,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},w=dn(18,null,null,0),w.stateNode=E,w.return=i,i.child=w,rn=i,ft=null,w=!0):w=!1}w||Os(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Om(E)?i.lanes=32:i.lanes=536870912,null;Fi(i)}return E=l.children,l=l.fallback,f?(Tr(),f=i.mode,E=Kc({mode:"hidden",children:E},f),l=Ds(l,f,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,f=i.child,f.memoizedState=Xd(a),f.childLanes=$d(n,v,a),i.memoizedState=Yd,l):(vr(i),Zd(i,E))}if(w=n.memoizedState,w!==null&&(E=w.dehydrated,E!==null)){if(d)i.flags&256?(vr(i),i.flags&=-257,i=Jd(n,i,a)):i.memoizedState!==null?(Tr(),i.child=n.child,i.flags|=128,i=null):(Tr(),f=l.fallback,E=i.mode,l=Kc({mode:"visible",children:l.children},E),f=Ds(f,E,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,Xa(i,n.child,null,a),l=i.child,l.memoizedState=Xd(a),l.childLanes=$d(n,v,a),i.memoizedState=Yd,i=f);else if(vr(i),Om(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var z=v.dgst;v=z,l=Error(r(419)),l.stack="",l.digest=v,vl({value:l,source:null,stack:null}),i=Jd(n,i,a)}else if(kt||Tl(n,i,a,!1),v=(a&n.childLanes)!==0,kt||v){if(v=it,v!==null&&(l=a&-a,l=(l&42)!==0?1:or(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==w.retryLane))throw w.retryLane=l,La(n,l),yn(v,n,l),gy;E.data==="$?"||gm(),i=Jd(n,i,a)}else E.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=w.treeContext,ft=Hn(E.nextSibling),rn=i,Fe=!0,Vs=null,li=!1,n!==null&&(Dn[Nn++]=Li,Dn[Nn++]=Bi,Dn[Nn++]=Ns,Li=n.id,Bi=n.overflow,Ns=i),i=Zd(i,l.children),i.flags|=4096);return i}return f?(Tr(),f=l.fallback,E=i.mode,w=n.child,z=w.sibling,l=Ui(w,{mode:"hidden",children:l.children}),l.subtreeFlags=w.subtreeFlags&65011712,z!==null?f=Ui(z,f):(f=Ds(f,E,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,E=n.child.memoizedState,E===null?E=Xd(a):(w=E.cachePool,w!==null?(z=Dt._currentValue,w=w.parent!==z?{parent:z,pool:z}:w):w=h_(),E={baseLanes:E.baseLanes|a,cachePool:w}),f.memoizedState=E,f.childLanes=$d(n,v,a),i.memoizedState=Yd,l):(vr(i),a=n.child,n=a.sibling,a=Ui(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=a,i.memoizedState=null,a)}function Zd(n,i){return i=Kc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Kc(n,i){return n=dn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Jd(n,i,a){return Xa(i,n.child,null,a),n=Zd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function wy(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),gd(n.return,i,a)}function Wd(n,i,a,l,f){var d=n.memoizedState;d===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=f)}function Ry(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;if(Ft(n,i,l.children,a),l=Nt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wy(n,a,i);else if(n.tag===19)wy(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(ie(Nt,l),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&qc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Wd(i,!1,f,a,d);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&qc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Wd(i,!0,a,null,d);break;case"together":Wd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Hi(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Ir|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Tl(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Ui(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Ui(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function em(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&wc(n)))}function CA(n,i,a){switch(i.tag){case 3:nt(i,i.stateNode.containerInfo),mr(i,Dt,n.memoizedState.cache),yl();break;case 27:case 5:ar(i);break;case 4:nt(i,i.stateNode.containerInfo);break;case 10:mr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(vr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Iy(n,i,a):(vr(i),n=Hi(n,i,a),n!==null?n.sibling:null);vr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Tl(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Ry(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ie(Nt,Nt.current),l)break;return null;case 22:case 23:return i.lanes=0,Ty(n,i,a);case 24:mr(i,Dt,n.memoizedState.cache)}return Hi(n,i,a)}function Cy(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)kt=!0;else{if(!em(n,a)&&(i.flags&128)===0)return kt=!1,CA(n,i,a);kt=(n.flags&131072)!==0}else kt=!1,Fe&&(i.flags&1048576)!==0&&r_(i,Ic,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")ud(l)?(n=Ls(l,n),i.tag=1,i=Sy(null,i,l,n,a)):(i.tag=0,i=Qd(null,i,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===J){i.tag=11,i=_y(null,i,l,n,a);break e}else if(f===x){i.tag=14,i=yy(null,i,l,n,a);break e}}throw i=jt(l)||l,Error(r(306,i,""))}}return i;case 0:return Qd(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ls(l,i.pendingProps),Sy(n,i,l,f,a);case 3:e:{if(nt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Sd(n,i),Rl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,mr(i,Dt,l),l!==d.cache&&_d(i,[Dt],a,!0),wl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ay(n,i,l,a);break e}else if(l!==f){f=Rn(Error(r(424)),i),vl(f),i=Ay(n,i,l,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ft=Hn(n.firstChild),rn=i,Fe=!0,Vs=null,li=!0,a=ay(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(yl(),l===f){i=Hi(n,i,a);break e}Ft(n,i,l,a)}i=i.child}return i;case 26:return Gc(n,i),n===null?(a=Vv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Fe||(a=i.type,n=i.pendingProps,l=ah(Ae.current).createElement(a),l[wt]=i,l[vt]=n,Gt(l,a,n),pt(l),i.stateNode=l):i.memoizedState=Vv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ar(i),n===null&&Fe&&(l=i.stateNode=Dv(i.type,i.pendingProps,Ae.current),rn=i,li=!0,f=ft,Dr(i.type)?(Pm=f,ft=Hn(l.firstChild)):ft=f),Ft(n,i,i.pendingProps.children,a),Gc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Fe&&((f=l=ft)&&(l=nI(l,i.type,i.pendingProps,li),l!==null?(i.stateNode=l,rn=i,ft=Hn(l.firstChild),li=!1,f=!0):f=!1),f||Os(i)),ar(i),f=i.type,d=i.pendingProps,v=n!==null?n.memoizedProps:null,l=d.children,Nm(f,d)?l=null:v!==null&&Nm(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Dd(n,i,TA,null,null,a),Xl._currentValue=f),Gc(n,i),Ft(n,i,l,a),i.child;case 6:return n===null&&Fe&&((n=a=ft)&&(a=iI(a,i.pendingProps,li),a!==null?(i.stateNode=a,rn=i,ft=null,n=!0):n=!1),n||Os(i)),null;case 13:return Iy(n,i,a);case 4:return nt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Xa(i,null,l,a):Ft(n,i,l,a),i.child;case 11:return _y(n,i,i.type,i.pendingProps,a);case 7:return Ft(n,i,i.pendingProps,a),i.child;case 8:return Ft(n,i,i.pendingProps.children,a),i.child;case 12:return Ft(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,mr(i,i.type,l.value),Ft(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Ms(i),f=Xt(f),l=l(f),i.flags|=1,Ft(n,i,l,a),i.child;case 14:return yy(n,i,i.type,i.pendingProps,a);case 15:return vy(n,i,i.type,i.pendingProps,a);case 19:return Ry(n,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},n===null?(a=Kc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ui(n.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Ty(n,i,a);case 24:return Ms(i),l=Xt(Dt),n===null?(f=Td(),f===null&&(f=it,d=yd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},bd(i),mr(i,Dt,f)):((n.lanes&a)!==0&&(Sd(n,i),Rl(i,null,null,a),wl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),mr(i,Dt,l)):(l=d.cache,mr(i,Dt,l),l!==f.cache&&_d(i,[Dt],a,!0))),Ft(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Gi(n){n.flags|=4}function Dy(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Uv(i)){if(i=xn.current,i!==null&&((Be&4194048)===Be?ui!==null:(Be&62914560)!==Be&&(Be&536870912)===0||i!==ui))throw Al=Ed,f_;n.flags|=8192}}function Qc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Zo():536870912,n.lanes|=i,Wa|=i)}function Pl(n,i){if(!Fe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function DA(n,i,a){var l=i.pendingProps;switch(dd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),zi(Dt),$n(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(_l(i)?Gi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,o_())),lt(i),null;case 26:return a=i.memoizedState,n===null?(Gi(i),a!==null?(lt(i),Dy(i,a)):(lt(i),i.flags&=-16777217)):a?a!==n.memoizedState?(Gi(i),lt(i),Dy(i,a)):(lt(i),i.flags&=-16777217):(n.memoizedProps!==l&&Gi(i),lt(i),i.flags&=-16777217),null;case 27:Ai(i),a=Ae.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Gi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return lt(i),null}n=ve.current,_l(i)?s_(i):(n=Dv(f,l,a),i.stateNode=n,Gi(i))}return lt(i),null;case 5:if(Ai(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Gi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return lt(i),null}if(n=ve.current,_l(i))s_(i);else{switch(f=ah(Ae.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[wt]=i,n[vt]=l;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(Gt(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Gi(i)}}return lt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Gi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ae.current,_l(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=rn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[wt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||bv(n.nodeValue,a)),n||Os(i)}else n=ah(n).createTextNode(l),n[wt]=i,i.stateNode=n}return lt(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=_l(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[wt]=i}else yl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),f=!1}else f=o_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Fi(i),i):(Fi(i),null)}if(Fi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),Qc(i,i.updateQueue),lt(i),null;case 4:return $n(),n===null&&Im(i.stateNode.containerInfo),lt(i),null;case 10:return zi(i.type),lt(i),null;case 19:if(oe(Nt),f=i.memoizedState,f===null)return lt(i),null;if(l=(i.flags&128)!==0,d=f.rendering,d===null)if(l)Pl(f,!1);else{if(dt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=qc(n),d!==null){for(i.flags|=128,Pl(f,!1),n=d.updateQueue,i.updateQueue=n,Qc(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)i_(a,n),a=a.sibling;return ie(Nt,Nt.current&1|2),i.child}n=n.sibling}f.tail!==null&&En()>$c&&(i.flags|=128,l=!0,Pl(f,!1),i.lanes=4194304)}else{if(!l)if(n=qc(d),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,Qc(i,n),Pl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!Fe)return lt(i),null}else 2*En()-f.renderingStartTime>$c&&a!==536870912&&(i.flags|=128,l=!0,Pl(f,!1),i.lanes=4194304);f.isBackwards?(d.sibling=i.child,i.child=d):(n=f.last,n!==null?n.sibling=d:i.child=d,f.last=d)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=En(),i.sibling=null,n=Nt.current,ie(Nt,l?n&1|2:n&1),i):(lt(i),null);case 22:case 23:return Fi(i),Rd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),a=i.updateQueue,a!==null&&Qc(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&oe(ks),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),zi(Dt),lt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function NA(n,i){switch(dd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return zi(Dt),$n(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ai(i),null;case 13:if(Fi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));yl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return oe(Nt),null;case 4:return $n(),null;case 10:return zi(i.type),null;case 22:case 23:return Fi(i),Rd(),n!==null&&oe(ks),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return zi(Dt),null;case 25:return null;default:return null}}function Ny(n,i){switch(dd(i),i.tag){case 3:zi(Dt),$n();break;case 26:case 27:case 5:Ai(i);break;case 4:$n();break;case 13:Fi(i);break;case 19:oe(Nt);break;case 10:zi(i.type);break;case 22:case 23:Fi(i),Rd(),n!==null&&oe(ks);break;case 24:zi(Dt)}}function Ml(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==f)}}catch(E){tt(i,i.return,E)}}function Er(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=i;var w=a,z=E;try{z()}catch(Q){tt(f,w,Q)}}}l=l.next}while(l!==d)}}catch(Q){tt(i,i.return,Q)}}function xy(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{y_(i,a)}catch(l){tt(n,n.return,l)}}}function Vy(n,i,a){a.props=Ls(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){tt(n,i,l)}}function kl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){tt(n,i,f)}}function ci(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){tt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){tt(n,i,f)}else a.current=null}function Oy(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){tt(n,n.return,f)}}function tm(n,i,a){try{var l=n.stateNode;ZA(l,n.type,a,i),l[vt]=i}catch(f){tt(n,n.return,f)}}function Py(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Dr(n.type)||n.tag===4}function nm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Py(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Dr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function im(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=sh));else if(l!==4&&(l===27&&Dr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(im(n,i,a),n=n.sibling;n!==null;)im(n,i,a),n=n.sibling}function Yc(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Dr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Yc(n,i,a),n=n.sibling;n!==null;)Yc(n,i,a),n=n.sibling}function My(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Gt(i,l,a),i[wt]=n,i[vt]=a}catch(d){tt(n,n.return,d)}}var Ki=!1,_t=!1,rm=!1,ky=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function xA(n,i){if(n=n.containerInfo,Cm=fh,n=Qg(n),nd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,E=-1,w=-1,z=0,Q=0,$=n,q=null;t:for(;;){for(var F;$!==a||f!==0&&$.nodeType!==3||(E=v+f),$!==d||l!==0&&$.nodeType!==3||(w=v+l),$.nodeType===3&&(v+=$.nodeValue.length),(F=$.firstChild)!==null;)q=$,$=F;for(;;){if($===n)break t;if(q===a&&++z===f&&(E=v),q===d&&++Q===l&&(w=v),(F=$.nextSibling)!==null)break;$=q,q=$.parentNode}$=F}a=E===-1||w===-1?null:{start:E,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dm={focusedElem:n,selectionRange:a},fh=!1,Ut=i;Ut!==null;)if(i=Ut,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Ut=n;else for(;Ut!==null;){switch(i=Ut,d=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var be=Ls(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(be,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Te){tt(a,a.return,Te)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Vm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Vm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ut=n;break}Ut=i.return}}function Uy(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:br(n,a),l&4&&Ml(5,a);break;case 1:if(br(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(v){tt(a,a.return,v)}else{var f=Ls(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){tt(a,a.return,v)}}l&64&&xy(a),l&512&&kl(a,a.return);break;case 3:if(br(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{y_(n,i)}catch(v){tt(a,a.return,v)}}break;case 27:i===null&&l&4&&My(a);case 26:case 5:br(n,a),i===null&&l&4&&Oy(a),l&512&&kl(a,a.return);break;case 12:br(n,a);break;case 13:br(n,a),l&4&&jy(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=jA.bind(null,a),rI(n,a))));break;case 22:if(l=a.memoizedState!==null||Ki,!l){i=i!==null&&i.memoizedState!==null||_t,f=Ki;var d=_t;Ki=l,(_t=i)&&!d?Sr(n,a,(a.subtreeFlags&8772)!==0):br(n,a),Ki=f,_t=d}break;case 30:break;default:br(n,a)}}function Ly(n){var i=n.alternate;i!==null&&(n.alternate=null,Ly(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&cr(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var st=null,ln=!1;function Qi(n,i,a){for(a=a.child;a!==null;)By(n,i,a),a=a.sibling}function By(n,i,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:_t||ci(a,i),Qi(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_t||ci(a,i);var l=st,f=ln;Dr(a.type)&&(st=a.stateNode,ln=!1),Qi(n,i,a),Gl(a.stateNode),st=l,ln=f;break;case 5:_t||ci(a,i);case 6:if(l=st,f=ln,st=null,Qi(n,i,a),st=l,ln=f,st!==null)if(ln)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(d){tt(a,i,d)}else try{st.removeChild(a.stateNode)}catch(d){tt(a,i,d)}break;case 18:st!==null&&(ln?(n=st,Rv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Wl(n)):Rv(st,a.stateNode));break;case 4:l=st,f=ln,st=a.stateNode.containerInfo,ln=!0,Qi(n,i,a),st=l,ln=f;break;case 0:case 11:case 14:case 15:_t||Er(2,a,i),_t||Er(4,a,i),Qi(n,i,a);break;case 1:_t||(ci(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Vy(a,i,l)),Qi(n,i,a);break;case 21:Qi(n,i,a);break;case 22:_t=(l=_t)||a.memoizedState!==null,Qi(n,i,a),_t=l;break;default:Qi(n,i,a)}}function jy(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Wl(n)}catch(a){tt(i,i.return,a)}}function VA(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new ky),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new ky),i;default:throw Error(r(435,n.tag))}}function sm(n,i){var a=VA(n);i.forEach(function(l){var f=zA.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function mn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(Dr(E.type)){st=E.stateNode,ln=!1;break e}break;case 5:st=E.stateNode,ln=!1;break e;case 3:case 4:st=E.stateNode.containerInfo,ln=!0;break e}E=E.return}if(st===null)throw Error(r(160));By(d,v,f),st=null,ln=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)zy(i,n),i=i.sibling}var Fn=null;function zy(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:mn(i,n),pn(n),l&4&&(Er(3,n,n.return),Ml(3,n),Er(5,n,n.return));break;case 1:mn(i,n),pn(n),l&512&&(_t||a===null||ci(a,a.return)),l&64&&Ki&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Fn;if(mn(i,n),pn(n),l&512&&(_t||a===null||ci(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[ds]||d[wt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Gt(d,l,a),d[wt]=n,pt(d),l=d;break e;case"link":var v=Mv("link","href",f).get(l+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}d=f.createElement(l),Gt(d,l,a),f.head.appendChild(d);break;case"meta":if(v=Mv("meta","content",f).get(l+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}d=f.createElement(l),Gt(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[wt]=n,pt(d),l=d}n.stateNode=l}else kv(f,n.type,n.stateNode);else n.stateNode=Pv(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?kv(f,n.type,n.stateNode):Pv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&tm(n,n.memoizedProps,a.memoizedProps)}break;case 27:mn(i,n),pn(n),l&512&&(_t||a===null||ci(a,a.return)),a!==null&&l&4&&tm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,n),pn(n),l&512&&(_t||a===null||ci(a,a.return)),n.flags&32){f=n.stateNode;try{Sn(f,"")}catch(F){tt(n,n.return,F)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,tm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(rm=!0);break;case 6:if(mn(i,n),pn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(F){tt(n,n.return,F)}}break;case 3:if(uh=null,f=Fn,Fn=oh(i.containerInfo),mn(i,n),Fn=f,pn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Wl(i.containerInfo)}catch(F){tt(n,n.return,F)}rm&&(rm=!1,qy(n));break;case 4:l=Fn,Fn=oh(n.stateNode.containerInfo),mn(i,n),pn(n),Fn=l;break;case 12:mn(i,n),pn(n);break;case 13:mn(i,n),pn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hm=En()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,sm(n,l)));break;case 22:f=n.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,z=Ki,Q=_t;if(Ki=z||f,_t=Q||w,mn(i,n),_t=Q,Ki=z,pn(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||w||Ki||_t||Bs(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(d=w.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=w.stateNode;var $=w.memoizedProps.style,q=$!=null&&$.hasOwnProperty("display")?$.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(F){tt(w,w.return,F)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=f?"":w.memoizedProps}catch(F){tt(w,w.return,F)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,sm(n,a))));break;case 19:mn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,sm(n,l)));break;case 30:break;case 21:break;default:mn(i,n),pn(n)}}function pn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(Py(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=nm(n);Yc(n,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(Sn(v,""),a.flags&=-33);var E=nm(n);Yc(n,E,v);break;case 3:case 4:var w=a.stateNode.containerInfo,z=nm(n);im(n,z,w);break;default:throw Error(r(161))}}catch(Q){tt(n,n.return,Q)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function qy(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;qy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function br(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Uy(n,i.alternate,i),i=i.sibling}function Bs(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Er(4,i,i.return),Bs(i);break;case 1:ci(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Vy(i,i.return,a),Bs(i);break;case 27:Gl(i.stateNode);case 26:case 5:ci(i,i.return),Bs(i);break;case 22:i.memoizedState===null&&Bs(i);break;case 30:Bs(i);break;default:Bs(i)}n=n.sibling}}function Sr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Sr(f,d,a),Ml(4,d);break;case 1:if(Sr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){tt(l,l.return,z)}if(l=d,f=l.updateQueue,f!==null){var E=l.stateNode;try{var w=f.shared.hiddenCallbacks;if(w!==null)for(f.shared.hiddenCallbacks=null,f=0;f<w.length;f++)__(w[f],E)}catch(z){tt(l,l.return,z)}}a&&v&64&&xy(d),kl(d,d.return);break;case 27:My(d);case 26:case 5:Sr(f,d,a),a&&l===null&&v&4&&Oy(d),kl(d,d.return);break;case 12:Sr(f,d,a);break;case 13:Sr(f,d,a),a&&v&4&&jy(f,d);break;case 22:d.memoizedState===null&&Sr(f,d,a),kl(d,d.return);break;case 30:break;default:Sr(f,d,a)}i=i.sibling}}function am(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&El(a))}function om(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&El(n))}function hi(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Fy(n,i,a,l),i=i.sibling}function Fy(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:hi(n,i,a,l),f&2048&&Ml(9,i);break;case 1:hi(n,i,a,l);break;case 3:hi(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&El(n)));break;case 12:if(f&2048){hi(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(w){tt(i,i.return,w)}}else hi(n,i,a,l);break;case 13:hi(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?hi(n,i,a,l):Ul(n,i):d._visibility&2?hi(n,i,a,l):(d._visibility|=2,$a(n,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&am(v,i);break;case 24:hi(n,i,a,l),f&2048&&om(i.alternate,i);break;default:hi(n,i,a,l)}}function $a(n,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=n,v=i,E=a,w=l,z=v.flags;switch(v.tag){case 0:case 11:case 15:$a(d,v,E,w,f),Ml(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?$a(d,v,E,w,f):Ul(d,v):(Q._visibility|=2,$a(d,v,E,w,f)),f&&z&2048&&am(v.alternate,v);break;case 24:$a(d,v,E,w,f),f&&z&2048&&om(v.alternate,v);break;default:$a(d,v,E,w,f)}i=i.sibling}}function Ul(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Ul(a,l),f&2048&&am(l.alternate,l);break;case 24:Ul(a,l),f&2048&&om(l.alternate,l);break;default:Ul(a,l)}i=i.sibling}}var Ll=8192;function Za(n){if(n.subtreeFlags&Ll)for(n=n.child;n!==null;)Hy(n),n=n.sibling}function Hy(n){switch(n.tag){case 26:Za(n),n.flags&Ll&&n.memoizedState!==null&&_I(Fn,n.memoizedState,n.memoizedProps);break;case 5:Za(n);break;case 3:case 4:var i=Fn;Fn=oh(n.stateNode.containerInfo),Za(n),Fn=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Ll,Ll=16777216,Za(n),Ll=i):Za(n));break;default:Za(n)}}function Gy(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Bl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ut=l,Qy(l,n)}Gy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ky(n),n=n.sibling}function Ky(n){switch(n.tag){case 0:case 11:case 15:Bl(n),n.flags&2048&&Er(9,n,n.return);break;case 3:Bl(n);break;case 12:Bl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Xc(n)):Bl(n);break;default:Bl(n)}}function Xc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ut=l,Qy(l,n)}Gy(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Er(8,i,i.return),Xc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Xc(i));break;default:Xc(i)}n=n.sibling}}function Qy(n,i){for(;Ut!==null;){var a=Ut;switch(a.tag){case 0:case 11:case 15:Er(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:El(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ut=l;else e:for(a=n;Ut!==null;){l=Ut;var f=l.sibling,d=l.return;if(Ly(l),l===a){Ut=null;break e}if(f!==null){f.return=d,Ut=f;break e}Ut=d}}}var OA={getCacheForType:function(n){var i=Xt(Dt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},PA=typeof WeakMap=="function"?WeakMap:Map,Ke=0,it=null,xe=null,Be=0,Qe=0,gn=null,Ar=!1,Ja=!1,lm=!1,Yi=0,dt=0,Ir=0,js=0,um=0,Vn=0,Wa=0,jl=null,un=null,cm=!1,hm=0,$c=1/0,Zc=null,wr=null,Ht=0,Rr=null,eo=null,to=0,fm=0,dm=null,Yy=null,zl=0,mm=null;function _n(){if((Ke&2)!==0&&Be!==0)return Be&-Be;if(K.T!==null){var n=qa;return n!==0?n:Em()}return lr()}function Xy(){Vn===0&&(Vn=(Be&536870912)===0||Fe?$o():536870912);var n=xn.current;return n!==null&&(n.flags|=32),Vn}function yn(n,i,a){(n===it&&(Qe===2||Qe===9)||n.cancelPendingCommit!==null)&&(no(n,0),Cr(n,Be,Vn,!1)),wi(n,a),((Ke&2)===0||n!==it)&&(n===it&&((Ke&2)===0&&(js|=a),dt===4&&Cr(n,Be,Vn,!1)),fi(n))}function $y(n,i,a){if((Ke&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&n.expiredLanes)===0||fs(n,i),f=l?UA(n,i):_m(n,i,!0),d=l;do{if(f===0){Ja&&!l&&Cr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!MA(a)){f=_m(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var E=n;f=jl;var w=E.current.memoizedState.isDehydrated;if(w&&(no(E,v).flags|=256),v=_m(E,v,!1),v!==2){if(lm&&!w){E.errorRecoveryDisabledLanes|=d,js|=d,f=4;break e}d=un,un=f,d!==null&&(un===null?un=d:un.push.apply(un,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){no(n,0),Cr(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Cr(l,i,Vn,!Ar);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=hm+300-En(),10<f)){if(Cr(l,i,Vn,!Ar),va(l,0,!0)!==0)break e;l.timeoutHandle=Iv(Zy.bind(null,l,a,un,Zc,cm,i,Vn,js,Wa,Ar,d,2,-0,0),f);break e}Zy(l,a,un,Zc,cm,i,Vn,js,Wa,Ar,d,0,-0,0)}}break}while(!0);fi(n)}function Zy(n,i,a,l,f,d,v,E,w,z,Q,$,q,F){if(n.timeoutHandle=-1,$=i.subtreeFlags,($&8192||($&16785408)===16785408)&&(Yl={stylesheets:null,count:0,unsuspend:gI},Hy(i),$=yI(),$!==null)){n.cancelPendingCommit=$(rv.bind(null,n,i,d,a,l,f,v,E,w,Q,1,q,F)),Cr(n,d,v,!z);return}rv(n,i,d,a,l,f,v,E,w)}function MA(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!fn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Cr(n,i,a,l){i&=~um,i&=~js,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-Yt(f),v=1<<d;l[d]=-1,f&=~v}a!==0&&Zn(n,a,i)}function Jc(){return(Ke&6)===0?(ql(0),!1):!0}function pm(){if(xe!==null){if(Qe===0)var n=xe.return;else n=xe,ji=Ps=null,Vd(n),Ya=null,Vl=0,n=xe;for(;n!==null;)Ny(n.alternate,n),n=n.return;xe=null}}function no(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,WA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),pm(),it=n,xe=a=Ui(n.current,null),Be=i,Qe=0,gn=null,Ar=!1,Ja=fs(n,i),lm=!1,Wa=Vn=um=js=Ir=dt=0,un=jl=null,cm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-Yt(l),d=1<<f;i|=n[f],l&=~d}return Yi=i,Tc(),a}function Jy(n,i){Ce=null,K.H=Bc,i===Sl||i===Dc?(i=p_(),Qe=3):i===f_?(i=p_(),Qe=4):Qe=i===gy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gn=i,xe===null&&(dt=1,Hc(n,Rn(i,n.current)))}function Wy(){var n=K.H;return K.H=Bc,n===null?Bc:n}function ev(){var n=K.A;return K.A=OA,n}function gm(){dt=4,Ar||(Be&4194048)!==Be&&xn.current!==null||(Ja=!0),(Ir&134217727)===0&&(js&134217727)===0||it===null||Cr(it,Be,Vn,!1)}function _m(n,i,a){var l=Ke;Ke|=2;var f=Wy(),d=ev();(it!==n||Be!==i)&&(Zc=null,no(n,i)),i=!1;var v=dt;e:do try{if(Qe!==0&&xe!==null){var E=xe,w=gn;switch(Qe){case 8:pm(),v=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(i=!0);var z=Qe;if(Qe=0,gn=null,io(n,E,w,z),a&&Ja){v=0;break e}break;default:z=Qe,Qe=0,gn=null,io(n,E,w,z)}}kA(),v=dt;break}catch(Q){Jy(n,Q)}while(!0);return i&&n.shellSuspendCounter++,ji=Ps=null,Ke=l,K.H=f,K.A=d,xe===null&&(it=null,Be=0,Tc()),v}function kA(){for(;xe!==null;)tv(xe)}function UA(n,i){var a=Ke;Ke|=2;var l=Wy(),f=ev();it!==n||Be!==i?(Zc=null,$c=En()+500,no(n,i)):Ja=fs(n,i);e:do try{if(Qe!==0&&xe!==null){i=xe;var d=gn;t:switch(Qe){case 1:Qe=0,gn=null,io(n,i,d,1);break;case 2:case 9:if(d_(d)){Qe=0,gn=null,nv(i);break}i=function(){Qe!==2&&Qe!==9||it!==n||(Qe=7),fi(n)},d.then(i,i);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:d_(d)?(Qe=0,gn=null,nv(i)):(Qe=0,gn=null,io(n,i,d,7));break;case 5:var v=null;switch(xe.tag){case 26:v=xe.memoizedState;case 5:case 27:var E=xe;if(!v||Uv(v)){Qe=0,gn=null;var w=E.sibling;if(w!==null)xe=w;else{var z=E.return;z!==null?(xe=z,Wc(z)):xe=null}break t}}Qe=0,gn=null,io(n,i,d,5);break;case 6:Qe=0,gn=null,io(n,i,d,6);break;case 8:pm(),dt=6;break e;default:throw Error(r(462))}}LA();break}catch(Q){Jy(n,Q)}while(!0);return ji=Ps=null,K.H=l,K.A=f,Ke=a,xe!==null?0:(it=null,Be=0,Tc(),dt)}function LA(){for(;xe!==null&&!Ko();)tv(xe)}function tv(n){var i=Cy(n.alternate,n,Yi);n.memoizedProps=n.pendingProps,i===null?Wc(n):xe=i}function nv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=by(a,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=by(a,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:Vd(i);default:Ny(a,i),i=xe=i_(i,Yi),i=Cy(a,i,Yi)}n.memoizedProps=n.pendingProps,i===null?Wc(n):xe=i}function io(n,i,a,l){ji=Ps=null,Vd(i),Ya=null,Vl=0;var f=i.return;try{if(RA(n,f,i,a,Be)){dt=1,Hc(n,Rn(a,n.current)),xe=null;return}}catch(d){if(f!==null)throw xe=f,d;dt=1,Hc(n,Rn(a,n.current)),xe=null;return}i.flags&32768?(Fe||l===1?n=!0:Ja||(Be&536870912)!==0?n=!1:(Ar=n=!0,(l===2||l===9||l===3||l===6)&&(l=xn.current,l!==null&&l.tag===13&&(l.flags|=16384))),iv(i,n)):Wc(i)}function Wc(n){var i=n;do{if((i.flags&32768)!==0){iv(i,Ar);return}n=i.return;var a=DA(i.alternate,i,Yi);if(a!==null){xe=a;return}if(i=i.sibling,i!==null){xe=i;return}xe=i=n}while(i!==null);dt===0&&(dt=5)}function iv(n,i){do{var a=NA(n.alternate,n);if(a!==null){a.flags&=32767,xe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){xe=n;return}xe=n=a}while(n!==null);dt=6,xe=null}function rv(n,i,a,l,f,d,v,E,w){n.cancelPendingCommit=null;do eh();while(Ht!==0);if((Ke&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=od,Jo(n,a,d,v,E,w),n===it&&(xe=it=null,Be=0),eo=i,Rr=n,to=a,fm=d,dm=f,Yy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,qA(ls,function(){return uv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,f=se.p,se.p=2,v=Ke,Ke|=4;try{xA(n,i,a)}finally{Ke=v,se.p=f,K.T=l}}Ht=1,sv(),av(),ov()}}function sv(){if(Ht===1){Ht=0;var n=Rr,i=eo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=se.p;se.p=2;var f=Ke;Ke|=4;try{zy(i,n);var d=Dm,v=Qg(n.containerInfo),E=d.focusedElem,w=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&Kg(E.ownerDocument.documentElement,E)){if(w!==null&&nd(E)){var z=w.start,Q=w.end;if(Q===void 0&&(Q=z),"selectionStart"in E)E.selectionStart=z,E.selectionEnd=Math.min(Q,E.value.length);else{var $=E.ownerDocument||document,q=$&&$.defaultView||window;if(q.getSelection){var F=q.getSelection(),be=E.textContent.length,Te=Math.min(w.start,be),Je=w.end===void 0?Te:Math.min(w.end,be);!F.extend&&Te>Je&&(v=Je,Je=Te,Te=v);var k=Gg(E,Te),V=Gg(E,Je);if(k&&V&&(F.rangeCount!==1||F.anchorNode!==k.node||F.anchorOffset!==k.offset||F.focusNode!==V.node||F.focusOffset!==V.offset)){var j=$.createRange();j.setStart(k.node,k.offset),F.removeAllRanges(),Te>Je?(F.addRange(j),F.extend(V.node,V.offset)):(j.setEnd(V.node,V.offset),F.addRange(j))}}}}for($=[],F=E;F=F.parentNode;)F.nodeType===1&&$.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<$.length;E++){var Y=$[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}fh=!!Cm,Dm=Cm=null}finally{Ke=f,se.p=l,K.T=a}}n.current=i,Ht=2}}function av(){if(Ht===2){Ht=0;var n=Rr,i=eo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=se.p;se.p=2;var f=Ke;Ke|=4;try{Uy(n,i.alternate,i)}finally{Ke=f,se.p=l,K.T=a}}Ht=3}}function ov(){if(Ht===4||Ht===3){Ht=0,Xu();var n=Rr,i=eo,a=to,l=Yy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ht=5:(Ht=0,eo=Rr=null,lv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(wr=null),Ta(a),i=i.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(ht,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,f=se.p,se.p=2,K.T=null;try{for(var d=n.onRecoverableError,v=0;v<l.length;v++){var E=l[v];d(E.value,{componentStack:E.stack})}}finally{K.T=i,se.p=f}}(to&3)!==0&&eh(),fi(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===mm?zl++:(zl=0,mm=n):zl=0,ql(0)}}function lv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,El(i)))}function eh(n){return sv(),av(),ov(),uv()}function uv(){if(Ht!==5)return!1;var n=Rr,i=fm;fm=0;var a=Ta(to),l=K.T,f=se.p;try{se.p=32>a?32:a,K.T=null,a=dm,dm=null;var d=Rr,v=to;if(Ht=0,eo=Rr=null,to=0,(Ke&6)!==0)throw Error(r(331));var E=Ke;if(Ke|=4,Ky(d.current),Fy(d,d.current,v,a),Ke=E,ql(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(ht,d)}catch{}return!0}finally{se.p=f,K.T=l,lv(n,i)}}function cv(n,i,a){i=Rn(a,i),i=Kd(n.stateNode,i,2),n=_r(n,i,2),n!==null&&(wi(n,2),fi(n))}function tt(n,i,a){if(n.tag===3)cv(n,n,a);else for(;i!==null;){if(i.tag===3){cv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(wr===null||!wr.has(l))){n=Rn(a,n),a=my(2),l=_r(i,a,2),l!==null&&(py(a,l,i,n),wi(l,2),fi(l));break}}i=i.return}}function ym(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new PA;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(lm=!0,f.add(a),n=BA.bind(null,n,i,a),i.then(n,n))}function BA(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,it===n&&(Be&a)===a&&(dt===4||dt===3&&(Be&62914560)===Be&&300>En()-hm?(Ke&2)===0&&no(n,0):um|=a,Wa===Be&&(Wa=0)),fi(n)}function hv(n,i){i===0&&(i=Zo()),n=La(n,i),n!==null&&(wi(n,i),fi(n))}function jA(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),hv(n,a)}function zA(n,i){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),hv(n,a)}function qA(n,i){return as(n,i)}var th=null,ro=null,vm=!1,nh=!1,Tm=!1,zs=0;function fi(n){n!==ro&&n.next===null&&(ro===null?th=ro=n:ro=ro.next=n),nh=!0,vm||(vm=!0,HA())}function ql(n,i){if(!Tm&&nh){Tm=!0;do for(var a=!1,l=th;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-Yt(42|n)+1)-1,d&=f&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,pv(l,d))}else d=Be,d=va(l,l===it?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||fs(l,d)||(a=!0,pv(l,d));l=l.next}while(a);Tm=!1}}function FA(){fv()}function fv(){nh=vm=!1;var n=0;zs!==0&&(JA()&&(n=zs),zs=0);for(var i=En(),a=null,l=th;l!==null;){var f=l.next,d=dv(l,i);d===0?(l.next=null,a===null?th=f:a.next=f,f===null&&(ro=a)):(a=l,(n!==0||(d&3)!==0)&&(nh=!0)),l=f}ql(n)}function dv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var v=31-Yt(d),E=1<<v,w=f[v];w===-1?((E&a)===0||(E&l)!==0)&&(f[v]=Xo(E,i)):w<=i&&(n.expiredLanes|=E),d&=~E}if(i=it,a=Be,a=va(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Qe===2||Qe===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&os(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||fs(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&os(l),Ta(a)){case 2:case 8:a=_a;break;case 32:a=ls;break;case 268435456:a=ya;break;default:a=ls}return l=mv.bind(null,n),a=as(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&os(l),n.callbackPriority=2,n.callbackNode=null,2}function mv(n,i){if(Ht!==0&&Ht!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(eh()&&n.callbackNode!==a)return null;var l=Be;return l=va(n,n===it?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:($y(n,l,i),dv(n,En()),n.callbackNode!=null&&n.callbackNode===a?mv.bind(null,n):null)}function pv(n,i){if(eh())return null;$y(n,i,!0)}function HA(){eI(function(){(Ke&6)!==0?as(Qo,FA):fv()})}function Em(){return zs===0&&(zs=$o()),zs}function gv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:wa(""+n)}function _v(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function GA(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=gv((f[vt]||null).action),v=l.submitter;v&&(i=(i=v[vt]||null)?gv(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new Ra("action","action",null,l,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(zs!==0){var w=v?_v(f,v):new FormData(f);zd(a,{pending:!0,data:w,method:f.method,action:d},null,w)}}else typeof d=="function"&&(E.preventDefault(),w=v?_v(f,v):new FormData(f),zd(a,{pending:!0,data:w,method:f.method,action:d},d,w))},currentTarget:f}]})}}for(var bm=0;bm<ad.length;bm++){var Sm=ad[bm],KA=Sm.toLowerCase(),QA=Sm[0].toUpperCase()+Sm.slice(1);qn(KA,"on"+QA)}qn($g,"onAnimationEnd"),qn(Zg,"onAnimationIteration"),qn(Jg,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(cA,"onTransitionRun"),qn(hA,"onTransitionStart"),qn(fA,"onTransitionCancel"),qn(Wg,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function yv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var E=l[v],w=E.instance,z=E.currentTarget;if(E=E.listener,w!==d&&f.isPropagationStopped())break e;d=E,f.currentTarget=z;try{d(f)}catch(Q){Fc(Q)}f.currentTarget=null,d=w}else for(v=0;v<l.length;v++){if(E=l[v],w=E.instance,z=E.currentTarget,E=E.listener,w!==d&&f.isPropagationStopped())break e;d=E,f.currentTarget=z;try{d(f)}catch(Q){Fc(Q)}f.currentTarget=null,d=w}}}}function Ve(n,i){var a=i[el];a===void 0&&(a=i[el]=new Set);var l=n+"__bubble";a.has(l)||(vv(i,n,2,!1),a.add(l))}function Am(n,i,a){var l=0;i&&(l|=4),vv(a,n,l,i)}var ih="_reactListening"+Math.random().toString(36).slice(2);function Im(n){if(!n[ih]){n[ih]=!0,tl.forEach(function(a){a!=="selectionchange"&&(YA.has(a)||Am(a,!1,n),Am(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ih]||(i[ih]=!0,Am("selectionchange",!1,i))}}function vv(n,i,a,l){switch(Fv(i)){case 2:var f=EI;break;case 8:f=bI;break;default:f=Bm}a=f.bind(null,i,a,n),f=void 0,!In||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function wm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=l.return;v!==null;){var w=v.tag;if((w===3||w===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=Ri(E),v===null)return;if(w=v.tag,w===5||w===6||w===26||w===27){l=d=v;continue e}E=E.parentNode}}l=l.return}sc(function(){var z=d,Q=An(a),$=[];e:{var q=e_.get(n);if(q!==void 0){var F=Ra,be=n;switch(n){case"keypress":if(ii(a)===0)break e;case"keydown":case"keyup":F=Oa;break;case"focusin":be="focus",F=Na;break;case"focusout":be="blur",F=Na;break;case"beforeblur":case"afterblur":F=Na;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Jf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=dc;break;case $g:case Zg:case Jg:F=xa;break;case Wg:F=pc;break;case"scroll":case"scrollend":F=ac;break;case"wheel":F=Pa;break;case"copy":case"cut":case"paste":F=Va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=dl;break;case"toggle":case"beforetoggle":F=_c}var Te=(i&4)!==0,Je=!Te&&(n==="scroll"||n==="scrollend"),k=Te?q!==null?q+"Capture":null:q;Te=[];for(var V=z,j;V!==null;){var Y=V;if(j=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||j===null||k===null||(Y=Ts(V,k),Y!=null&&Te.push(Hl(V,Y,j))),Je)break;V=V.return}0<Te.length&&(q=new F(q,be,null,a,Q),$.push({event:q,listeners:Te}))}}if((i&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",q&&a!==xi&&(be=a.relatedTarget||a.fromElement)&&(Ri(be)||be[bn]))break e;if((F||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,F?(be=a.relatedTarget||a.toElement,F=z,be=be?Ri(be):null,be!==null&&(Je=u(be),Te=be.tag,be!==Je||Te!==5&&Te!==27&&Te!==6)&&(be=null)):(F=null,be=z),F!==be)){if(Te=wn,Y="onMouseLeave",k="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Te=dl,Y="onPointerLeave",k="onPointerEnter",V="pointer"),Je=F==null?q:Wn(F),j=be==null?q:Wn(be),q=new Te(Y,V+"leave",F,a,Q),q.target=Je,q.relatedTarget=j,Y=null,Ri(Q)===z&&(Te=new Te(k,V+"enter",be,a,Q),Te.target=j,Te.relatedTarget=Je,Y=Te),Je=Y,F&&be)t:{for(Te=F,k=be,V=0,j=Te;j;j=so(j))V++;for(j=0,Y=k;Y;Y=so(Y))j++;for(;0<V-j;)Te=so(Te),V--;for(;0<j-V;)k=so(k),j--;for(;V--;){if(Te===k||k!==null&&Te===k.alternate)break t;Te=so(Te),k=so(k)}Te=null}else Te=null;F!==null&&Tv($,q,F,Te,!1),be!==null&&Je!==null&&Tv($,Je,be,Te,!0)}}e:{if(q=z?Wn(z):window,F=q.nodeName&&q.nodeName.toLowerCase(),F==="select"||F==="input"&&q.type==="file")var fe=Bg;else if(Ct(q))if(jg)fe=oA;else{fe=sA;var Ne=rA}else F=q.nodeName,!F||F.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?z&&al(z.elementType)&&(fe=Bg):fe=aA;if(fe&&(fe=fe(n,z))){ki($,fe,a,Q);break e}Ne&&Ne(n,q,z),n==="focusout"&&z&&q.type==="number"&&z.memoizedProps.value!=null&&fr(q,"number",q.value)}switch(Ne=z?Wn(z):window,n){case"focusin":(Ct(Ne)||Ne.contentEditable==="true")&&(Ma=Ne,id=z,gl=null);break;case"focusout":gl=id=Ma=null;break;case"mousedown":rd=!0;break;case"contextmenu":case"mouseup":case"dragend":rd=!1,Yg($,a,Q);break;case"selectionchange":if(uA)break;case"keydown":case"keyup":Yg($,a,Q)}var pe;if(ai)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ue?G(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(y&&a.locale!=="ko"&&(Ue||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ue&&(pe=ll()):(ni=Q,dr="value"in ni?ni.value:ni.textContent,Ue=!0)),Ne=rh(z,Ee),0<Ne.length&&(Ee=new hl(Ee,n,null,a,Q),$.push({event:Ee,listeners:Ne}),pe?Ee.data=pe:(pe=re(a),pe!==null&&(Ee.data=pe)))),(pe=g?Rt(n,a):Le(n,a))&&(Ee=rh(z,"onBeforeInput"),0<Ee.length&&(Ne=new hl("onBeforeInput","beforeinput",null,a,Q),$.push({event:Ne,listeners:Ee}),Ne.data=pe)),GA($,n,z,a,Q)}yv($,i)})}function Hl(n,i,a){return{instance:n,listener:i,currentTarget:a}}function rh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Ts(n,a),f!=null&&l.unshift(Hl(n,f,d)),f=Ts(n,i),f!=null&&l.push(Hl(n,f,d))),n.tag===3)return l;n=n.return}return[]}function so(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Tv(n,i,a,l,f){for(var d=i._reactName,v=[];a!==null&&a!==l;){var E=a,w=E.alternate,z=E.stateNode;if(E=E.tag,w!==null&&w===l)break;E!==5&&E!==26&&E!==27||z===null||(w=z,f?(z=Ts(a,d),z!=null&&v.unshift(Hl(a,z,w))):f||(z=Ts(a,d),z!=null&&v.push(Hl(a,z,w)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var XA=/\r\n?/g,$A=/\u0000|\uFFFD/g;function Ev(n){return(typeof n=="string"?n:""+n).replace(XA,`
`).replace($A,"")}function bv(n,i){return i=Ev(i),Ev(n)===i}function sh(){}function Ze(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Sn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Sn(n,""+l);break;case"className":ei(n,"class",l);break;case"tabIndex":ei(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ei(n,a,l);break;case"style":sl(n,l,d);break;case"data":if(i!=="object"){ei(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=wa(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Ze(n,i,"name",f.name,f,null),Ze(n,i,"formEncType",f.formEncType,f,null),Ze(n,i,"formMethod",f.formMethod,f,null),Ze(n,i,"formTarget",f.formTarget,f,null)):(Ze(n,i,"encType",f.encType,f,null),Ze(n,i,"method",f.method,f,null),Ze(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=wa(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=sh);break;case"onScroll":l!=null&&Ve("scroll",n);break;case"onScrollEnd":l!=null&&Ve("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=wa(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ve("beforetoggle",n),Ve("toggle",n),hr(n,"popover",l);break;case"xlinkActuate":zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":hr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=$f.get(a)||a,hr(n,a,l))}}function Rm(n,i,a,l,f,d){switch(a){case"style":sl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Sn(n,l):(typeof l=="number"||typeof l=="bigint")&&Sn(n,""+l);break;case"onScroll":l!=null&&Ve("scroll",n);break;case"onScrollEnd":l!=null&&Ve("scrollend",n);break;case"onClick":l!=null&&(n.onclick=sh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ea.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[vt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):hr(n,a,l)}}}function Gt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",n),Ve("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ze(n,i,d,v,a,null)}}f&&Ze(n,i,"srcSet",a.srcSet,a,null),l&&Ze(n,i,"src",a.src,a,null);return;case"input":Ve("invalid",n);var E=d=v=f=null,w=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":v=Q;break;case"checked":w=Q;break;case"defaultChecked":z=Q;break;case"value":d=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:Ze(n,i,l,Q,a,null)}}_s(n,d,E,w,z,v,f,!1),Ia(n);return;case"select":Ve("invalid",n),l=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:Ze(n,i,f,E,a,null)}i=d,a=v,n.multiple=!!l,i!=null?Ni(n,!!l,i,!1):a!=null&&Ni(n,!!l,a,!0);return;case"textarea":Ve("invalid",n),d=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":f=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Ze(n,i,v,E,a,null)}ys(n,l,f,d),Ia(n);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(l=a[w],l!=null))switch(w){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(n,i,w,l,a,null)}return;case"dialog":Ve("beforetoggle",n),Ve("toggle",n),Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":Ve("load",n);break;case"video":case"audio":for(l=0;l<Fl.length;l++)Ve(Fl[l],n);break;case"image":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"embed":case"source":case"link":Ve("error",n),Ve("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ze(n,i,z,l,a,null)}return;default:if(al(i)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Rm(n,i,Q,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Ze(n,i,E,l,a,null))}function ZA(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,E=null,w=null,z=null,Q=null;for(F in a){var $=a[F];if(a.hasOwnProperty(F)&&$!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":w=$;default:l.hasOwnProperty(F)||Ze(n,i,F,null,l,$)}}for(var q in l){var F=l[q];if($=a[q],l.hasOwnProperty(q)&&(F!=null||$!=null))switch(q){case"type":d=F;break;case"name":f=F;break;case"checked":z=F;break;case"defaultChecked":Q=F;break;case"value":v=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==$&&Ze(n,i,q,F,l,$)}}hn(n,v,E,w,z,Q,d,f);return;case"select":F=v=E=q=null;for(d in a)if(w=a[d],a.hasOwnProperty(d)&&w!=null)switch(d){case"value":break;case"multiple":F=w;default:l.hasOwnProperty(d)||Ze(n,i,d,null,l,w)}for(f in l)if(d=l[f],w=a[f],l.hasOwnProperty(f)&&(d!=null||w!=null))switch(f){case"value":q=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==w&&Ze(n,i,f,d,l,w)}i=E,a=v,l=F,q!=null?Ni(n,!!a,q,!1):!!l!=!!a&&(i!=null?Ni(n,!!a,i,!0):Ni(n,!!a,a?[]:"",!1));return;case"textarea":F=q=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ze(n,i,E,null,l,f)}for(v in l)if(f=l[v],d=a[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":q=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&Ze(n,i,v,f,l,d)}Xe(n,q,F);return;case"option":for(var be in a)if(q=a[be],a.hasOwnProperty(be)&&q!=null&&!l.hasOwnProperty(be))switch(be){case"selected":n.selected=!1;break;default:Ze(n,i,be,null,l,q)}for(w in l)if(q=l[w],F=a[w],l.hasOwnProperty(w)&&q!==F&&(q!=null||F!=null))switch(w){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Ze(n,i,w,q,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)q=a[Te],a.hasOwnProperty(Te)&&q!=null&&!l.hasOwnProperty(Te)&&Ze(n,i,Te,null,l,q);for(z in l)if(q=l[z],F=a[z],l.hasOwnProperty(z)&&q!==F&&(q!=null||F!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:Ze(n,i,z,q,l,F)}return;default:if(al(i)){for(var Je in a)q=a[Je],a.hasOwnProperty(Je)&&q!==void 0&&!l.hasOwnProperty(Je)&&Rm(n,i,Je,void 0,l,q);for(Q in l)q=l[Q],F=a[Q],!l.hasOwnProperty(Q)||q===F||q===void 0&&F===void 0||Rm(n,i,Q,q,l,F);return}}for(var k in a)q=a[k],a.hasOwnProperty(k)&&q!=null&&!l.hasOwnProperty(k)&&Ze(n,i,k,null,l,q);for($ in l)q=l[$],F=a[$],!l.hasOwnProperty($)||q===F||q==null&&F==null||Ze(n,i,$,q,l,F)}var Cm=null,Dm=null;function ah(n){return n.nodeType===9?n:n.ownerDocument}function Sv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Av(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Nm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var xm=null;function JA(){var n=window.event;return n&&n.type==="popstate"?n===xm?!1:(xm=n,!0):(xm=null,!1)}var Iv=typeof setTimeout=="function"?setTimeout:void 0,WA=typeof clearTimeout=="function"?clearTimeout:void 0,wv=typeof Promise=="function"?Promise:void 0,eI=typeof queueMicrotask=="function"?queueMicrotask:typeof wv<"u"?function(n){return wv.resolve(null).then(n).catch(tI)}:Iv;function tI(n){setTimeout(function(){throw n})}function Dr(n){return n==="head"}function Rv(n,i){var a=i,l=0,f=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=n.ownerDocument;if(a&1&&Gl(v.documentElement),a&2&&Gl(v.body),a&4)for(a=v.head,Gl(a),v=a.firstChild;v;){var E=v.nextSibling,w=v.nodeName;v[ds]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(f===0){n.removeChild(d),Wl(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Wl(i)}function Vm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vm(a),cr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function nI(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[ds])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Hn(n.nextSibling),n===null)break}return null}function iI(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Hn(n.nextSibling),n===null))return null;return n}function Om(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function rI(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Hn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Pm=null;function Cv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function Dv(n,i,a){switch(i=ah(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Gl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);cr(n)}var On=new Map,Nv=new Set;function oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Xi=se.d;se.d={f:sI,r:aI,D:oI,C:lI,L:uI,m:cI,X:fI,S:hI,M:dI};function sI(){var n=Xi.f(),i=Jc();return n||i}function aI(n){var i=Jn(n);i!==null&&i.tag===5&&i.type==="form"?$_(i):Xi.r(n)}var ao=typeof document>"u"?null:document;function xv(n,i,a){var l=ao;if(l&&typeof i=="string"&&i){var f=Tt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Nv.has(f)||(Nv.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Gt(i,"link",n),pt(i),l.head.appendChild(i)))}}function oI(n){Xi.D(n),xv("dns-prefetch",n,null)}function lI(n,i){Xi.C(n,i),xv("preconnect",n,i)}function uI(n,i,a){Xi.L(n,i,a);var l=ao;if(l&&n&&i){var f='link[rel="preload"][as="'+Tt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Tt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Tt(a.imageSizes)+'"]')):f+='[href="'+Tt(n)+'"]';var d=f;switch(i){case"style":d=oo(n);break;case"script":d=lo(n)}On.has(d)||(n=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),On.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(Kl(d))||i==="script"&&l.querySelector(Ql(d))||(i=l.createElement("link"),Gt(i,"link",n),pt(i),l.head.appendChild(i)))}}function cI(n,i){Xi.m(n,i);var a=ao;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=lo(n)}if(!On.has(d)&&(n=T({rel:"modulepreload",href:n},i),On.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ql(d)))return}l=a.createElement("link"),Gt(l,"link",n),pt(l),a.head.appendChild(l)}}}function hI(n,i,a){Xi.S(n,i,a);var l=ao;if(l&&n){var f=en(l).hoistableStyles,d=oo(n);i=i||"default";var v=f.get(d);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(Kl(d)))E.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":i},a),(a=On.get(d))&&Mm(n,a);var w=v=l.createElement("link");pt(w),Gt(w,"link",n),w._p=new Promise(function(z,Q){w.onload=z,w.onerror=Q}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,lh(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(d,v)}}}function fI(n,i){Xi.X(n,i);var a=ao;if(a&&n){var l=en(a).hoistableScripts,f=lo(n),d=l.get(f);d||(d=a.querySelector(Ql(f)),d||(n=T({src:n,async:!0},i),(i=On.get(f))&&km(n,i),d=a.createElement("script"),pt(d),Gt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function dI(n,i){Xi.M(n,i);var a=ao;if(a&&n){var l=en(a).hoistableScripts,f=lo(n),d=l.get(f);d||(d=a.querySelector(Ql(f)),d||(n=T({src:n,async:!0,type:"module"},i),(i=On.get(f))&&km(n,i),d=a.createElement("script"),pt(d),Gt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Vv(n,i,a,l){var f=(f=Ae.current)?oh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=oo(a.href),a=en(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=oo(a.href);var d=en(f).hoistableStyles,v=d.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,v),(d=f.querySelector(Kl(n)))&&!d._p&&(v.instance=d,v.state.loading=5),On.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(n,a),d||mI(f,n,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=lo(a),a=en(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function oo(n){return'href="'+Tt(n)+'"'}function Kl(n){return'link[rel="stylesheet"]['+n+"]"}function Ov(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function mI(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Gt(i,"link",a),pt(i),n.head.appendChild(i))}function lo(n){return'[src="'+Tt(n)+'"]'}function Ql(n){return"script[async]"+n}function Pv(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+Tt(a.href)+'"]');if(l)return i.instance=l,pt(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),pt(l),Gt(l,"style",f),lh(l,a.precedence,n),i.instance=l;case"stylesheet":f=oo(a.href);var d=n.querySelector(Kl(f));if(d)return i.state.loading|=4,i.instance=d,pt(d),d;l=Ov(a),(f=On.get(f))&&Mm(l,f),d=(n.ownerDocument||n).createElement("link"),pt(d);var v=d;return v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Gt(d,"link",l),i.state.loading|=4,lh(d,a.precedence,n),i.instance=d;case"script":return d=lo(a.src),(f=n.querySelector(Ql(d)))?(i.instance=f,pt(f),f):(l=a,(f=On.get(d))&&(l=T({},a),km(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),pt(f),Gt(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,lh(l,a.precedence,n));return i.instance}function lh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===i)d=E;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Mm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function km(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var uh=null;function Mv(n,i,a){if(uh===null){var l=new Map,f=uh=new Map;f.set(a,l)}else f=uh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[ds]||d[wt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=n+v;var E=l.get(v);E?E.push(d):l.set(v,[d])}}return l}function kv(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function pI(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Uv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Yl=null;function gI(){}function _I(n,i,a){if(Yl===null)throw Error(r(475));var l=Yl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=oo(a.href),d=n.querySelector(Kl(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=ch.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=d,pt(d);return}d=n.ownerDocument||n,a=Ov(a),(f=On.get(f))&&Mm(a,f),d=d.createElement("link"),pt(d);var v=d;v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Gt(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=ch.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function yI(){if(Yl===null)throw Error(r(475));var n=Yl;return n.stylesheets&&n.count===0&&Um(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&Um(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function ch(){if(this.count--,this.count===0){if(this.stylesheets)Um(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var hh=null;function Um(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,hh=new Map,i.forEach(vI,n),hh=null,ch.call(n))}function vI(n,i){if(!(i.state.loading&4)){var a=hh.get(n);if(a)var l=a.get(null);else{a=new Map,hh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=i.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,f),a.set(v,f),this.count++,l=ch.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Xl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function TI(n,i,a,l,f,d,v,E){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Lv(n,i,a,l,f,d,v,E,w,z,Q,$){return n=new TI(n,i,a,v,E,w,z,$),i=1,d===!0&&(i|=24),d=dn(3,null,null,i),n.current=d,d.stateNode=n,i=yd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},bd(d),n}function Bv(n){return n?(n=Ba,n):Ba}function jv(n,i,a,l,f,d){f=Bv(f),l.context===null?l.context=f:l.pendingContext=f,l=gr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=_r(n,l,i),a!==null&&(yn(a,n,i),Il(a,n,i))}function zv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Lm(n,i){zv(n,i),(n=n.alternate)&&zv(n,i)}function qv(n){if(n.tag===13){var i=La(n,67108864);i!==null&&yn(i,n,67108864),Lm(n,67108864)}}var fh=!0;function EI(n,i,a,l){var f=K.T;K.T=null;var d=se.p;try{se.p=2,Bm(n,i,a,l)}finally{se.p=d,K.T=f}}function bI(n,i,a,l){var f=K.T;K.T=null;var d=se.p;try{se.p=8,Bm(n,i,a,l)}finally{se.p=d,K.T=f}}function Bm(n,i,a,l){if(fh){var f=jm(l);if(f===null)wm(n,i,l,dh,a),Hv(n,l);else if(AI(f,n,i,a,l))l.stopPropagation();else if(Hv(n,l),i&4&&-1<SI.indexOf(n)){for(;f!==null;){var d=Jn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Bn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var w=1<<31-Yt(v);E.entanglements[1]|=w,v&=~w}fi(d),(Ke&6)===0&&($c=En()+500,ql(0))}}break;case 13:E=La(d,2),E!==null&&yn(E,d,2),Jc(),Lm(d,2)}if(d=jm(l),d===null&&wm(n,i,l,dh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else wm(n,i,l,null,a)}}function jm(n){return n=An(n),zm(n)}var dh=null;function zm(n){if(dh=null,n=Ri(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=h(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return dh=n,null}function Fv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hf()){case Qo:return 2;case _a:return 8;case ls:case Gf:return 32;case ya:return 268435456;default:return 32}default:return 32}}var qm=!1,Nr=null,xr=null,Vr=null,$l=new Map,Zl=new Map,Or=[],SI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hv(n,i){switch(n){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":$l.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(i.pointerId)}}function Jl(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Jn(i),i!==null&&qv(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function AI(n,i,a,l,f){switch(i){case"focusin":return Nr=Jl(Nr,n,i,a,l,f),!0;case"dragenter":return xr=Jl(xr,n,i,a,l,f),!0;case"mouseover":return Vr=Jl(Vr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return $l.set(d,Jl($l.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Zl.set(d,Jl(Zl.get(d)||null,n,i,a,l,f)),!0}return!1}function Gv(n){var i=Ri(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){n.blockedOn=i,Ju(n.priority,function(){if(a.tag===13){var l=_n();l=or(l);var f=La(a,l);f!==null&&yn(f,a,l),Lm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=jm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);xi=l,a.target.dispatchEvent(l),xi=null}else return i=Jn(a),i!==null&&qv(i),n.blockedOn=a,!1;i.shift()}return!0}function Kv(n,i,a){mh(n)&&a.delete(i)}function II(){qm=!1,Nr!==null&&mh(Nr)&&(Nr=null),xr!==null&&mh(xr)&&(xr=null),Vr!==null&&mh(Vr)&&(Vr=null),$l.forEach(Kv),Zl.forEach(Kv)}function ph(n,i){n.blockedOn===i&&(n.blockedOn=null,qm||(qm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,II)))}var gh=null;function Qv(n){gh!==n&&(gh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){gh===n&&(gh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(zm(l||a)===null)continue;break}var d=Jn(a);d!==null&&(n.splice(i,3),i-=3,zd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Wl(n){function i(w){return ph(w,n)}Nr!==null&&ph(Nr,n),xr!==null&&ph(xr,n),Vr!==null&&ph(Vr,n),$l.forEach(i),Zl.forEach(i);for(var a=0;a<Or.length;a++){var l=Or[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Or.length&&(a=Or[0],a.blockedOn===null);)Gv(a),a.blockedOn===null&&Or.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],v=f[vt]||null;if(typeof d=="function")v||Qv(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[vt]||null)E=v.formAction;else if(zm(f)!==null)continue}else E=v.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),Qv(a)}}}function Fm(n){this._internalRoot=n}_h.prototype.render=Fm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=_n();jv(a,l,n,i,null,null)},_h.prototype.unmount=Fm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;jv(n.current,2,null,n,null,null),Jc(),i[bn]=null}};function _h(n){this._internalRoot=n}_h.prototype.unstable_scheduleHydration=function(n){if(n){var i=lr();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Or.length&&i!==0&&i<Or[a].priority;a++);Or.splice(a,0,n),a===0&&Gv(n)}};var Yv=e.version;if(Yv!=="19.1.1")throw Error(r(527,Yv,"19.1.1"));se.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var wI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{ht=yh.inject(wI),Ge=yh}catch{}}return tu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=cy,d=hy,v=fy,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=Lv(n,1,!1,null,null,a,l,f,d,v,E,null),n[bn]=i.current,Im(n),new Fm(i)},tu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=cy,v=hy,E=fy,w=null,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks),a.formState!==void 0&&(z=a.formState)),i=Lv(n,1,!0,i,a??null,l,f,d,v,E,w,z),i.context=Bv(null),a=i.current,l=_n(),l=or(l),f=gr(l),f.callback=null,_r(a,f,l),a=l,i.current.lanes=a,wi(i,a),fi(i),n[bn]=i.current,Im(n),new _h(i)},tu.version="19.1.1",tu}var rT;function kI(){if(rT)return Km.exports;rT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Km.exports=MI(),Km.exports}var UI=kI();const LI=()=>{};var sT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},BI=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],h=s[t++],m=s[t++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=s[t++],h=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},a0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,p=o+2<s.length,_=p?s[o+2]:0,T=u>>2,S=(u&3)<<4|m>>4;let A=(m&15)<<2|_>>6,P=_&63;p||(P=64,h||(A=64)),r.push(t[T],t[S],t[A],t[P])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(s0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):BI(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const _=o<s.length?t[s.charAt(o)]:64;++o;const S=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||_==null||S==null)throw new jI;const A=u<<2|m>>4;if(r.push(A),_!==64){const P=m<<4&240|_>>2;if(r.push(P),S!==64){const H=_<<6&192|S;r.push(H)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class jI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zI=function(s){const e=s0(s);return a0.encodeByteArray(e,!0)},Hh=function(s){return zI(s).replace(/\./g,"")},o0=function(s){try{return a0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=()=>l0().__FIREBASE_DEFAULTS__,FI=()=>{if(typeof process>"u"||typeof sT>"u")return;const s=sT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},HI=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&o0(s[1]);return e&&JSON.parse(e)},Ef=()=>{try{return LI()||qI()||FI()||HI()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},u0=s=>Ef()?.emulatorHosts?.[s],c0=s=>{const e=u0(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},h0=()=>Ef()?.config,f0=s=>Ef()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gp(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Hh(JSON.stringify(t)),Hh(JSON.stringify(h)),""].join(".")}const fu={};function KI(){const s={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?s.emulator.push(e):s.prod.push(e);return s}function QI(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let aT=!1;function Kp(s,e){if(typeof window>"u"||typeof document>"u"||!da(window.location.host)||fu[s]===e||fu[s]||aT)return;fu[s]=e;function t(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=KI().prod.length>0;function h(){const A=document.getElementById(r);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,P){A.setAttribute("width","24"),A.setAttribute("id",P),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function _(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{aT=!0,h()},A}function T(A,P){A.setAttribute("id",P),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){const A=QI(r),P=t("text"),H=document.getElementById(P)||document.createElement("span"),ee=t("learnmore"),X=document.getElementById(ee)||document.createElement("a"),ce=t("preprendIcon"),ue=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ne=A.element;m(ne),T(X,ee);const J=_();p(ue,ce),ne.append(ue,H,X,J),document.body.appendChild(ne)}u?(H.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function m0(){const s=Ef()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $I(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function ZI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JI(){const s=xt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function p0(){return!m0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function g0(){return!m0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function _0(){try{return typeof indexedDB=="object"}catch{return!1}}function WI(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="FirebaseError";class bi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=e1,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ku.prototype.create)}}class ku{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?t1(u,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new bi(o,m,r)}}function t1(s,e){return s.replace(n1,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const n1=/\{\$([^}]+)}/g;function i1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function na(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const u=s[o],h=e[o];if(oT(u)&&oT(h)){if(!na(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function oT(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function r1(s,e){const t=new s1(s,e);return t.subscribe.bind(t)}class s1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");a1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=$m),o.error===void 0&&(o.error=$m),o.complete===void 0&&(o.complete=$m);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a1(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function $m(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(s){return s&&s._delegate?s._delegate:s}class Jr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new GI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u1(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:l1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function l1(s){return s===Fs?void 0:s}function u1(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pe||(Pe={}));const h1={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},f1=Pe.INFO,d1={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},m1=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=d1[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qp{constructor(e){this.name=e,this._logLevel=f1,this._logHandler=m1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const p1=(s,e)=>e.some(t=>s instanceof t);let lT,uT;function g1(){return lT||(lT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _1(){return uT||(uT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y0=new WeakMap,fp=new WeakMap,v0=new WeakMap,Zm=new WeakMap,Yp=new WeakMap;function y1(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(Gr(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&y0.set(t,s)}).catch(()=>{}),Yp.set(e,s),e}function v1(s){if(fp.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});fp.set(s,e)}let dp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return fp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||v0.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gr(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function T1(s){dp=s(dp)}function E1(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Jm(this),e,...t);return v0.set(r,e.sort?e.sort():[e]),Gr(r)}:_1().includes(s)?function(...e){return s.apply(Jm(this),e),Gr(y0.get(this))}:function(...e){return Gr(s.apply(Jm(this),e))}}function b1(s){return typeof s=="function"?E1(s):(s instanceof IDBTransaction&&v1(s),p1(s,g1())?new Proxy(s,dp):s)}function Gr(s){if(s instanceof IDBRequest)return y1(s);if(Zm.has(s))return Zm.get(s);const e=b1(s);return e!==s&&(Zm.set(s,e),Yp.set(e,s)),e}const Jm=s=>Yp.get(s);function S1(s,e,{blocked:t,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),m=Gr(h);return r&&h.addEventListener("upgradeneeded",p=>{r(Gr(h.result),p.oldVersion,p.newVersion,Gr(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const A1=["get","getKey","getAll","getAllKeys","count"],I1=["put","add","delete","clear"],Wm=new Map;function cT(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Wm.get(e))return Wm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=I1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||A1.includes(t)))return;const u=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let _=p.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&p.done]))[0]};return Wm.set(e,u),u}T1(s=>({...s,get:(e,t,r)=>cT(e,t)||s.get(e,t,r),has:(e,t)=>!!cT(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(R1(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function R1(s){return s.getComponent()?.type==="VERSION"}const mp="@firebase/app",hT="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new Qp("@firebase/app"),C1="@firebase/app-compat",D1="@firebase/analytics-compat",N1="@firebase/analytics",x1="@firebase/app-check-compat",V1="@firebase/app-check",O1="@firebase/auth",P1="@firebase/auth-compat",M1="@firebase/database",k1="@firebase/data-connect",U1="@firebase/database-compat",L1="@firebase/functions",B1="@firebase/functions-compat",j1="@firebase/installations",z1="@firebase/installations-compat",q1="@firebase/messaging",F1="@firebase/messaging-compat",H1="@firebase/performance",G1="@firebase/performance-compat",K1="@firebase/remote-config",Q1="@firebase/remote-config-compat",Y1="@firebase/storage",X1="@firebase/storage-compat",$1="@firebase/firestore",Z1="@firebase/ai",J1="@firebase/firestore-compat",W1="firebase",ew="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="[DEFAULT]",tw={[mp]:"fire-core",[C1]:"fire-core-compat",[N1]:"fire-analytics",[D1]:"fire-analytics-compat",[V1]:"fire-app-check",[x1]:"fire-app-check-compat",[O1]:"fire-auth",[P1]:"fire-auth-compat",[M1]:"fire-rtdb",[k1]:"fire-data-connect",[U1]:"fire-rtdb-compat",[L1]:"fire-fn",[B1]:"fire-fn-compat",[j1]:"fire-iid",[z1]:"fire-iid-compat",[q1]:"fire-fcm",[F1]:"fire-fcm-compat",[H1]:"fire-perf",[G1]:"fire-perf-compat",[K1]:"fire-rc",[Q1]:"fire-rc-compat",[Y1]:"fire-gcs",[X1]:"fire-gcs-compat",[$1]:"fire-fst",[J1]:"fire-fst-compat",[Z1]:"fire-vertex","fire-js":"fire-js",[W1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new Map,nw=new Map,gp=new Map;function fT(s,e){try{s.container.addComponent(e)}catch(t){er.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ia(s){const e=s.name;if(gp.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;gp.set(e,s);for(const t of Gh.values())fT(t,s);for(const t of nw.values())fT(t,s);return!0}function bf(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Kn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new ku("app","Firebase",iw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=ew;function T0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:pp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Kr.create("bad-app-name",{appName:String(o)});if(t||(t=h0()),!t)throw Kr.create("no-options");const u=Gh.get(o);if(u){if(na(t,u.options)&&na(r,u.config))return u;throw Kr.create("duplicate-app",{appName:o})}const h=new c1(o);for(const p of gp.values())h.addComponent(p);const m=new rw(t,r,h);return Gh.set(o,m),m}function Xp(s=pp){const e=Gh.get(s);if(!e&&s===pp&&h0())return T0();if(!e)throw Kr.create("no-app",{appName:s});return e}function _i(s,e,t){let r=tw[s]??s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(h.join(" "));return}ia(new Jr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="firebase-heartbeat-database",aw=1,bu="firebase-heartbeat-store";let ep=null;function E0(){return ep||(ep=S1(sw,aw,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(bu)}catch(t){console.warn(t)}}}}).catch(s=>{throw Kr.create("idb-open",{originalErrorMessage:s.message})})),ep}async function ow(s){try{const t=(await E0()).transaction(bu),r=await t.objectStore(bu).get(b0(s));return await t.done,r}catch(e){if(e instanceof bi)er.warn(e.message);else{const t=Kr.create("idb-get",{originalErrorMessage:e?.message});er.warn(t.message)}}}async function dT(s,e){try{const r=(await E0()).transaction(bu,"readwrite");await r.objectStore(bu).put(e,b0(s)),await r.done}catch(t){if(t instanceof bi)er.warn(t.message);else{const r=Kr.create("idb-set",{originalErrorMessage:t?.message});er.warn(r.message)}}}function b0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=1024,uw=30;class cw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=mT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>uw){const o=dw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){er.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=mT(),{heartbeatsToSend:t,unsentEntries:r}=hw(this._heartbeatsCache.heartbeats),o=Hh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return er.warn(e),""}}}function mT(){return new Date().toISOString().substring(0,10)}function hw(s,e=lw){const t=[];let r=s.slice();for(const o of s){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),pT(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),pT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class fw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _0()?WI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ow(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return dT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return dT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function pT(s){return Hh(JSON.stringify({version:2,heartbeats:s})).length}function dw(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(s){ia(new Jr("platform-logger",e=>new w1(e),"PRIVATE")),ia(new Jr("heartbeat",e=>new cw(e),"PRIVATE")),_i(mp,hT,s),_i(mp,hT,"esm2020"),_i("fire-js","")}mw("");var gT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,S0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function R(){}R.prototype=I.prototype,x.D=I.prototype,x.prototype=new R,x.prototype.constructor=x,x.C=function(O,M,U){for(var C=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)C[jt-2]=arguments[jt];return I.prototype[M].apply(O,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,I,R){R||(R=0);var O=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)O[M]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(M=0;16>M;++M)O[M]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=x.g[0],R=x.g[1],M=x.g[2];var U=x.g[3],C=I+(U^R&(M^U))+O[0]+3614090360&4294967295;I=R+(C<<7&4294967295|C>>>25),C=U+(M^I&(R^M))+O[1]+3905402710&4294967295,U=I+(C<<12&4294967295|C>>>20),C=M+(R^U&(I^R))+O[2]+606105819&4294967295,M=U+(C<<17&4294967295|C>>>15),C=R+(I^M&(U^I))+O[3]+3250441966&4294967295,R=M+(C<<22&4294967295|C>>>10),C=I+(U^R&(M^U))+O[4]+4118548399&4294967295,I=R+(C<<7&4294967295|C>>>25),C=U+(M^I&(R^M))+O[5]+1200080426&4294967295,U=I+(C<<12&4294967295|C>>>20),C=M+(R^U&(I^R))+O[6]+2821735955&4294967295,M=U+(C<<17&4294967295|C>>>15),C=R+(I^M&(U^I))+O[7]+4249261313&4294967295,R=M+(C<<22&4294967295|C>>>10),C=I+(U^R&(M^U))+O[8]+1770035416&4294967295,I=R+(C<<7&4294967295|C>>>25),C=U+(M^I&(R^M))+O[9]+2336552879&4294967295,U=I+(C<<12&4294967295|C>>>20),C=M+(R^U&(I^R))+O[10]+4294925233&4294967295,M=U+(C<<17&4294967295|C>>>15),C=R+(I^M&(U^I))+O[11]+2304563134&4294967295,R=M+(C<<22&4294967295|C>>>10),C=I+(U^R&(M^U))+O[12]+1804603682&4294967295,I=R+(C<<7&4294967295|C>>>25),C=U+(M^I&(R^M))+O[13]+4254626195&4294967295,U=I+(C<<12&4294967295|C>>>20),C=M+(R^U&(I^R))+O[14]+2792965006&4294967295,M=U+(C<<17&4294967295|C>>>15),C=R+(I^M&(U^I))+O[15]+1236535329&4294967295,R=M+(C<<22&4294967295|C>>>10),C=I+(M^U&(R^M))+O[1]+4129170786&4294967295,I=R+(C<<5&4294967295|C>>>27),C=U+(R^M&(I^R))+O[6]+3225465664&4294967295,U=I+(C<<9&4294967295|C>>>23),C=M+(I^R&(U^I))+O[11]+643717713&4294967295,M=U+(C<<14&4294967295|C>>>18),C=R+(U^I&(M^U))+O[0]+3921069994&4294967295,R=M+(C<<20&4294967295|C>>>12),C=I+(M^U&(R^M))+O[5]+3593408605&4294967295,I=R+(C<<5&4294967295|C>>>27),C=U+(R^M&(I^R))+O[10]+38016083&4294967295,U=I+(C<<9&4294967295|C>>>23),C=M+(I^R&(U^I))+O[15]+3634488961&4294967295,M=U+(C<<14&4294967295|C>>>18),C=R+(U^I&(M^U))+O[4]+3889429448&4294967295,R=M+(C<<20&4294967295|C>>>12),C=I+(M^U&(R^M))+O[9]+568446438&4294967295,I=R+(C<<5&4294967295|C>>>27),C=U+(R^M&(I^R))+O[14]+3275163606&4294967295,U=I+(C<<9&4294967295|C>>>23),C=M+(I^R&(U^I))+O[3]+4107603335&4294967295,M=U+(C<<14&4294967295|C>>>18),C=R+(U^I&(M^U))+O[8]+1163531501&4294967295,R=M+(C<<20&4294967295|C>>>12),C=I+(M^U&(R^M))+O[13]+2850285829&4294967295,I=R+(C<<5&4294967295|C>>>27),C=U+(R^M&(I^R))+O[2]+4243563512&4294967295,U=I+(C<<9&4294967295|C>>>23),C=M+(I^R&(U^I))+O[7]+1735328473&4294967295,M=U+(C<<14&4294967295|C>>>18),C=R+(U^I&(M^U))+O[12]+2368359562&4294967295,R=M+(C<<20&4294967295|C>>>12),C=I+(R^M^U)+O[5]+4294588738&4294967295,I=R+(C<<4&4294967295|C>>>28),C=U+(I^R^M)+O[8]+2272392833&4294967295,U=I+(C<<11&4294967295|C>>>21),C=M+(U^I^R)+O[11]+1839030562&4294967295,M=U+(C<<16&4294967295|C>>>16),C=R+(M^U^I)+O[14]+4259657740&4294967295,R=M+(C<<23&4294967295|C>>>9),C=I+(R^M^U)+O[1]+2763975236&4294967295,I=R+(C<<4&4294967295|C>>>28),C=U+(I^R^M)+O[4]+1272893353&4294967295,U=I+(C<<11&4294967295|C>>>21),C=M+(U^I^R)+O[7]+4139469664&4294967295,M=U+(C<<16&4294967295|C>>>16),C=R+(M^U^I)+O[10]+3200236656&4294967295,R=M+(C<<23&4294967295|C>>>9),C=I+(R^M^U)+O[13]+681279174&4294967295,I=R+(C<<4&4294967295|C>>>28),C=U+(I^R^M)+O[0]+3936430074&4294967295,U=I+(C<<11&4294967295|C>>>21),C=M+(U^I^R)+O[3]+3572445317&4294967295,M=U+(C<<16&4294967295|C>>>16),C=R+(M^U^I)+O[6]+76029189&4294967295,R=M+(C<<23&4294967295|C>>>9),C=I+(R^M^U)+O[9]+3654602809&4294967295,I=R+(C<<4&4294967295|C>>>28),C=U+(I^R^M)+O[12]+3873151461&4294967295,U=I+(C<<11&4294967295|C>>>21),C=M+(U^I^R)+O[15]+530742520&4294967295,M=U+(C<<16&4294967295|C>>>16),C=R+(M^U^I)+O[2]+3299628645&4294967295,R=M+(C<<23&4294967295|C>>>9),C=I+(M^(R|~U))+O[0]+4096336452&4294967295,I=R+(C<<6&4294967295|C>>>26),C=U+(R^(I|~M))+O[7]+1126891415&4294967295,U=I+(C<<10&4294967295|C>>>22),C=M+(I^(U|~R))+O[14]+2878612391&4294967295,M=U+(C<<15&4294967295|C>>>17),C=R+(U^(M|~I))+O[5]+4237533241&4294967295,R=M+(C<<21&4294967295|C>>>11),C=I+(M^(R|~U))+O[12]+1700485571&4294967295,I=R+(C<<6&4294967295|C>>>26),C=U+(R^(I|~M))+O[3]+2399980690&4294967295,U=I+(C<<10&4294967295|C>>>22),C=M+(I^(U|~R))+O[10]+4293915773&4294967295,M=U+(C<<15&4294967295|C>>>17),C=R+(U^(M|~I))+O[1]+2240044497&4294967295,R=M+(C<<21&4294967295|C>>>11),C=I+(M^(R|~U))+O[8]+1873313359&4294967295,I=R+(C<<6&4294967295|C>>>26),C=U+(R^(I|~M))+O[15]+4264355552&4294967295,U=I+(C<<10&4294967295|C>>>22),C=M+(I^(U|~R))+O[6]+2734768916&4294967295,M=U+(C<<15&4294967295|C>>>17),C=R+(U^(M|~I))+O[13]+1309151649&4294967295,R=M+(C<<21&4294967295|C>>>11),C=I+(M^(R|~U))+O[4]+4149444226&4294967295,I=R+(C<<6&4294967295|C>>>26),C=U+(R^(I|~M))+O[11]+3174756917&4294967295,U=I+(C<<10&4294967295|C>>>22),C=M+(I^(U|~R))+O[2]+718787259&4294967295,M=U+(C<<15&4294967295|C>>>17),C=R+(U^(M|~I))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+U&4294967295}r.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var R=I-this.blockSize,O=this.B,M=this.h,U=0;U<I;){if(M==0)for(;U<=R;)o(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<I;)if(O[M++]=x.charCodeAt(U++),M==this.blockSize){o(this,O),M=0;break}}else for(;U<I;)if(O[M++]=x[U++],M==this.blockSize){o(this,O),M=0;break}}this.h=M,this.o+=I},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var R=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=R&255,R/=256;for(this.u(x),x=Array(16),I=R=0;4>I;++I)for(var O=0;32>O;O+=8)x[R++]=this.g[I]>>>O&255;return x};function u(x,I){var R=m;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=I(x)}function h(x,I){this.h=I;for(var R=[],O=!0,M=x.length-1;0<=M;M--){var U=x[M]|0;O&&U==I||(R[M]=U,O=!1)}this.g=R}var m={};function p(x){return-128<=x&&128>x?u(x,function(I){return new h([I|0],0>I?-1:0)}):new h([x|0],0>x?-1:0)}function _(x){if(isNaN(x)||!isFinite(x))return S;if(0>x)return X(_(-x));for(var I=[],R=1,O=0;x>=R;O++)I[O]=x/R|0,R*=4294967296;return new h(I,0)}function T(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return X(T(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=_(Math.pow(I,8)),O=S,M=0;M<x.length;M+=8){var U=Math.min(8,x.length-M),C=parseInt(x.substring(M,M+U),I);8>U?(U=_(Math.pow(I,U)),O=O.j(U).add(_(C))):(O=O.j(R),O=O.add(_(C)))}return O}var S=p(0),A=p(1),P=p(16777216);s=h.prototype,s.m=function(){if(ee(this))return-X(this).m();for(var x=0,I=1,R=0;R<this.g.length;R++){var O=this.i(R);x+=(0<=O?O:4294967296+O)*I,I*=4294967296}return x},s.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(H(this))return"0";if(ee(this))return"-"+X(this).toString(x);for(var I=_(Math.pow(x,6)),R=this,O="";;){var M=J(R,I).g;R=ce(R,M.j(I));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(x);if(R=M,H(R))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},s.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function H(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function ee(x){return x.h==-1}s.l=function(x){return x=ce(this,x),ee(x)?-1:H(x)?0:1};function X(x){for(var I=x.g.length,R=[],O=0;O<I;O++)R[O]=~x.g[O];return new h(R,~x.h).add(A)}s.abs=function(){return ee(this)?X(this):this},s.add=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],O=0,M=0;M<=I;M++){var U=O+(this.i(M)&65535)+(x.i(M)&65535),C=(U>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);O=C>>>16,U&=65535,C&=65535,R[M]=C<<16|U}return new h(R,R[R.length-1]&-2147483648?-1:0)};function ce(x,I){return x.add(X(I))}s.j=function(x){if(H(this)||H(x))return S;if(ee(this))return ee(x)?X(this).j(X(x)):X(X(this).j(x));if(ee(x))return X(this.j(X(x)));if(0>this.l(P)&&0>x.l(P))return _(this.m()*x.m());for(var I=this.g.length+x.g.length,R=[],O=0;O<2*I;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<x.g.length;M++){var U=this.i(O)>>>16,C=this.i(O)&65535,jt=x.i(M)>>>16,ct=x.i(M)&65535;R[2*O+2*M]+=C*ct,ue(R,2*O+2*M),R[2*O+2*M+1]+=U*ct,ue(R,2*O+2*M+1),R[2*O+2*M+1]+=C*jt,ue(R,2*O+2*M+1),R[2*O+2*M+2]+=U*jt,ue(R,2*O+2*M+2)}for(O=0;O<I;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=I;O<2*I;O++)R[O]=0;return new h(R,0)};function ue(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function ne(x,I){this.g=x,this.h=I}function J(x,I){if(H(I))throw Error("division by zero");if(H(x))return new ne(S,S);if(ee(x))return I=J(X(x),I),new ne(X(I.g),X(I.h));if(ee(I))return I=J(x,X(I)),new ne(X(I.g),I.h);if(30<x.g.length){if(ee(x)||ee(I))throw Error("slowDivide_ only works with positive integers.");for(var R=A,O=I;0>=O.l(x);)R=ae(R),O=ae(O);var M=ge(R,1),U=ge(O,1);for(O=ge(O,2),R=ge(R,2);!H(O);){var C=U.add(O);0>=C.l(x)&&(M=M.add(R),U=C),O=ge(O,1),R=ge(R,1)}return I=ce(x,M.j(I)),new ne(M,I)}for(M=S;0<=x.l(I);){for(R=Math.max(1,Math.floor(x.m()/I.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=_(R),C=U.j(I);ee(C)||0<C.l(x);)R-=O,U=_(R),C=U.j(I);H(U)&&(U=A),M=M.add(U),x=ce(x,C)}return new ne(M,x)}s.A=function(x){return J(this,x).h},s.and=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)&x.i(O);return new h(R,this.h&x.h)},s.or=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)|x.i(O);return new h(R,this.h|x.h)},s.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)^x.i(O);return new h(R,this.h^x.h)};function ae(x){for(var I=x.g.length+1,R=[],O=0;O<I;O++)R[O]=x.i(O)<<1|x.i(O-1)>>>31;return new h(R,x.h)}function ge(x,I){var R=I>>5;I%=32;for(var O=x.g.length-R,M=[],U=0;U<O;U++)M[U]=0<I?x.i(U+R)>>>I|x.i(U+R+1)<<32-I:x.i(U+R);return new h(M,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,S0=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=T,Qr=h}).apply(typeof gT<"u"?gT:typeof self<"u"?self:typeof window<"u"?window:{});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var A0,lu,I0,Dh,_p,w0,R0,C0;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,y){return c==Array.prototype||c==Object.prototype||(c[g]=y.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof vh=="object"&&vh];for(var g=0;g<c.length;++g){var y=c[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function o(c,g){if(g)e:{var y=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in y))break e;y=y[L]}c=c[c.length-1],b=y[c],g=g(b),g!=b&&g!=null&&e(y,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var y=0,b=!1,L={next:function(){if(!b&&y<c.length){var G=y++;return{value:g(G,c[G]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function _(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function T(c,g,y){return c.call.apply(c.bind,arguments)}function S(c,g,y){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(g,L)}}return function(){return c.apply(g,arguments)}}function A(c,g,y){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:S,A.apply(null,arguments)}function P(c,g){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function H(c,g){function y(){}y.prototype=g.prototype,c.aa=g.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(b,L,G){for(var re=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)re[Ue-2]=arguments[Ue];return g.prototype[L].apply(b,re)}}function ee(c){const g=c.length;if(0<g){const y=Array(g);for(let b=0;b<g;b++)y[b]=c[b];return y}return[]}function X(c,g){for(let y=1;y<arguments.length;y++){const b=arguments[y];if(p(b)){const L=c.length||0,G=b.length||0;c.length=L+G;for(let re=0;re<G;re++)c[L+re]=b[re]}else c.push(b)}}class ce{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ue(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var ae=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function ge(c,g,y){for(const b in c)g.call(y,c[b],b,c)}function x(c,g){for(const y in c)g.call(void 0,c[y],y,c)}function I(c){const g={};for(const y in c)g[y]=c[y];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,g){let y,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(y in b)c[y]=b[y];for(let G=0;G<R.length;G++)y=R[G],Object.prototype.hasOwnProperty.call(b,y)&&(c[y]=b[y])}}function M(c){var g=1;c=c.split(":");const y=[];for(;0<g&&c.length;)y.push(c.shift()),g--;return c.length&&y.push(c.join(":")),y}function U(c){m.setTimeout(()=>{throw c},0)}function C(){var c=qe;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class jt{constructor(){this.h=this.g=null}add(g,y){const b=ct.get();b.set(g,y),this.h?this.h.next=b:this.g=b,this.h=b}}var ct=new ce(()=>new K,c=>c.reset());class K{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let se,_e=!1,qe=new jt,N=()=>{const c=m.Promise.resolve(void 0);se=()=>{c.then(W)}};var W=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(y){U(y)}var g=ct;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}_e=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};m.addEventListener("test",y,g),m.removeEventListener("test",y,g)}catch{}return c})();function De(c,g){if(ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ae){e:{try{J(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else y=="mouseover"?g=c.fromElement:y=="mouseout"&&(g=c.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ae[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&De.aa.h.call(this)}}H(De,ie);var Ae={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),nt=0;function $n(c,g,y,b,L){this.listener=c,this.proxy=null,this.src=g,this.type=y,this.capture=!!b,this.ha=L,this.key=++nt,this.da=this.fa=!1}function ar(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ai(c){this.src=c,this.g={},this.h=0}Ai.prototype.add=function(c,g,y,b,L){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var re=as(c,g,b,L);return-1<re?(g=c[re],y||(g.fa=!1)):(g=new $n(g,this.src,G,!!b,L),g.fa=y,c.push(g)),g};function ss(c,g){var y=g.type;if(y in c.g){var b=c.g[y],L=Array.prototype.indexOf.call(b,g,void 0),G;(G=0<=L)&&Array.prototype.splice.call(b,L,1),G&&(ar(g),c.g[y].length==0&&(delete c.g[y],c.h--))}}function as(c,g,y,b){for(var L=0;L<c.length;++L){var G=c[L];if(!G.da&&G.listener==g&&G.capture==!!y&&G.ha==b)return L}return-1}var os="closure_lm_"+(1e6*Math.random()|0),Ko={};function Xu(c,g,y,b,L){if(Array.isArray(g)){for(var G=0;G<g.length;G++)Xu(c,g[G],y,b,L);return null}return y=$u(y),c&&c[Ot]?c.K(g,y,_(b)?!!b.capture:!1,L):En(c,g,y,!1,b,L)}function En(c,g,y,b,L,G){if(!g)throw Error("Invalid event type");var re=_(L)?!!L.capture:!!L,Ue=ya(c);if(Ue||(c[os]=Ue=new Ai(c)),y=Ue.add(g,y,b,re,G),y.proxy)return y;if(b=Hf(),y.proxy=b,b.src=c,b.listener=y,c.addEventListener)ve||(L=re),L===void 0&&(L=!1),c.addEventListener(g.toString(),b,L);else if(c.attachEvent)c.attachEvent(ls(g.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Hf(){function c(y){return g.call(c.src,c.listener,y)}const g=Gf;return c}function Qo(c,g,y,b,L){if(Array.isArray(g))for(var G=0;G<g.length;G++)Qo(c,g[G],y,b,L);else b=_(b)?!!b.capture:!!b,y=$u(y),c&&c[Ot]?(c=c.i,g=String(g).toString(),g in c.g&&(G=c.g[g],y=as(G,y,b,L),-1<y&&(ar(G[y]),Array.prototype.splice.call(G,y,1),G.length==0&&(delete c.g[g],c.h--)))):c&&(c=ya(c))&&(g=c.g[g.toString()],c=-1,g&&(c=as(g,y,b,L)),(y=-1<c?g[c]:null)&&_a(y))}function _a(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Ot])ss(g.i,c);else{var y=c.type,b=c.proxy;g.removeEventListener?g.removeEventListener(y,b,c.capture):g.detachEvent?g.detachEvent(ls(y),b):g.addListener&&g.removeListener&&g.removeListener(b),(y=ya(g))?(ss(y,c),y.h==0&&(y.src=null,g[os]=null)):ar(c)}}}function ls(c){return c in Ko?Ko[c]:Ko[c]="on"+c}function Gf(c,g){if(c.da)c=!0;else{g=new De(g,this);var y=c.listener,b=c.ha||c.src;c.fa&&_a(c),c=y.call(b,g)}return c}function ya(c){return c=c[os],c instanceof Ai?c:null}var Yo="__closure_events_fn_"+(1e9*Math.random()>>>0);function $u(c){return typeof c=="function"?c:(c[Yo]||(c[Yo]=function(g){return c.handleEvent(g)}),c[Yo])}function ht(){oe.call(this),this.i=new Ai(this),this.M=this,this.F=null}H(ht,oe),ht.prototype[Ot]=!0,ht.prototype.removeEventListener=function(c,g,y,b){Qo(this,c,g,y,b)};function Ge(c,g){var y,b=c.F;if(b)for(y=[];b;b=b.F)y.push(b);if(c=c.M,b=g.type||g,typeof g=="string")g=new ie(g,c);else if(g instanceof ie)g.target=g.target||c;else{var L=g;g=new ie(b,c),O(g,L)}if(L=!0,y)for(var G=y.length-1;0<=G;G--){var re=g.g=y[G];L=cn(re,b,!0,g)&&L}if(re=g.g=c,L=cn(re,b,!0,g)&&L,L=cn(re,b,!1,g)&&L,y)for(G=0;G<y.length;G++)re=g.g=y[G],L=cn(re,b,!1,g)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var y=c.g[g],b=0;b<y.length;b++)ar(y[b]);delete c.g[g],c.h--}}this.F=null},ht.prototype.K=function(c,g,y,b){return this.i.add(String(c),g,!1,y,b)},ht.prototype.L=function(c,g,y,b){return this.i.add(String(c),g,!0,y,b)};function cn(c,g,y,b){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,G=0;G<g.length;++G){var re=g[G];if(re&&!re.da&&re.capture==y){var Ue=re.listener,Rt=re.ha||re.src;re.fa&&ss(c.i,re),L=Ue.call(Rt,b)!==!1&&L}}return L&&!b.defaultPrevented}function Yt(c,g,y){if(typeof c=="function")y&&(c=A(c,y));else if(c&&typeof c.handleEvent=="function")c=A(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function Zu(c){c.g=Yt(()=>{c.g=null,c.i&&(c.i=!1,Zu(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Kf extends oe{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Zu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function us(c){oe.call(this),this.h=c,this.g={}}H(us,oe);var cs=[];function hs(c){ge(c.g,function(g,y){this.g.hasOwnProperty(y)&&_a(g)},c),c.g={}}us.prototype.N=function(){us.aa.N.call(this),hs(this)},us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=m.JSON.stringify,va=m.JSON.parse,fs=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Xo(){}Xo.prototype.h=null;function $o(c){return c.h||(c.h=c.i())}function Zo(){}var Ii={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wi(){ie.call(this,"d")}H(wi,ie);function Jo(){ie.call(this,"c")}H(Jo,ie);var Zn={},Wo=null;function or(){return Wo=Wo||new ht}Zn.La="serverreachability";function Ta(c){ie.call(this,Zn.La,c)}H(Ta,ie);function lr(c){const g=or();Ge(g,new Ta(g))}Zn.STAT_EVENT="statevent";function Ju(c,g){ie.call(this,Zn.STAT_EVENT,c),this.stat=g}H(Ju,ie);function rt(c){const g=or();Ge(g,new Ju(g,c))}Zn.Ma="timingevent";function wt(c,g){ie.call(this,Zn.Ma,c),this.size=g}H(wt,ie);function vt(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function el(c,g,y,b,L,G){c.info(function(){if(c.g)if(G)for(var re="",Ue=G.split("&"),Rt=0;Rt<Ue.length;Rt++){var Le=Ue[Rt].split("=");if(1<Le.length){var Mt=Le[0];Le=Le[1];var Ct=Mt.split("_");re=2<=Ct.length&&Ct[1]=="type"?re+(Mt+"="+Le+"&"):re+(Mt+"=redacted&")}}else re=null;else re=G;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+g+`
`+y+`
`+re})}function Qf(c,g,y,b,L,G,re){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+g+`
`+y+`
`+G+" "+re})}function ur(c,g,y,b){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+ds(c,y)+(b?" "+b:"")})}function Wu(c,g){c.info(function(){return"TIMEOUT: "+g})}bn.prototype.info=function(){};function ds(c,g){if(!c.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var b=y[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var G=L[0];if(G!="noop"&&G!="stop"&&G!="close")for(var re=1;re<L.length;re++)L[re]=""}}}}return Bn(y)}catch{return g}}var cr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function Wn(){}H(Wn,Xo),Wn.prototype.g=function(){return new XMLHttpRequest},Wn.prototype.i=function(){return{}},Jn=new Wn;function en(c,g,y,b){this.j=c,this.i=g,this.l=y,this.R=b||1,this.U=new us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}var tl={},Ea={};function jn(c,g,y){c.L=1,c.v=ys(hn(g)),c.m=y,c.P=!0,Ci(c,null)}function Ci(c,g){c.F=Date.now(),ms(c),c.A=hn(c.v);var y=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),ol(y.i,"t",b),c.C=0,y=c.j.J,c.h=new pt,c.g=pc(c.j,y?g:null,!c.m),0<c.O&&(c.M=new Kf(A(c.Y,c,c.g),c.O)),g=c.U,y=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(cs[0]=L.toString()),L=cs);for(var G=0;G<L.length;G++){var re=Xu(y,L[G],b||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),lr(),el(c.i,c.u,c.A,c.l,c.R,c.m)}en.prototype.ca=function(c){c=c.target;const g=this.M;g&&wn(c)==3?g.j():this.Y(c)},en.prototype.Y=function(c){try{if(c==this.g)e:{const Ct=wn(this.g);var g=this.g.Ba();const ki=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||oc(this.g)))){this.J||Ct!=4||g==7||(g==8||0>=ki?lr(3):lr(2)),hr(this);var y=this.g.Z();this.X=y;t:if(ec(this)){var b=oc(this.g);c="";var L=b.length,G=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),ei(this);var re="";break t}this.h.i=new m.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,c+=this.h.i.decode(b[g],{stream:!(G&&g==L-1)});b.length=0,this.h.g+=c,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=y==200,Qf(this.i,this.u,this.A,this.l,this.R,Ct,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Rt=this.g;if((Ue=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ue(Ue)){var Le=Ue;break t}}Le=null}if(y=Le)ur(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ps(this,y);else{this.o=!1,this.s=3,rt(12),zt(this),ei(this);break e}}if(this.P){y=!0;let qt;for(;!this.J&&this.C<re.length;)if(qt=tc(this,re),qt==Ea){Ct==4&&(this.s=4,rt(14),y=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==tl){this.s=4,rt(15),ur(this.i,this.l,re,"[Invalid Chunk]"),y=!1;break}else ur(this.i,this.l,qt,null),ps(this,qt);if(ec(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||re.length!=0||this.h.h||(this.s=1,rt(16),y=!1),this.o=this.o&&y,!y)ur(this.i,this.l,re,"[Invalid Chunked Response]"),zt(this),ei(this);else if(0<re.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),ws(Mt),Mt.M=!0,rt(11))}}else ur(this.i,this.l,re,null),ps(this,re);Ct==4&&zt(this),this.o&&!this.J&&(Ct==4?fc(this.j,this):(this.o=!1,ms(this)))}else Jf(this.g),y==400&&0<re.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),zt(this),ei(this)}}}catch{}finally{}};function ec(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function tc(c,g){var y=c.C,b=g.indexOf(`
`,y);return b==-1?Ea:(y=Number(g.substring(y,b)),isNaN(y)?tl:(b+=1,b+y>g.length?Ea:(g=g.slice(b,b+y),c.C=b+y,g)))}en.prototype.cancel=function(){this.J=!0,zt(this)};function ms(c){c.S=Date.now()+c.I,nc(c,c.I)}function nc(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=vt(A(c.ba,c),g)}function hr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}en.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Wu(this.i,this.A),this.L!=2&&(lr(),rt(17)),zt(this),this.s=2,ei(this)):nc(this,this.S-c)};function ei(c){c.j.G==0||c.J||fc(c.j,c)}function zt(c){hr(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,hs(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function ps(c,g){try{var y=c.j;if(y.G!=0&&(y.g==c||nl(y.h,c))){if(!c.K&&nl(y.h,c)&&y.G==3){try{var b=y.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Oa(y),xa(y);else break e;fl(y),rt(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=vt(A(y.Za,y),6e3));if(1>=Sa(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Mi(y,11)}else if((c.K||y.g==c)&&Oa(y),!ue(g))for(L=y.Da.g.parse(g),g=0;g<L.length;g++){let Le=L[g];if(y.T=Le[0],Le=Le[1],y.G==2)if(Le[0]=="c"){y.K=Le[1],y.ia=Le[2];const Mt=Le[3];Mt!=null&&(y.la=Mt,y.j.info("VER="+y.la));const Ct=Le[4];Ct!=null&&(y.Aa=Ct,y.j.info("SVER="+y.Aa));const ki=Le[5];ki!=null&&typeof ki=="number"&&0<ki&&(b=1.5*ki,y.L=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const qt=c.g;if(qt){const oi=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oi){var G=b.h;G.g||oi.indexOf("spdy")==-1&&oi.indexOf("quic")==-1&&oi.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Aa(G,G.h),G.h=null))}if(b.D){const ml=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;ml&&(b.ya=ml,Xe(b.I,b.D,ml))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),b=y;var re=c;if(b.qa=mc(b,b.J?b.ia:null,b.W),re.K){tn(b.h,re);var Ue=re,Rt=b.L;Rt&&(Ue.I=Rt),Ue.B&&(hr(Ue),ms(Ue)),b.g=re}else cc(b);0<y.i.length&&Va(y)}else Le[0]!="stop"&&Le[0]!="close"||Mi(y,7);else y.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Mi(y,7):cl(y):Le[0]!="noop"&&y.l&&y.l.ta(Le),y.v=0)}}lr(4)}catch{}}var ic=class{constructor(c,g){this.g=c,this.map=g}};function Di(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ba(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Sa(c){return c.h?1:c.g?c.g.size:0}function nl(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Aa(c,g){c.g?c.g.add(g):c.h=g}function tn(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Di.prototype.cancel=function(){if(this.i=il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function il(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const y of c.g.values())g=g.concat(y.D);return g}return ee(c.i)}function Yf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],y=c.length,b=0;b<y;b++)g.push(c[b]);return g}g=[],y=0;for(b in c)g[y++]=c[b];return g}function Ia(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var y=0;y<c;y++)g.push(y);return g}g=[],y=0;for(const b in c)g[y++]=b;return g}}}function rl(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var y=Ia(c),b=Yf(c),L=b.length,G=0;G<L;G++)g.call(void 0,b[G],y&&y[G],c)}var gs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xf(c,g){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var b=c[y].indexOf("="),L=null;if(0<=b){var G=c[y].substring(0,b);L=c[y].substring(b+1)}else G=c[y];g(G,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Tt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Tt){this.h=c.h,_s(this,c.j),this.o=c.o,this.g=c.g,fr(this,c.s),this.l=c.l;var g=c.i,y=new xi;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Ni(this,y),this.m=c.m}else c&&(g=String(c).match(gs))?(this.h=!1,_s(this,g[1]||"",!0),this.o=Sn(g[2]||""),this.g=Sn(g[3]||"",!0),fr(this,g[4]),this.l=Sn(g[5]||"",!0),Ni(this,g[6]||"",!0),this.m=Sn(g[7]||"")):(this.h=!1,this.i=new xi(null,this.h))}Tt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(vs(g,sl,!0),":");var y=this.g;return(y||g=="file")&&(c.push("//"),(g=this.o)&&c.push(vs(g,sl,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(vs(y,y.charAt(0)=="/"?$f:al,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",vs(y,wa)),c.join("")};function hn(c){return new Tt(c)}function _s(c,g,y){c.j=y?Sn(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function fr(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Ni(c,g,y){g instanceof xi?(c.i=g,sc(c.i,c.h)):(y||(g=vs(g,Zf)),c.i=new xi(g,c.h))}function Xe(c,g,y){c.i.set(g,y)}function ys(c){return Xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Sn(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vs(c,g,y){return typeof c=="string"?(c=encodeURI(c).replace(g,rc),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function rc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var sl=/[#\/\?@]/g,al=/[#\?:]/g,$f=/[#\?]/g,Zf=/[#\?@]/g,wa=/#/g;function xi(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function An(c){c.g||(c.g=new Map,c.h=0,c.i&&Xf(c.i,function(g,y){c.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}s=xi.prototype,s.add=function(c,g){An(this),this.i=null,c=ti(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(g),this.h+=1,this};function Vi(c,g){An(c),g=ti(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Oi(c,g){return An(c),g=ti(c,g),c.g.has(g)}s.forEach=function(c,g){An(this),this.g.forEach(function(y,b){y.forEach(function(L){c.call(g,L,b,this)},this)},this)},s.na=function(){An(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let b=0;b<g.length;b++){const L=c[b];for(let G=0;G<L.length;G++)y.push(g[b])}return y},s.V=function(c){An(this);let g=[];if(typeof c=="string")Oi(this,c)&&(g=g.concat(this.g.get(ti(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)g=g.concat(c[y])}return g},s.set=function(c,g){return An(this),this.i=null,c=ti(this,c),Oi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},s.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ol(c,g,y){Vi(c,g),0<y.length&&(c.i=null,c.g.set(ti(c,g),ee(y)),c.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var b=g[y];const G=encodeURIComponent(String(b)),re=this.V(b);for(b=0;b<re.length;b++){var L=G;re[b]!==""&&(L+="="+encodeURIComponent(String(re[b]))),c.push(L)}}return this.i=c.join("&")};function ti(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function sc(c,g){g&&!c.j&&(An(c),c.i=null,c.g.forEach(function(y,b){var L=b.toLowerCase();b!=L&&(Vi(this,b),ol(this,L,y))},c)),c.j=g}function Ts(c,g){const y=new bn;if(m.Image){const b=new Image;b.onload=P(In,y,"TestLoadImage: loaded",!0,g,b),b.onerror=P(In,y,"TestLoadImage: error",!1,g,b),b.onabort=P(In,y,"TestLoadImage: abort",!1,g,b),b.ontimeout=P(In,y,"TestLoadImage: timeout",!1,g,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else g(!1)}function zn(c,g){const y=new bn,b=new AbortController,L=setTimeout(()=>{b.abort(),In(y,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:b.signal}).then(G=>{clearTimeout(L),G.ok?In(y,"TestPingServer: ok",!0,g):In(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),In(y,"TestPingServer: error",!1,g)})}function In(c,g,y,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(y)}catch{}}function Es(){this.g=new fs}function ni(c,g,y){const b=y||"";try{rl(c,function(L,G){let re=L;_(L)&&(re=Bn(L)),g.push(b+G+"="+encodeURIComponent(re))})}catch(L){throw g.push(b+"type="+encodeURIComponent("_badmap")),L}}function dr(c){this.l=c.Ub||null,this.j=c.eb||!1}H(dr,Xo),dr.prototype.g=function(){return new Pi(this.l,this.j)},dr.prototype.i=(function(c){return function(){return c}})({});function Pi(c,g){ht.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(Pi,ht),s=Pi.prototype,s.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,ri(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ll(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ll(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?ii(this):ri(this),this.readyState==3&&ll(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,ii(this))},s.Qa=function(c){this.g&&(this.response=c,ii(this))},s.ga=function(){this.g&&ii(this)};function ii(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ri(c)}s.setRequestHeader=function(c,g){this.u.append(c,g)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=g.next();return c.join(`\r
`)};function ri(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ul(c){let g="";return ge(c,function(y,b){g+=b,g+=":",g+=y,g+=`\r
`}),g}function Pt(c,g,y){e:{for(b in y){var b=!1;break e}b=!0}b||(y=ul(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Xe(c,g,y))}function He(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(He,ht);var Ra=/^https?$/i,bs=["POST","PUT"];s=He.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,g,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?$o(this.o):$o(Jn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){ac(this,G);return}if(c=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)y.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())y.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(G=>G.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(bs,g,void 0))||b||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,re]of y)this.g.setRequestHeader(G,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ss(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){ac(this,G)}};function ac(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ca(c),si(c)}function Ca(c){c.A||(c.A=!0,Ge(c,"complete"),Ge(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ge(this,"complete"),Ge(this,"abort"),si(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),si(this,!0)),He.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Da(this):this.bb())},s.bb=function(){Da(this)};function Da(c){if(c.h&&typeof h<"u"&&(!c.v[1]||wn(c)!=4||c.Z()!=2)){if(c.u&&wn(c)==4)Yt(c.Ea,0,c);else if(Ge(c,"readystatechange"),wn(c)==4){c.h=!1;try{const re=c.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var b;if(b=re===0){var L=String(c.D).match(gs)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),b=!Ra.test(L?L.toLowerCase():"")}y=b}if(y)Ge(c,"complete"),Ge(c,"success");else{c.m=6;try{var G=2<wn(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Ca(c)}}finally{si(c)}}}}function si(c,g){if(c.g){Ss(c);const y=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Ge(c,"ready");try{y.onreadystatechange=b}catch{}}}function Ss(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function wn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),va(g)}};function oc(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Jf(c){const g={};c=(c.g&&2<=wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(ue(c[b]))continue;var y=M(c[b]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const G=g[L]||[];g[L]=G,G.push(y)}x(g,function(b){return b.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(c,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||g}function Na(c){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=As("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=As("baseRetryDelayMs",5e3,c),this.cb=As("retryDelaySeedMs",1e4,c),this.Wa=As("forwardChannelMaxRetries",2,c),this.wa=As("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Di(c&&c.concurrentRequestLimit),this.Da=new Es,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Na.prototype,s.la=8,s.G=1,s.connect=function(c,g,y,b){rt(0),this.W=c,this.H=g||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.I=mc(this,null,this.W),Va(this)};function cl(c){if(lc(c),c.G==3){var g=c.U++,y=hn(c.I);if(Xe(y,"SID",c.K),Xe(y,"RID",g),Xe(y,"TYPE","terminate"),Is(c,y),g=new en(c,c.j,g),g.L=2,g.v=ys(hn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=g.v,y=!0),y||(g.g=pc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ms(g)}dc(c)}function xa(c){c.g&&(ws(c),c.g.cancel(),c.g=null)}function lc(c){xa(c),c.u&&(m.clearTimeout(c.u),c.u=null),Oa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Va(c){if(!ba(c.h)&&!c.s){c.s=!0;var g=c.Ga;se||N(),_e||(se(),_e=!0),qe.add(g,c),c.B=0}}function Wf(c,g){return Sa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=vt(A(c.Ga,c,g),dl(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new en(this,this.j,c);let G=this.o;if(this.S&&(G?(G=I(G),O(G,this.S)):G=this.S),this.m!==null||this.O||(L.H=G,G=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=uc(this,L,g),y=hn(this.I),Xe(y,"RID",c),Xe(y,"CVER",22),this.D&&Xe(y,"X-HTTP-Session-Id",this.D),Is(this,y),G&&(this.O?g="headers="+encodeURIComponent(String(ul(G)))+"&"+g:this.m&&Pt(y,this.m,G)),Aa(this.h,L),this.Ua&&Xe(y,"TYPE","init"),this.P?(Xe(y,"$req",g),Xe(y,"SID","null"),L.T=!0,jn(L,y,null)):jn(L,y,g),this.G=2}}else this.G==3&&(c?hl(this,c):this.i.length==0||ba(this.h)||hl(this))};function hl(c,g){var y;g?y=g.l:y=c.U++;const b=hn(c.I);Xe(b,"SID",c.K),Xe(b,"RID",y),Xe(b,"AID",c.T),Is(c,b),c.m&&c.o&&Pt(b,c.m,c.o),y=new en(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),g&&(c.i=g.D.concat(c.i)),g=uc(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Aa(c.h,y),jn(y,b,g)}function Is(c,g){c.H&&ge(c.H,function(y,b){Xe(g,b,y)}),c.l&&rl({},function(y,b){Xe(g,b,y)})}function uc(c,g,y){y=Math.min(c.i.length,y);var b=c.l?A(c.l.Na,c.l,c):null;e:{var L=c.i;let G=-1;for(;;){const re=["count="+y];G==-1?0<y?(G=L[0].g,re.push("ofs="+G)):G=0:re.push("ofs="+G);let Ue=!0;for(let Rt=0;Rt<y;Rt++){let Le=L[Rt].g;const Mt=L[Rt].map;if(Le-=G,0>Le)G=Math.max(0,L[Rt].g-100),Ue=!1;else try{ni(Mt,re,"req"+Le+"_")}catch{b&&b(Mt)}}if(Ue){b=re.join("&");break e}}}return c=c.i.splice(0,y),g.D=c,b}function cc(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;se||N(),_e||(se(),_e=!0),qe.add(g,c),c.v=0}}function fl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=vt(A(c.Fa,c),dl(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,hc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=vt(A(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),xa(this),hc(this))};function ws(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function hc(c){c.g=new en(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=hn(c.qa);Xe(g,"RID","rpc"),Xe(g,"SID",c.K),Xe(g,"AID",c.T),Xe(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xe(g,"TO",c.ja),Xe(g,"TYPE","xmlhttp"),Is(c,g),c.m&&c.o&&Pt(g,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=ys(hn(g)),y.m=null,y.P=!0,Ci(y,c)}s.Za=function(){this.C!=null&&(this.C=null,xa(this),fl(this),rt(19))};function Oa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function fc(c,g){var y=null;if(c.g==g){Oa(c),ws(c),c.g=null;var b=2}else if(nl(c.h,g))y=g.D,tn(c.h,g),b=1;else return;if(c.G!=0){if(g.o)if(b==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var L=c.B;b=or(),Ge(b,new wt(b,y)),Va(c)}else cc(c);else if(L=g.s,L==3||L==0&&0<g.X||!(b==1&&Wf(c,g)||b==2&&fl(c)))switch(y&&0<y.length&&(g=c.h,g.i=g.i.concat(y)),L){case 1:Mi(c,5);break;case 4:Mi(c,10);break;case 3:Mi(c,6);break;default:Mi(c,2)}}}function dl(c,g){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*g}function Mi(c,g){if(c.j.info("Error code "+g),g==2){var y=A(c.fb,c),b=c.Xa;const L=!b;b=new Tt(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||_s(b,"https"),ys(b),L?Ts(b.toString(),y):zn(b.toString(),y)}else rt(2);c.G=0,c.l&&c.l.sa(g),dc(c),lc(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function dc(c){if(c.G=0,c.ka=[],c.l){const g=il(c.h);(g.length!=0||c.i.length!=0)&&(X(c.ka,g),X(c.ka,c.i),c.h.i.length=0,ee(c.i),c.i.length=0),c.l.ra()}}function mc(c,g,y){var b=y instanceof Tt?hn(y):new Tt(y);if(b.g!="")g&&(b.g=g+"."+b.g),fr(b,b.s);else{var L=m.location;b=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var G=new Tt(null);b&&_s(G,b),g&&(G.g=g),L&&fr(G,L),y&&(G.l=y),b=G}return y=c.D,g=c.ya,y&&g&&Xe(b,y,g),Xe(b,"VER",c.la),Is(c,b),b}function pc(c,g,y){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new He(new dr({eb:y})):new He(c.pa),g.Ha(c.J),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function gc(){}s=gc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Pa(){}Pa.prototype.g=function(c,g){return new nn(c,g)};function nn(c,g){ht.call(this),this.g=new Na(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!ue(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ue(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ai(this)}H(nn,ht),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){cl(this.g)},nn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Bn(c),c=y);g.i.push(new ic(g.Ya++,c)),g.G==3&&Va(g)},nn.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,nn.aa.N.call(this)};function _c(c){wi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const y in g){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}H(_c,wi);function yc(){Jo.call(this),this.status=1}H(yc,Jo);function ai(c){this.g=c}H(ai,gc),ai.prototype.ua=function(){Ge(this.g,"a")},ai.prototype.ta=function(c){Ge(this.g,new _c(c))},ai.prototype.sa=function(c){Ge(this.g,new yc)},ai.prototype.ra=function(){Ge(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,C0=function(){return new Pa},R0=function(){return or()},w0=Zn,_p={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cr.NO_ERROR=0,cr.TIMEOUT=8,cr.HTTP_ERROR=6,Dh=cr,Ri.COMPLETE="complete",I0=Ri,Zo.EventType=Ii,Ii.OPEN="a",Ii.CLOSE="b",Ii.ERROR="c",Ii.MESSAGE="d",ht.prototype.listen=ht.prototype.K,lu=Zo,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,A0=He}).apply(typeof vh<"u"?vh:typeof self<"u"?self:typeof window<"u"?window:{});const _T="@firebase/firestore",yT="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new Qp("@firebase/firestore");function go(){return ra.logLevel}function te(s,...e){if(ra.logLevel<=Pe.DEBUG){const t=e.map($p);ra.debug(`Firestore (${zo}): ${s}`,...t)}}function sn(s,...e){if(ra.logLevel<=Pe.ERROR){const t=e.map($p);ra.error(`Firestore (${zo}): ${s}`,...t)}}function sa(s,...e){if(ra.logLevel<=Pe.WARN){const t=e.map($p);ra.warn(`Firestore (${zo}): ${s}`,...t)}}function $p(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,D0(s,r,t)}function D0(s,e,t){let r=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw sn(r),new Error(r)}function me(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||D0(e,o,r)}function we(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Kt.UNAUTHENTICATED)))}shutdown(){}}class gw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _w{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){me(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let u=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Yr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Yr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new N0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class yw{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vw{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Kt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tw{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){me(this.o===void 0,3512);const r=u=>{u.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,te("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Ew(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%62))}return r}}function Ie(s,e){return s<e?-1:s>e?1:0}function yp(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return tp(o)===tp(u)?Ie(o,u):tp(o)?1:-1}return Ie(s.length,e.length)}const bw=55296,Sw=57343;function tp(s){const e=s.charCodeAt(0);return e>=bw&&e<=Sw}function Do(s,e,t){return s.length===e.length&&s.every(((r,o)=>t(r,e[o])))}function V0(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="__name__";class di{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&de(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return di.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof di?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=di.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Ie(e.length,t.length)}static compareSegments(e,t){const r=di.isNumericId(e),o=di.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?di.extractNumericId(e).compare(di.extractNumericId(t)):yp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}}class We extends di{construct(e,t,r){return new We(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new We(t)}static emptyPath(){return new We([])}}const Aw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends di{construct(e,t,r){return new yt(e,t,r)}static isValidIdentifier(e){return Aw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TT}static keyField(){return new yt([TT])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(t)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(We.fromString(e))}static fromName(e){return new le(We.fromString(e).popFirst(5))}static empty(){return new le(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new We(e.slice()))}}function Iw(s,e,t,r){if(e===!0&&r===!0)throw new he(Z.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function ET(s){if(le.isDocumentKey(s))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function ww(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Rw(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":de(12329,{type:typeof s})}function Kh(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rw(s);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(s,e){const t={typeString:s};return e&&(t.value=e),t}function Lu(s,e){if(!ww(s))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const h=s[r];if(o&&typeof h!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new he(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=-62135596800,ST=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ST);return new ot(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bT)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ST}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:At("string",ot._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new ot(0,0))}static max(){return new ye(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;class Qh{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function vp(s){return s.fields.find((e=>e.kind===2))}function Hs(s){return s.fields.filter((e=>e.kind!==2))}Qh.UNKNOWN_ID=-1;class Nh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Au{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Au(0,Tn.min())}}function Cw(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=ye.fromTimestamp(r===1e9?new ot(t+1,0):new ot(t,r));return new Tn(o,le.empty(),e)}function O0(s){return new Tn(s.readTime,s.key,Su)}class Tn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Tn(ye.min(),le.empty(),Su)}static max(){return new Tn(ye.max(),le.empty(),Su)}}function Zp(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(s.documentKey,e.documentKey),t!==0?t:Ie(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pa(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==P0)throw s;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):B.reject(t)}static resolve(e){return new B(((t,r)=>{t(e)}))}static reject(e){return new B(((t,r)=>{r(e)}))}static waitFor(e){return new B(((t,r)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&t()}),(p=>r(p)))})),h=!0,u===o&&t()}))}static or(e){let t=B.resolve(!1);for(const r of e)t=t.next((o=>o?B.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,u)=>{r.push(t.call(this,o,u))})),this.waitFor(r)}static mapArray(e,t){return new B(((r,o)=>{const u=e.length,h=new Array(u);let m=0;for(let p=0;p<u;p++){const _=p;t(e[_]).next((T=>{h[_]=T,++m,m===u&&r(h)}),(T=>o(T)))}}))}static doWhile(e,t){return new B(((r,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="SimpleDb";class Sf{static open(e,t,r,o){try{return new Sf(t,e.transaction(o,r))}catch(u){throw new du(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Yr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new du(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Jp(r.target.error);this.S.reject(new du(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(te(vn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Nw(t)}}class Xr{static delete(e){return te(vn,"Removing database:",e),Ks(l0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!_0())return!1;if(Xr.F())return!0;const e=xt(),t=Xr.M(e),r=0<t&&t<10,o=k0(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Xr.M(xt())===12.2&&sn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(te(vn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const h=u.target.result;t(h)},o.onblocked=()=>{r(new du(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;h.name==="VersionError"?r(new he(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?r(new he(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):r(new du(e,h))},o.onupgradeneeded=u=>{te(vn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const h=u.target.result;this.N.k(h,o.transaction,u.oldVersion,this.version).next((()=>{te(vn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const u=t==="readonly";let h=0;for(;;){++h;try{this.db=await this.L(e);const m=Sf.open(this.db,e,u?"readonly":"readwrite",r),p=o(m).next((_=>(m.C(),_))).catch((_=>(m.abort(_),B.reject(_)))).toPromise();return p.catch((()=>{})),await m.D,p}catch(m){const p=m,_=p.name!=="FirebaseError"&&h<3;if(te(vn,"Transaction failed with error:",p.message,"Retrying:",_),this.close(),!_)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function k0(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Dw{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ks(this.U.delete())}}class du extends he{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function rs(s){return s.name==="IndexedDbTransactionError"}class Nw{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(te(vn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(te(vn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ks(r)}add(e){return te(vn,"ADD",this.store.name,e,e),Ks(this.store.add(e))}get(e){return Ks(this.store.get(e)).next((t=>(t===void 0&&(t=null),te(vn,"GET",this.store.name,e,t),t)))}delete(e){return te(vn,"DELETE",this.store.name,e),Ks(this.store.delete(e))}count(){return te(vn,"COUNT",this.store.name),Ks(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new B(((h,m)=>{u.onerror=p=>{m(p.target.error)},u.onsuccess=p=>{h(p.target.result)}}))}{const u=this.cursor(r),h=[];return this.H(u,((m,p)=>{h.push(p)})).next((()=>h))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new B(((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}}))}Z(e,t){te(vn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,((u,h,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}te(e){const t=this.cursor({});return new B(((r,o)=>{t.onerror=u=>{const h=Jp(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next((m=>{m?h.continue():r()})):r()}}))}H(e,t){const r=[];return new B(((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const p=new Dw(m),_=t(m.primaryKey,m.value,p);if(_ instanceof B){const T=_.catch((S=>(p.done(),B.reject(S))));r.push(T)}p.isDone?o():p.G===null?m.continue():m.continue(p.G)}})).next((()=>B.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ks(s){return new B(((e,t)=>{s.onsuccess=r=>{const o=r.target.result;e(o)},s.onerror=r=>{const o=Jp(r.target.error);t(o)}}))}let AT=!1;function Jp(s){const e=Xr.M(xt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AT||(AT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const mu="IndexBackfiller";class xw{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){te(mu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();te(mu,`Documents written: ${t}`)}catch(t){rs(t)?te(mu,"Ignoring IndexedDB error during index backfill: ",t):await pa(t)}await this.re(6e4)}))}}class Vw{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let o=t,u=!0;return B.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((h=>{if(h!==null&&!r.has(h))return te(mu,`Processing collection: ${h}`),this.oe(e,h,o).next((m=>{o-=m,r.add(h)}));u=!1})))).next((()=>t-o))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next((()=>this._e(o,u))).next((m=>(te(mu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>h.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((o,u)=>{const h=O0(u);Zp(h,r)>0&&(r=h)})),new Tn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=-1;function Af(s){return s==null}function Yh(s){return s===0&&1/s==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="";function Wt(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=IT(e)),e=Ow(s.get(t),e);return IT(e)}function Ow(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case Xh:t+="";break;default:t+=u}}return t}function IT(s){return s+Xh+""}function pi(s){const e=s.length;if(me(e>=2,64408,{path:s}),e===2)return me(s.charAt(0)===Xh&&s.charAt(1)==="",56145,{path:s}),We.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=s.indexOf(Xh,u);switch((h<0||h>t)&&de(50515,{path:s}),s.charAt(h+1)){case"":const m=s.substring(u,h);let p;o.length===0?p=m:(o+=m,p=o,o=""),r.push(p);break;case"":o+=s.substring(u,h),o+="\0";break;case"":o+=s.substring(u,h+1);break;default:de(61167,{path:s})}u=h+2}return new We(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="remoteDocuments",Bu="owner",uo="owner",Iu="mutationQueues",Pw="userId",Gn="mutations",wT="batchId",Zs="userMutationsIndex",RT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(s,e){return[s,Wt(e)]}function U0(s,e,t){return[s,Wt(e),t]}const Mw={},No="documentMutations",$h="remoteDocumentsV14",kw=["prefixPath","collectionGroup","readTime","documentId"],Vh="documentKeyIndex",Uw=["prefixPath","collectionGroup","documentId"],L0="collectionGroupIndex",Lw=["collectionGroup","readTime","prefixPath","documentId"],wu="remoteDocumentGlobal",Tp="remoteDocumentGlobalKey",xo="targets",B0="queryTargetsIndex",Bw=["canonicalId","targetId"],Vo="targetDocuments",jw=["targetId","path"],Wp="documentTargetsIndex",zw=["path","targetId"],Zh="targetGlobalKey",Ws="targetGlobal",Ru="collectionParents",qw=["collectionId","parent"],Oo="clientMetadata",Fw="clientId",If="bundles",Hw="bundleId",wf="namedQueries",Gw="name",eg="indexConfiguration",Kw="indexId",Ep="collectionGroupIndex",Qw="collectionGroup",pu="indexState",Yw=["indexId","uid"],j0="sequenceNumberIndex",Xw=["uid","sequenceNumber"],gu="indexEntries",$w=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],z0="documentKeyIndex",Zw=["indexId","uid","orderedDocumentKey"],Rf="documentOverlays",Jw=["userId","collectionPath","documentId"],bp="collectionPathOverlayIndex",Ww=["userId","collectionPath","largestBatchId"],q0="collectionGroupOverlayIndex",eR=["userId","collectionGroup","largestBatchId"],tg="globals",tR="name",F0=[Iu,Gn,No,Gs,xo,Bu,Ws,Vo,Oo,wu,Ru,If,wf],nR=[...F0,Rf],H0=[Iu,Gn,No,$h,xo,Bu,Ws,Vo,Oo,wu,Ru,If,wf,Rf],G0=H0,ng=[...G0,eg,pu,gu],iR=ng,K0=[...ng,tg],rR=K0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp extends M0{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Vt(s,e){const t=we(s);return Xr.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ju(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function sR(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Th(this.root,e,this.comparator,!1)}getReverseIterator(){return new Th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Th(this.root,e,this.comparator,!0)}}class Th{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Qt.RED,this.left=o??Qt.EMPTY,this.right=u??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Qt(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,r,o,u){return this}insert(e,t,r){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DT(this.data.getIterator())}getIteratorFrom(e){return new DT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ye(this.comparator);return t.data=e,t}}class DT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function co(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new $i([])}unionWith(e){let t=new Ye(yt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Q0("Invalid base64 string: "+u):u}})(e);return new It(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new It(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const aR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(s){if(me(!!s,39018),typeof s=="string"){let e=0;const t=aR.exec(s);if(me(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(s.seconds),nanos:at(s.nanos)}}function at(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function nr(s){return typeof s=="string"?It.fromBase64String(s):It.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="server_timestamp",X0="__type__",$0="__previous_value__",Z0="__local_write_time__";function ig(s){return(s?.mapValue?.fields||{})[X0]?.stringValue===Y0}function Cf(s){const e=s.mapValue.fields[$0];return ig(e)?Cf(e):e}function Cu(s){const e=tr(s.mapValue.fields[Z0].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t,r,o,u,h,m,p,_,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=_,this.isUsingEmulator=T}}const Jh="(default)";class aa{constructor(e,t){this.projectId=e,this.database=t||Jh}static empty(){return new aa("","")}get isDefaultDatabase(){return this.database===Jh}isEqual(e){return e instanceof aa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="__type__",W0="__max__",Hr={mapValue:{fields:{__type__:{stringValue:W0}}}},eb="__vector__",Du="value",Oh={nullValue:"NULL_VALUE"};function Wr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ig(s)?4:tb(s)?9007199254740991:Df(s)?10:11:de(28295,{value:s})}function Ti(s,e){if(s===e)return!0;const t=Wr(s);if(t!==Wr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Cu(s).isEqual(Cu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=tr(o.timestampValue),m=tr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return nr(o.bytesValue).isEqual(nr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return at(o.geoPointValue.latitude)===at(u.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return at(o.integerValue)===at(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=at(o.doubleValue),m=at(u.doubleValue);return h===m?Yh(h)===Yh(m):isNaN(h)&&isNaN(m)}return!1})(s,e);case 9:return Do(s.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(CT(h)!==CT(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!Ti(h[p],m[p])))return!1;return!0})(s,e);default:return de(52216,{left:s})}}function Nu(s,e){return(s.values||[]).find((t=>Ti(t,e)))!==void 0}function es(s,e){if(s===e)return 0;const t=Wr(s),r=Wr(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=at(u.integerValue||u.doubleValue),p=at(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(s,e);case 3:return NT(s.timestampValue,e.timestampValue);case 4:return NT(Cu(s),Cu(e));case 5:return yp(s.stringValue,e.stringValue);case 6:return(function(u,h){const m=nr(u),p=nr(h);return m.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),p=h.split("/");for(let _=0;_<m.length&&_<p.length;_++){const T=Ie(m[_],p[_]);if(T!==0)return T}return Ie(m.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=Ie(at(u.latitude),at(h.latitude));return m!==0?m:Ie(at(u.longitude),at(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return xT(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const m=u.fields||{},p=h.fields||{},_=m[Du]?.arrayValue,T=p[Du]?.arrayValue,S=Ie(_?.values?.length||0,T?.values?.length||0);return S!==0?S:xT(_,T)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Hr.mapValue&&h===Hr.mapValue)return 0;if(u===Hr.mapValue)return 1;if(h===Hr.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),_=h.fields||{},T=Object.keys(_);p.sort(),T.sort();for(let S=0;S<p.length&&S<T.length;++S){const A=yp(p[S],T[S]);if(A!==0)return A;const P=es(m[p[S]],_[T[S]]);if(P!==0)return P}return Ie(p.length,T.length)})(s.mapValue,e.mapValue);default:throw de(23264,{he:t})}}function NT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ie(s,e);const t=tr(s),r=tr(e),o=Ie(t.seconds,r.seconds);return o!==0?o:Ie(t.nanos,r.nanos)}function xT(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const u=es(t[o],r[o]);if(u)return u}return Ie(t.length,r.length)}function Po(s){return Ap(s)}function Ap(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=tr(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return nr(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return le.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",o=!0;for(const u of t.values||[])o?o=!1:r+=",",r+=Ap(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${Ap(t.fields[h])}`;return o+"}"})(s.mapValue):de(61005,{value:s})}function Ph(s){switch(Wr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cf(s);return e?16+Ph(e):16;case 5:return 2*s.stringValue.length;case 6:return nr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+Ph(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return ju(r.fields,((u,h)=>{o+=u.length+Ph(h)})),o})(s.mapValue);default:throw de(13486,{value:s})}}function rg(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ip(s){return!!s&&"integerValue"in s}function xu(s){return!!s&&"arrayValue"in s}function VT(s){return!!s&&"nullValue"in s}function OT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function np(s){return!!s&&"mapValue"in s}function Df(s){return(s?.mapValue?.fields||{})[J0]?.stringValue===eb}function _u(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ju(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=_u(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_u(s.arrayValue.values[t]);return e}return{...s}}function tb(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===W0}const nb={mapValue:{fields:{[J0]:{stringValue:eb},[Du]:{arrayValue:{}}}}};function lR(s){return"nullValue"in s?Oh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?rg(aa.empty(),le.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Df(s)?nb:{mapValue:{}}:de(35942,{value:s})}function uR(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?rg(aa.empty(),le.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?nb:"mapValue"in s?Df(s)?{mapValue:{}}:Hr:de(61959,{value:s})}function PT(s,e){const t=es(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function MT(s,e){const t=es(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!np(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(t)}setAll(e){let t=yt.emptyPath(),r={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=_u(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());np(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];np(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ju(t,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new Pn(_u(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t,r,o,u,h,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new mt(e,0,ye.min(),ye.min(),ye.min(),Pn.empty(),0)}static newFoundDocument(e,t,r,o){return new mt(e,1,t,ye.min(),r,o,0)}static newNoDocument(e,t){return new mt(e,2,t,ye.min(),ye.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new mt(e,3,t,ye.min(),ye.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t){this.position=e,this.inclusive=t}}function kT(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?r=le.comparator(le.fromName(h.referenceValue),t.key):r=es(h,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function UT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ti(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t="asc"){this.field=e,this.dir=t}}function cR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{}class ke extends ib{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hR(e,t,r):t==="array-contains"?new mR(e,r):t==="in"?new ub(e,r):t==="not-in"?new pR(e,r):t==="array-contains-any"?new gR(e,r):new ke(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fR(e,r):new dR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(es(t,this.value)):t!==null&&Wr(this.value)===Wr(t)&&this.matchesComparison(es(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class et extends ib{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new et(e,t)}matches(e){return ko(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ko(s){return s.op==="and"}function wp(s){return s.op==="or"}function sg(s){return rb(s)&&ko(s)}function rb(s){for(const e of s.filters)if(e instanceof et)return!1;return!0}function Rp(s){if(s instanceof ke)return s.field.canonicalString()+s.op.toString()+Po(s.value);if(sg(s))return s.filters.map((e=>Rp(e))).join(",");{const e=s.filters.map((t=>Rp(t))).join(",");return`${s.op}(${e})`}}function sb(s,e){return s instanceof ke?(function(r,o){return o instanceof ke&&r.op===o.op&&r.field.isEqual(o.field)&&Ti(r.value,o.value)})(s,e):s instanceof et?(function(r,o){return o instanceof et&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,h,m)=>u&&sb(h,o.filters[m])),!0):!1})(s,e):void de(19439)}function ab(s,e){const t=s.filters.concat(e);return et.create(t,s.op)}function ob(s){return s instanceof ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${Po(t.value)}`})(s):s instanceof et?(function(t){return t.op.toString()+" {"+t.getFilters().map(ob).join(" ,")+"}"})(s):"Filter"}class hR extends ke{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){const t=le.comparator(e.key,this.key);return this.matchesComparison(t)}}class fR extends ke{constructor(e,t){super(e,"in",t),this.keys=lb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class dR extends ke{constructor(e,t){super(e,"not-in",t),this.keys=lb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lb(s,e){return(e.arrayValue?.values||[]).map((t=>le.fromName(t.referenceValue)))}class mR extends ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xu(t)&&Nu(t.arrayValue,this.value)}}class ub extends ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Nu(this.value.arrayValue,t)}}class pR extends ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nu(this.value.arrayValue,t)}}class gR extends ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Nu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t=null,r=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function Cp(s,e=null,t=[],r=[],o=null,u=null,h=null){return new _R(s,e,t,r,o,u,h)}function oa(s){const e=we(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Rp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Af(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Po(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Po(r))).join(",")),e.Te=t}return e.Te}function zu(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!cR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!sb(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!UT(s.startAt,e.startAt)&&UT(s.endAt,e.endAt)}function ef(s){return le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function tf(s,e){return s.filters.filter((t=>t instanceof ke&&t.field.isEqual(e)))}function LT(s,e,t){let r=Oh,o=!0;for(const u of tf(s,e)){let h=Oh,m=!0;switch(u.op){case"<":case"<=":h=lR(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=Oh}PT({value:r,inclusive:o},{value:h,inclusive:m})<0&&(r=h,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const h=t.position[u];PT({value:r,inclusive:o},{value:h,inclusive:t.inclusive})<0&&(r=h,o=t.inclusive);break}}return{value:r,inclusive:o}}function BT(s,e,t){let r=Hr,o=!0;for(const u of tf(s,e)){let h=Hr,m=!0;switch(u.op){case">=":case">":h=uR(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=Hr}MT({value:r,inclusive:o},{value:h,inclusive:m})>0&&(r=h,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const h=t.position[u];MT({value:r,inclusive:o},{value:h,inclusive:t.inclusive})>0&&(r=h,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t=null,r=[],o=[],u=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yR(s,e,t,r,o,u,h,m){return new Nf(s,e,t,r,o,u,h,m)}function ag(s){return new Nf(s)}function jT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function vR(s){return s.collectionGroup!==null}function yu(s){const e=we(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Ye(yt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Wh(u,r))})),t.has(yt.keyField().canonicalString())||e.Ie.push(new Wh(yt.keyField(),r))}return e.Ie}function Ln(s){const e=we(s);return e.Ee||(e.Ee=TR(e,yu(s))),e.Ee}function TR(s,e){if(s.limitType==="F")return Cp(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Wh(o.field,u)}));const t=s.endAt?new Mo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Mo(s.startAt.position,s.startAt.inclusive):null;return Cp(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Dp(s,e,t){return new Nf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function xf(s,e){return zu(Ln(s),Ln(e))&&s.limitType===e.limitType}function cb(s){return`${oa(Ln(s))}|lt:${s.limitType}`}function _o(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>ob(o))).join(", ")}]`),Af(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Po(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Po(o))).join(",")),`Target(${r})`})(Ln(s))}; limitType=${s.limitType})`}function qu(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):le.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of yu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(h,m,p){const _=kT(h,m,p);return h.inclusive?_<=0:_<0})(r.startAt,yu(r),o)||r.endAt&&!(function(h,m,p){const _=kT(h,m,p);return h.inclusive?_>=0:_>0})(r.endAt,yu(r),o))})(s,e)}function ER(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function hb(s){return(e,t)=>{let r=!1;for(const o of yu(s)){const u=bR(o,e,t);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function bR(s,e,t){const r=s.field.isKeyField()?le.comparator(e.key,t.key):(function(u,h,m){const p=h.data.field(u),_=m.data.field(u);return p!==null&&_!==null?es(p,_):de(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ju(this.inner,((t,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return sR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new ut(le.comparator);function kn(){return SR}const fb=new ut(le.comparator);function uu(...s){let e=fb;for(const t of s)e=e.insert(t.key,t);return e}function AR(s){let e=fb;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function gi(){return vu()}function db(){return vu()}function vu(){return new sr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const IR=new ut(le.comparator),wR=new Ye(le.comparator);function Oe(...s){let e=wR;for(const t of s)e=e.add(t);return e}const RR=new Ye(Ie);function CR(){return RR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yh(e)?"-0":e}}function NR(s){return{integerValue:""+s}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function xR(s,e,t){return s instanceof Vu?(function(o,u){const h={fields:{[X0]:{stringValue:Y0},[Z0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ig(u)&&(u=Cf(u)),u&&(h.fields[$0]=u),{mapValue:h}})(t,e):s instanceof Uo?mb(s,e):s instanceof Lo?pb(s,e):(function(o,u){const h=OR(o,u),m=zT(h)+zT(o.Ae);return Ip(h)&&Ip(o.Ae)?NR(m):DR(o.serializer,m)})(s,e)}function VR(s,e,t){return s instanceof Uo?mb(s,e):s instanceof Lo?pb(s,e):t}function OR(s,e){return s instanceof Ou?(function(r){return Ip(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Vu extends Vf{}class Uo extends Vf{constructor(e){super(),this.elements=e}}function mb(s,e){const t=gb(e);for(const r of s.elements)t.some((o=>Ti(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Lo extends Vf{constructor(e){super(),this.elements=e}}function pb(s,e){let t=gb(e);for(const r of s.elements)t=t.filter((o=>!Ti(o,r)));return{arrayValue:{values:t}}}class Ou extends Vf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function zT(s){return at(s.integerValue||s.doubleValue)}function gb(s){return xu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,t){this.field=e,this.transform=t}}function MR(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Uo&&o instanceof Uo||r instanceof Lo&&o instanceof Lo?Do(r.elements,o.elements,Ti):r instanceof Ou&&o instanceof Ou?Ti(r.Ae,o.Ae):r instanceof Vu&&o instanceof Vu})(s.transform,e.transform)}class kR{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Of{}function _b(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new og(s.key,Qn.none()):new Fu(s.key,s.data,Qn.none());{const t=s.data,r=Pn.empty();let o=new Ye(yt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new qo(s.key,r,new $i(o.toArray()),Qn.none())}}function UR(s,e,t){s instanceof Fu?(function(o,u,h){const m=o.value.clone(),p=FT(o.fieldTransforms,u,h.transformResults);m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,e,t):s instanceof qo?(function(o,u,h){if(!Mh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=FT(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(yb(o)),p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,t):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Tu(s,e,t,r){return s instanceof Fu?(function(u,h,m,p){if(!Mh(u.precondition,h))return m;const _=u.value.clone(),T=HT(u.fieldTransforms,p,h);return _.setAll(T),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(s,e,t,r):s instanceof qo?(function(u,h,m,p){if(!Mh(u.precondition,h))return m;const _=HT(u.fieldTransforms,p,h),T=h.data;return T.setAll(yb(u)),T.setAll(_),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(s,e,t,r):(function(u,h,m){return Mh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,e,t)}function qT(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Do(r,o,((u,h)=>MR(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Fu extends Of{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class qo extends Of{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function yb(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function FT(s,e,t){const r=new Map;me(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],h=u.transform,m=e.data.field(u.field);r.set(u.field,VR(h,m,t[o]))}return r}function HT(s,e,t){const r=new Map;for(const o of s){const u=o.transform,h=t.data.field(o.field);r.set(o.field,xR(u,h,e))}return r}class og extends Of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vb extends Of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&UR(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=db();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(o.key)?null:m;const p=_b(h,m);p!==null&&r.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(ye.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,((t,r)=>qT(t,r)))&&Do(this.baseMutations,e.baseMutations,((t,r)=>qT(t,r)))}}class ug{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return IR})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new ug(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,je;function BR(s){switch(s){case Z.OK:return de(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return de(15467,{code:s})}}function Tb(s){if(s===void 0)return sn("GRPC error has no .code"),Z.UNKNOWN;switch(s){case St.OK:return Z.OK;case St.CANCELLED:return Z.CANCELLED;case St.UNKNOWN:return Z.UNKNOWN;case St.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case St.INTERNAL:return Z.INTERNAL;case St.UNAVAILABLE:return Z.UNAVAILABLE;case St.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case St.NOT_FOUND:return Z.NOT_FOUND;case St.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case St.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case St.ABORTED:return Z.ABORTED;case St.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case St.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case St.DATA_LOSS:return Z.DATA_LOSS;default:return de(39323,{code:s})}}(je=St||(St={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new Qr([4294967295,4294967295],0);function GT(s){const e=jR().encode(s),t=new S0;return t.update(e),new Uint8Array(t.digest())}function KT(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Qr([t,r],0),new Qr([o,u],0)]}class hg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cu(`Invalid padding: ${t}`);if(r<0)throw new cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new cu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qr.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(Qr.fromNumber(r)));return o.compare(zR)===1&&(o=new Qr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=GT(e),[r,o]=KT(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,o,u);if(!this.we(h))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new hg(u,o,t);return r.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=GT(e),[r,o]=KT(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,o,u);this.Se(h)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Pf(ye.min(),o,new ut(Ie),kn(),Oe())}}class Hu{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Hu(r,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class Eb{constructor(e,t){this.targetId=e,this.Ce=t}}class bb{constructor(e,t,r=It.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class QT{constructor(){this.ve=0,this.Fe=YT(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),r=Oe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:de(38017,{changeType:u})}})),new Hu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=YT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qR{constructor(e){this.Ge=e,this.ze=new Map,this.je=kn(),this.Je=Eh(),this.He=Eh(),this.Ye=new ut(Ie)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:de(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(ef(u))if(r===0){const h=new le(u.path);this.et(t,h,mt.newNoDocument(h,ye.min()))}else me(r===1,20013,{expectedCount:r});else{const h=this._t(t);if(h!==r){const m=this.ut(e),p=m?this.ct(m,e,h):1;if(p!==0){this.it(t);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=t;let h,m;try{h=nr(r).toUint8Array()}catch(p){if(p instanceof Q0)return sa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new hg(h,o,u)}catch(p){return sa(p instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&ef(m.target)){const p=new le(m.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,mt.newNoDocument(p,e))}u.Be&&(t.set(h,u.ke()),u.qe())}}));let r=Oe();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((p=>{const _=this.ot(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new Pf(e,t,this.Ye,this.je,r);return this.je=kn(),this.Je=Eh(),this.He=Eh(),this.Ye=new ut(Ie),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new QT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ye(Ie),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ye(Ie),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new QT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Eh(){return new ut(le.comparator)}function YT(){return new ut(le.comparator)}const FR={asc:"ASCENDING",desc:"DESCENDING"},HR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GR={and:"AND",or:"OR"};class KR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Np(s,e){return s.useProto3Json||Af(e)?e:{value:e}}function nf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QR(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function YR(s,e){return nf(s,e.toTimestamp())}function an(s){return me(!!s,49232),ye.fromTimestamp((function(t){const r=tr(t);return new ot(r.seconds,r.nanos)})(s))}function Sb(s,e){return xp(s,e).canonicalString()}function xp(s,e){const t=(function(o){return new We(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function Ab(s){const e=We.fromString(s);return me(Ob(e),10190,{key:e.toString()}),e}function rf(s,e){return Sb(s.databaseId,e.path)}function ea(s,e){const t=Ab(e);if(t.get(1)!==s.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new le(Rb(t))}function Ib(s,e){return Sb(s.databaseId,e)}function wb(s){const e=Ab(s);return e.length===4?We.emptyPath():Rb(e)}function Vp(s){return new We(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Rb(s){return me(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function XT(s,e,t){return{name:rf(s,e),fields:t.value.mapValue.fields}}function XR(s,e,t){const r=ea(s,e.name),o=an(e.updateTime),u=e.createTime?an(e.createTime):ye.min(),h=new Pn({mapValue:{fields:e.fields}}),m=mt.newFoundDocument(r,o,u,h);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function $R(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:de(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(_,T){return _.useProto3Json?(me(T===void 0||typeof T=="string",58123),It.fromBase64String(T||"")):(me(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),It.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(_){const T=_.code===void 0?Z.UNKNOWN:Tb(_.code);return new he(T,_.message||"")})(h);t=new bb(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=ea(s,r.document.name),u=an(r.document.updateTime),h=r.document.createTime?an(r.document.createTime):ye.min(),m=new Pn({mapValue:{fields:r.document.fields}}),p=mt.newFoundDocument(o,u,h,m),_=r.targetIds||[],T=r.removedTargetIds||[];t=new kh(_,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=ea(s,r.document),u=r.readTime?an(r.readTime):ye.min(),h=mt.newNoDocument(o,u),m=r.removedTargetIds||[];t=new kh([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=ea(s,r.document),u=r.removedTargetIds||[];t=new kh([],u,o,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new LR(o,u),m=r.targetId;t=new Eb(m,h)}}return t}function sf(s,e){let t;if(e instanceof Fu)t={update:XT(s,e.key,e.value)};else if(e instanceof og)t={delete:rf(s,e.key)};else if(e instanceof qo)t={update:XT(s,e.key,e.data),updateMask:nC(e.fieldMask)};else{if(!(e instanceof vb))return de(16599,{Vt:e.type});t={verify:rf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,h){const m=h.transform;if(m instanceof Vu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Uo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Lo)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ou)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw de(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:YR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:de(27497)})(s,e.precondition)),t}function Op(s,e){const t=e.currentDocument?(function(u){return u.updateTime!==void 0?Qn.updateTime(an(u.updateTime)):u.exists!==void 0?Qn.exists(u.exists):Qn.none()})(e.currentDocument):Qn.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(h,m){let p=null;if("setToServerValue"in m)me(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),p=new Vu;else if("appendMissingElements"in m){const T=m.appendMissingElements.values||[];p=new Uo(T)}else if("removeAllFromArray"in m){const T=m.removeAllFromArray.values||[];p=new Lo(T)}else"increment"in m?p=new Ou(h,m.increment):de(16584,{proto:m});const _=yt.fromServerFormat(m.fieldPath);return new PR(_,p)})(s,o))):[];if(e.update){e.update.name;const o=ea(s,e.update.name),u=new Pn({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=(function(p){const _=p.fieldPaths||[];return new $i(_.map((T=>yt.fromServerFormat(T))))})(e.updateMask);return new qo(o,u,h,t,r)}return new Fu(o,u,t,r)}if(e.delete){const o=ea(s,e.delete);return new og(o,t)}if(e.verify){const o=ea(s,e.verify);return new vb(o,t)}return de(1463,{proto:e})}function ZR(s,e){return s&&s.length>0?(me(e!==void 0,14353),s.map((t=>(function(o,u){let h=o.updateTime?an(o.updateTime):an(u);return h.isEqual(ye.min())&&(h=an(u)),new kR(h,o.transformResults||[])})(t,e)))):[]}function Cb(s,e){return{documents:[Ib(s,e.path)]}}function Db(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ib(s,o);const u=(function(_){if(_.length!==0)return Vb(et.create(_,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(_){if(_.length!==0)return _.map((T=>(function(A){return{field:yo(A.field),direction:WR(A.dir)}})(T)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Np(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function Nb(s){let e=wb(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){me(r===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=(function(S){const A=xb(S);return A instanceof et&&sg(A)?A.getFilters():[A]})(t.where));let h=[];t.orderBy&&(h=(function(S){return S.map((A=>(function(H){return new Wh(vo(H.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(S){let A;return A=typeof S=="object"?S.value:S,Af(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(S){const A=!!S.before,P=S.values||[];return new Mo(P,A)})(t.startAt));let _=null;return t.endAt&&(_=(function(S){const A=!S.before,P=S.values||[];return new Mo(P,A)})(t.endAt)),yR(e,o,h,u,m,"F",p,_)}function JR(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xb(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=vo(t.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(t.unaryFilter.field);return ke.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vo(t.unaryFilter.field);return ke.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=vo(t.unaryFilter.field);return ke.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}})(s):s.fieldFilter!==void 0?(function(t){return ke.create(vo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return et.create(t.compositeFilter.filters.map((r=>xb(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return de(1026)}})(t.compositeFilter.op))})(s):de(30097,{filter:s})}function WR(s){return FR[s]}function eC(s){return HR[s]}function tC(s){return GR[s]}function yo(s){return{fieldPath:s.canonicalString()}}function vo(s){return yt.fromServerFormat(s.fieldPath)}function Vb(s){return s instanceof ke?(function(t){if(t.op==="=="){if(OT(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if(VT(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(OT(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if(VT(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:eC(t.op),value:t.value}}})(s):s instanceof et?(function(t){const r=t.getFilters().map((o=>Vb(o)));return r.length===1?r[0]:{compositeFilter:{op:tC(t.op),filters:r}}})(s):de(54877,{filter:s})}function nC(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ob(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t,r,o,u=ye.min(),h=ye.min(),m=It.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.yt=e}}function iC(s,e){let t;if(e.document)t=XR(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),o=ua(e.noDocument.readTime);t=mt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return de(56709);{const r=le.fromSegments(e.unknownDocument.path),o=ua(e.unknownDocument.version);t=mt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const u=new ot(o[0],o[1]);return ye.fromTimestamp(u)})(e.readTime)),t}function $T(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:af(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(u,h){return{name:rf(u,h.key),fields:h.data.value.mapValue.fields,updateTime:nf(u,h.version.toTimestamp()),createTime:nf(u,h.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:la(e.version)};else{if(!e.isUnknownDocument())return de(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:la(e.version)}}return r}function af(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function la(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ua(s){const e=new ot(s.seconds,s.nanoseconds);return ye.fromTimestamp(e)}function Qs(s,e){const t=(e.baseMutations||[]).map((u=>Op(s.yt,u)));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];h.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map((u=>Op(s.yt,u))),o=ot.fromMillis(e.localWriteTimeMs);return new lg(e.batchId,o,t,r)}function hu(s){const e=ua(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?ua(s.lastLimboFreeSnapshotVersion):ye.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const h=u.documents.length;return me(h===1,1966,{count:h}),Ln(ag(wb(u.documents[0])))})(s.query):(function(u){return Ln(Nb(u))})(s.query),new Zi(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,It.fromBase64String(s.resumeToken))}function Mb(s,e){const t=la(e.snapshotVersion),r=la(e.lastLimboFreeSnapshotVersion);let o;o=ef(e.target)?Cb(s.yt,e.target):Db(s.yt,e.target).ft;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oa(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function kb(s){const e=Nb({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Dp(e,e.limit,"L"):e}function ip(s,e){return new cg(e.largestBatchId,Op(s.yt,e.overlayMutation))}function ZT(s,e){const t=e.path.lastSegment();return[s,Wt(e.path.popLast()),t]}function JT(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:la(r.readTime),documentKey:Wt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{getBundleMetadata(e,t){return WT(e).get(t).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:ua(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(e,t){return WT(e).put((function(o){return{bundleId:o.id,createTime:la(an(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return eE(e).get(t).next((r=>{if(r)return(function(u){return{name:u.name,query:kb(u.bundledQuery),readTime:ua(u.readTime)}})(r)}))}saveNamedQuery(e,t){return eE(e).put((function(o){return{name:o.name,readTime:la(an(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function WT(s){return Vt(s,If)}function eE(s){return Vt(s,wf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Mf(e,r)}getOverlay(e,t){return nu(e).get(ZT(this.userId,t)).next((r=>r?ip(this.serializer,r):null))}getOverlays(e,t){const r=gi();return B.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((u,h)=>{const m=new cg(t,h);o.push(this.St(e,m))})),B.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((h=>o.add(Wt(h.getCollectionPath()))));const u=[];return o.forEach((h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(nu(e).Z(bp,m))})),B.waitFor(u)}getOverlaysForCollection(e,t,r){const o=gi(),u=Wt(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return nu(e).J(bp,h).next((m=>{for(const p of m){const _=ip(this.serializer,p);o.set(_.getKey(),_)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const u=gi();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nu(e).ee({index:q0,range:m},((p,_,T)=>{const S=ip(this.serializer,_);u.size()<o||S.largestBatchId===h?(u.set(S.getKey(),S),h=S.largestBatchId):T.done()})).next((()=>u))}St(e,t){return nu(e).put((function(o,u,h){const[m,p,_]=ZT(u,h.mutation.key);return{userId:u,collectionPath:p,documentId:_,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:sf(o.yt,h.mutation)}})(this.serializer,this.userId,t))}}function nu(s){return Vt(s,Rf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{bt(e){return Vt(e,tg)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?It.fromUint8Array(r):It.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(at(e.integerValue));else if("doubleValue"in e){const r=at(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Yh(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=tr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(nr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?tb(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Df(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):de(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const o of Object.keys(r))this.Ot(o,t),this.Ct(r[o],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const o=Du,u=r[o].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(at(u)),this.Ot(o,t),this.Ct(r[o],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const o of r)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),le.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ys.Kt=new Ys;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=255;function aC(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function tE(s){const e=64-(function(r){let o=0;for(let u=0;u<8;++u){const h=aC(255&r[u]);if(o+=h,h!==8)break}return o})(s);return Math.ceil(e/8)}class oC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),r=tE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),r=tE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(ho),this.sn(255)}_n(){this.an(ho),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ho?(this.sn(ho),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ho?(this.an(ho),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class lC{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class uC{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class iu{constructor(){this.cn=new oC,this.ln=new lC(this.cn),this.hn=new uC(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t,r,o){this.Tn=e,this.In=t,this.En=r,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Xs(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Uh(this.En),directionalValue:Uh(this.dn),orderedDocumentKey:Uh(t),documentKey:r.path.toArray()}}Vn(e,t,r){const o=this.Rn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Mr(s,e){let t=s.Tn-e.Tn;return t!==0?t:(t=nE(s.En,e.En),t!==0?t:(t=nE(s.dn,e.dn),t!==0?t:le.comparator(s.In,e.In)))}function nE(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function Uh(s){return g0()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(s):s}function iE(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(s)}class rE{constructor(e){this.mn=new Ye(((t,r)=>yt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(me(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=vp(e);if(t!==void 0&&!this.wn(t))return!1;const r=Hs(e);let o=new Set,u=0,h=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const p=r[u];if(!this.Sn(m,p)||!this.bn(this.fn[h++],p))return!1}++u}for(;u<r.length;++u){const m=r[u];if(h>=this.fn.length||!this.bn(this.fn[h++],m))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ye(yt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Nh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Nh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Nh(r.field,r.dir==="asc"?0:1)));return new Qh(Qh.UNKNOWN_ID,this.collectionId,t,Au.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(s){if(me(s instanceof ke||s instanceof et,20012),s instanceof ke){if(s instanceof ub){const t=s.value.arrayValue?.values?.map((r=>ke.create(s.field,"==",r)))||[];return et.create(t,"or")}return s}const e=s.filters.map((t=>Ub(t)));return et.create(e,s.op)}function cC(s){if(s.getFilters().length===0)return[];const e=kp(Ub(s));return me(Lb(e),7391),Pp(e)||Mp(e)?[e]:e.getFilters()}function Pp(s){return s instanceof ke}function Mp(s){return s instanceof et&&sg(s)}function Lb(s){return Pp(s)||Mp(s)||(function(t){if(t instanceof et&&wp(t)){for(const r of t.getFilters())if(!Pp(r)&&!Mp(r))return!1;return!0}return!1})(s)}function kp(s){if(me(s instanceof ke||s instanceof et,34018),s instanceof ke)return s;if(s.filters.length===1)return kp(s.filters[0]);const e=s.filters.map((r=>kp(r)));let t=et.create(e,s.op);return t=of(t),Lb(t)?t:(me(t instanceof et,64498),me(ko(t),40251),me(t.filters.length>1,57927),t.filters.reduce(((r,o)=>fg(r,o))))}function fg(s,e){let t;return me(s instanceof ke||s instanceof et,38388),me(e instanceof ke||e instanceof et,25473),t=s instanceof ke?e instanceof ke?(function(o,u){return et.create([o,u],"and")})(s,e):sE(s,e):e instanceof ke?sE(e,s):(function(o,u){if(me(o.filters.length>0&&u.filters.length>0,48005),ko(o)&&ko(u))return ab(o,u.getFilters());const h=wp(o)?o:u,m=wp(o)?u:o,p=h.filters.map((_=>fg(_,m)));return et.create(p,"or")})(s,e),of(t)}function sE(s,e){if(ko(e))return ab(e,s.getFilters());{const t=e.filters.map((r=>fg(s,r)));return et.create(t,"or")}}function of(s){if(me(s instanceof ke||s instanceof et,11850),s instanceof ke)return s;const e=s.getFilters();if(e.length===1)return of(e[0]);if(rb(s))return s;const t=e.map((o=>of(o))),r=[];return t.forEach((o=>{o instanceof ke?r.push(o):o instanceof et&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:et.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.Cn=new dg}addToCollectionParentIndex(e,t){return this.Cn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Tn.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Tn.min())}updateCollectionGroup(e,t,r){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class dg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Ye(We.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ye(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="IndexedDbIndexManager",bh=new Uint8Array(0);class fC{constructor(e,t){this.databaseId=t,this.vn=new dg,this.Fn=new sr((r=>oa(r)),((r,o)=>zu(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const u={collectionId:r,parent:Wt(o)};return oE(e).put(u)}return B.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[V0(t),""],!1,!0);return oE(e).J(o).next((u=>{for(const h of u){if(h.collectionId!==t)break;r.push(pi(h.parent))}return r}))}addFieldIndex(e,t){const r=ru(e),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete o.indexId;const u=r.add(o);if(t.indexState){const h=mo(e);return u.next((m=>{h.put(JT(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return u.next()}deleteFieldIndex(e,t){const r=ru(e),o=mo(e),u=fo(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ru(e),r=fo(e),o=mo(e);return t.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return B.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const u=new rE(r).Dn();if(u!=null)return this.addFieldIndex(e,u)}}))))}getDocumentsMatchingTarget(e,t){const r=fo(e);let o=!0;const u=new Map;return B.forEach(this.Mn(t),(h=>this.xn(e,h).next((m=>{o&&(o=!!m),u.set(h,m)})))).next((()=>{if(o){let h=Oe();const m=[];return B.forEach(u,((p,_)=>{te(aE,`Using index ${(function(ne){return`id=${ne.indexId}|cg=${ne.collectionGroup}|f=${ne.fields.map((J=>`${J.fieldPath}:${J.kind}`)).join(",")}`})(p)} to execute ${oa(t)}`);const T=(function(ne,J){const ae=vp(J);if(ae===void 0)return null;for(const ge of tf(ne,ae.fieldPath))switch(ge.op){case"array-contains-any":return ge.value.arrayValue.values||[];case"array-contains":return[ge.value]}return null})(_,p),S=(function(ne,J){const ae=new Map;for(const ge of Hs(J))for(const x of tf(ne,ge.fieldPath))switch(x.op){case"==":case"in":ae.set(ge.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ae.set(ge.fieldPath.canonicalString(),x.value),Array.from(ae.values())}return null})(_,p),A=(function(ne,J){const ae=[];let ge=!0;for(const x of Hs(J)){const I=x.kind===0?LT(ne,x.fieldPath,ne.startAt):BT(ne,x.fieldPath,ne.startAt);ae.push(I.value),ge&&(ge=I.inclusive)}return new Mo(ae,ge)})(_,p),P=(function(ne,J){const ae=[];let ge=!0;for(const x of Hs(J)){const I=x.kind===0?BT(ne,x.fieldPath,ne.endAt):LT(ne,x.fieldPath,ne.endAt);ae.push(I.value),ge&&(ge=I.inclusive)}return new Mo(ae,ge)})(_,p),H=this.On(p,_,A),ee=this.On(p,_,P),X=this.Nn(p,_,S),ce=this.Bn(p.indexId,T,H,A.inclusive,ee,P.inclusive,X);return B.forEach(ce,(ue=>r.Y(ue,t.limit).next((ne=>{ne.forEach((J=>{const ae=le.fromSegments(J.documentKey);h.has(ae)||(h=h.add(ae),m.push(ae))}))}))))})).next((()=>m))}return B.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=cC(et.create(e.filters,"and")).map((r=>Cp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,o,u,h,m){const p=(t!=null?t.length:1)*Math.max(r.length,u.length),_=p/(t!=null?t.length:1),T=[];for(let S=0;S<p;++S){const A=t?this.Ln(t[S/_]):bh,P=this.kn(e,A,r[S%_],o),H=this.qn(e,A,u[S%_],h),ee=m.map((X=>this.kn(e,A,X,!0)));T.push(...this.createRange(P,H,ee))}return T}kn(e,t,r,o){const u=new Xs(e,le.empty(),t,r);return o?u:u.An()}qn(e,t,r,o){const u=new Xs(e,le.empty(),t,r);return o?u.An():u}xn(e,t){const r=new rE(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((u=>{let h=null;for(const m of u)r.yn(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h}))}getIndexType(e,t){let r=2;const o=this.Mn(t);return B.forEach(o,(u=>this.xn(e,u).next((h=>{h?r!==0&&h.fields.length<(function(p){let _=new Ye(yt.comparator),T=!1;for(const S of p.filters)for(const A of S.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?T=!0:_=_.add(A.field));for(const S of p.orderBy)S.field.isKeyField()||(_=_.add(S.field));return _.size+(T?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(h){return h.limit!==null})(t)&&o.length>1&&r===2?1:r))}Qn(e,t){const r=new iu;for(const o of Hs(e)){const u=t.data.field(o.fieldPath);if(u==null)return null;const h=r.Pn(o.kind);Ys.Kt.Dt(u,h)}return r.un()}Ln(e){const t=new iu;return Ys.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new iu;return Ys.Kt.Dt(rg(this.databaseId,t),r.Pn((function(u){const h=Hs(u);return h.length===0?0:h[h.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let o=[];o.push(new iu);let u=0;for(const h of Hs(e)){const m=r[u++];for(const p of o)if(this.Un(t,h.fieldPath)&&xu(m))o=this.Kn(o,h,m);else{const _=p.Pn(h.kind);Ys.Kt.Dt(m,_)}}return this.Wn(o)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const p=new iu;p.seed(m.un()),Ys.Kt.Dt(h,p.Pn(t.kind)),u.push(p)}return u}Un(e,t){return!!e.filters.find((r=>r instanceof ke&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=ru(e),o=mo(e);return(t?r.J(Ep,IDBKeyRange.bound(t,t)):r.J()).next((u=>{const h=[];return B.forEach(u,(m=>o.get([m.indexId,this.uid]).next((p=>{h.push((function(T,S){const A=S?new Au(S.sequenceNumber,new Tn(ua(S.readTime),new le(pi(S.documentKey)),S.largestBatchId)):Au.empty(),P=T.fields.map((([H,ee])=>new Nh(yt.fromServerFormat(H),ee)));return new Qh(T.indexId,T.collectionGroup,P,A)})(m,p))})))).next((()=>h))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:Ie(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=ru(e),u=mo(e);return this.Gn(e).next((h=>o.J(Ep,IDBKeyRange.bound(t,t)).next((m=>B.forEach(m,(p=>u.put(JT(p.indexId,this.uid,h,r))))))))}updateIndexEntries(e,t){const r=new Map;return B.forEach(t,((o,u)=>{const h=r.get(o.collectionGroup);return(h?B.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),B.forEach(m,(p=>this.zn(e,o,p).next((_=>{const T=this.jn(u,p);return _.isEqual(T)?B.resolve():this.Jn(e,u,p,_,T)})))))))}))}Hn(e,t,r,o){return fo(e).put(o.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,o){return fo(e).delete(o.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const o=fo(e);let u=new Ye(Mr);return o.ee({index:z0,range:IDBKeyRange.only([r.indexId,this.uid,Uh(this.$n(r,t))])},((h,m)=>{u=u.add(new Xs(r.indexId,t,iE(m.arrayValue),iE(m.directionalValue)))})).next((()=>u))}jn(e,t){let r=new Ye(Mr);const o=this.Qn(t,e);if(o==null)return r;const u=vp(t);if(u!=null){const h=e.data.field(u.fieldPath);if(xu(h))for(const m of h.arrayValue.values||[])r=r.add(new Xs(t.indexId,e.key,this.Ln(m),o))}else r=r.add(new Xs(t.indexId,e.key,bh,o));return r}Jn(e,t,r,o,u){te(aE,"Updating index entries for document '%s'",t.key);const h=[];return(function(p,_,T,S,A){const P=p.getIterator(),H=_.getIterator();let ee=co(P),X=co(H);for(;ee||X;){let ce=!1,ue=!1;if(ee&&X){const ne=T(ee,X);ne<0?ue=!0:ne>0&&(ce=!0)}else ee!=null?ue=!0:ce=!0;ce?(S(X),X=co(H)):ue?(A(ee),ee=co(P)):(ee=co(P),X=co(H))}})(o,u,Mr,(m=>{h.push(this.Hn(e,t,r,m))}),(m=>{h.push(this.Yn(e,t,r,m))})),B.waitFor(h)}Gn(e){let t=1;return mo(e).ee({index:j0,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((h,m)=>Mr(h,m))).filter(((h,m,p)=>!m||Mr(h,p[m-1])!==0));const o=[];o.push(e);for(const h of r){const m=Mr(h,e),p=Mr(h,t);if(m===0)o[0]=e.An();else if(m>0&&p<0)o.push(h),o.push(h.An());else if(p>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2){if(this.Zn(o[h],o[h+1]))return[];const m=o[h].Vn(this.uid,bh,le.empty()),p=o[h+1].Vn(this.uid,bh,le.empty());u.push(IDBKeyRange.bound(m,p))}return u}Zn(e,t){return Mr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lE)}getMinOffset(e,t){return B.mapArray(this.Mn(t),(r=>this.xn(e,r).next((o=>o||de(44426))))).next(lE)}}function oE(s){return Vt(s,Ru)}function fo(s){return Vt(s,gu)}function ru(s){return Vt(s,eg)}function mo(s){return Vt(s,pu)}function lE(s){me(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Zp(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Tn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bb=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(s,e,t){const r=s.store(Gn),o=s.store(No),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const p=r.ee({range:h},((T,S,A)=>(m++,A.delete())));u.push(p.next((()=>{me(m===1,47070,{batchId:t.batchId})})));const _=[];for(const T of t.mutations){const S=U0(e,T.key.path,t.batchId);u.push(o.delete(S)),_.push(T.key)}return B.waitFor(u).next((()=>_))}function lf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw de(14731);e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(Bb,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);class kf{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(e,t,r,o){me(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new kf(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kr(e).ee({index:Zs,range:r},((o,u,h)=>{t=!1,h.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const u=To(e),h=kr(e);return h.add({}).next((m=>{me(typeof m=="number",49019);const p=new lg(m,t,r,o),_=(function(P,H,ee){const X=ee.baseMutations.map((ue=>sf(P.yt,ue))),ce=ee.mutations.map((ue=>sf(P.yt,ue)));return{userId:H,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:X,mutations:ce}})(this.serializer,this.userId,p),T=[];let S=new Ye(((A,P)=>Ie(A.canonicalString(),P.canonicalString())));for(const A of o){const P=U0(this.userId,A.key.path,m);S=S.add(A.key.path.popLast()),T.push(h.put(_)),T.push(u.put(P,Mw))}return S.forEach((A=>{T.push(this.indexManager.addToCollectionParentIndex(e,A))})),e.addOnCommittedListener((()=>{this.Xn[m]=p.keys()})),B.waitFor(T).next((()=>p))}))}lookupMutationBatch(e,t){return kr(e).get(t).next((r=>r?(me(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Qs(this.serializer,r)):null))}er(e,t){return this.Xn[t]?B.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return kr(e).ee({index:Zs,range:o},((h,m,p)=>{m.userId===this.userId&&(me(m.batchId>=r,47524,{tr:r}),u=Qs(this.serializer,m)),p.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Js;return kr(e).ee({index:Zs,range:t,reverse:!0},((o,u,h)=>{r=u.batchId,h.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Js],[this.userId,Number.POSITIVE_INFINITY]);return kr(e).J(Zs,t).next((r=>r.map((o=>Qs(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xh(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return To(e).ee({range:o},((h,m,p)=>{const[_,T,S]=h,A=pi(T);if(_===this.userId&&t.path.isEqual(A))return kr(e).get(S).next((P=>{if(!P)throw de(61480,{nr:h,batchId:S});me(P.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:P.userId,batchId:S}),u.push(Qs(this.serializer,P))}));p.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ye(Ie);const o=[];return t.forEach((u=>{const h=xh(this.userId,u.path),m=IDBKeyRange.lowerBound(h),p=To(e).ee({range:m},((_,T,S)=>{const[A,P,H]=_,ee=pi(P);A===this.userId&&u.path.isEqual(ee)?r=r.add(H):S.done()}));o.push(p)})),B.waitFor(o).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=xh(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new Ye(Ie);return To(e).ee({range:h},((p,_,T)=>{const[S,A,P]=p,H=pi(A);S===this.userId&&r.isPrefixOf(H)?H.length===o&&(m=m.add(P)):T.done()})).next((()=>this.rr(e,m)))}rr(e,t){const r=[],o=[];return t.forEach((u=>{o.push(kr(e).get(u).next((h=>{if(h===null)throw de(35274,{batchId:u});me(h.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:h.userId,batchId:u}),r.push(Qs(this.serializer,h))})))})),B.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return jb(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),B.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();const r=IDBKeyRange.lowerBound((function(h){return[h]})(this.userId)),o=[];return To(e).ee({range:r},((u,h,m)=>{if(u[0]===this.userId){const p=pi(u[1]);o.push(p)}else m.done()})).next((()=>{me(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(e,t){return zb(e,this.userId,t)}_r(e){return qb(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Js,lastStreamToken:""}))}}function zb(s,e,t){const r=xh(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return To(s).ee({range:u,X:!0},((m,p,_)=>{const[T,S,A]=m;T===e&&S===o&&(h=!0),_.done()})).next((()=>h))}function kr(s){return Vt(s,Gn)}function To(s){return Vt(s,No)}function qb(s){return Vt(s,Iu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ca(0)}static cr(){return new ca(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new ca(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ye.fromTimestamp(new ot(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>po(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(me(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let o=0;const u=[];return po(e).ee(((h,m)=>{const p=hu(m);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,u.push(this.removeTargetData(e,p)))})).next((()=>B.waitFor(u))).next((()=>o))}forEachTarget(e,t){return po(e).ee(((r,o)=>{const u=hu(o);t(u)}))}lr(e){return cE(e).get(Zh).next((t=>(me(t!==null,2888),t)))}hr(e,t){return cE(e).put(Zh,t)}Pr(e,t){return po(e).put(Mb(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=oa(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return po(e).ee({range:o,index:B0},((h,m,p)=>{const _=hu(m);zu(t,_.target)&&(u=_,p.done())})).next((()=>u))}addMatchingKeys(e,t,r){const o=[],u=Br(e);return t.forEach((h=>{const m=Wt(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,h))})),B.waitFor(o)}removeMatchingKeys(e,t,r){const o=Br(e);return B.forEach(t,(u=>{const h=Wt(u.path);return B.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])}))}removeMatchingKeysForTargetId(e,t){const r=Br(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Br(e);let u=Oe();return o.ee({range:r,X:!0},((h,m,p)=>{const _=pi(h[1]),T=new le(_);u=u.add(T)})).next((()=>u))}containsKey(e,t){const r=Wt(t.path),o=IDBKeyRange.bound([r],[V0(r)],!1,!0);let u=0;return Br(e).ee({index:Wp,X:!0,range:o},(([h,m],p,_)=>{h!==0&&(u++,_.done())})).next((()=>u>0))}At(e,t){return po(e).get(t).next((r=>r?hu(r):null))}}function po(s){return Vt(s,xo)}function cE(s){return Vt(s,Ws)}function Br(s){return Vt(s,Vo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="LruGarbageCollector",mC=1048576;function fE([s,e],[t,r]){const o=Ie(s,t);return o===0?Ie(e,r):o}class pC{constructor(e){this.Ir=e,this.buffer=new Ye(fE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fb{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){te(hE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){rs(t)?te(hE,"Ignoring IndexedDB error during garbage collection: ",t):await pa(t)}await this.Vr(3e5)}))}}class gC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(Mn.ce);const r=new pC(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(uE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,u,h,m,p,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,m=Date.now(),this.removeTargets(e,r,t)))).next((S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(_=Date.now(),go()<=Pe.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${S} documents in `+(_-p)+`ms
Total Duration: ${_-T}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function Hb(s,e){return new gC(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t){this.db=e,this.garbageCollector=Hb(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,o)=>t(o)))}addReference(e,t,r){return Sh(e,r)}removeReference(e,t,r){return Sh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Sh(e,t)}br(e,t){return(function(o,u){let h=!1;return qb(o).te((m=>zb(o,m,u).next((p=>(p&&(h=!0),B.resolve(!p)))))).next((()=>h))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(e,((h,m)=>{if(m<=t){const p=this.br(e,h).next((_=>{if(!_)return u++,r.getEntry(e,h).next((()=>(r.removeEntry(h,ye.min()),Br(e).delete((function(S){return[0,Wt(S.path)]})(h)))))}));o.push(p)}})).next((()=>B.waitFor(o))).next((()=>r.apply(e))).next((()=>u))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Sh(e,t)}Sr(e,t){const r=Br(e);let o,u=Mn.ce;return r.ee({index:Wp},(([h,m],{path:p,sequenceNumber:_})=>{h===0?(u!==Mn.ce&&t(new le(pi(o)),u),u=_,o=p):u=Mn.ce})).next((()=>{u!==Mn.ce&&t(new le(pi(o)),u)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sh(s,e){return Br(s).put((function(r,o){return{targetId:0,path:Wt(r.path),sequenceNumber:o}})(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.changes=new sr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?B.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qs(e).put(r)}removeEntry(e,t,r){return qs(e).delete((function(u,h){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],af(h),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=mt.newInvalidDocument(t);return qs(e).ee({index:Vh,range:IDBKeyRange.only(su(t))},((o,u)=>{r=this.Cr(t,u)})).next((()=>r))}vr(e,t){let r={size:0,document:mt.newInvalidDocument(t)};return qs(e).ee({index:Vh,range:IDBKeyRange.only(su(t))},((o,u)=>{r={document:this.Cr(t,u),size:lf(u)}})).next((()=>r))}getEntries(e,t){let r=kn();return this.Fr(e,t,((o,u)=>{const h=this.Cr(o,u);r=r.insert(o,h)})).next((()=>r))}Mr(e,t){let r=kn(),o=new ut(le.comparator);return this.Fr(e,t,((u,h)=>{const m=this.Cr(u,h);r=r.insert(u,m),o=o.insert(u,lf(h))})).next((()=>({documents:r,Or:o})))}Fr(e,t,r){if(t.isEmpty())return B.resolve();let o=new Ye(pE);t.forEach((p=>o=o.add(p)));const u=IDBKeyRange.bound(su(o.first()),su(o.last())),h=o.getIterator();let m=h.getNext();return qs(e).ee({index:Vh,range:u},((p,_,T)=>{const S=le.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;m&&pE(m,S)<0;)r(m,null),m=h.getNext();m&&m.isEqual(S)&&(r(m,_),m=h.hasNext()?h.getNext():null),m?T.j(su(m)):T.done()})).next((()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,u){const h=t.path,m=[h.popLast().toArray(),h.lastSegment(),af(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qs(e).J(IDBKeyRange.bound(m,p,!0)).next((_=>{u?.incrementDocumentReadCount(_.length);let T=kn();for(const S of _){const A=this.Cr(le.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);A.isFoundDocument()&&(qu(t,A)||o.has(A.key))&&(T=T.insert(A.key,A))}return T}))}getAllFromCollectionGroup(e,t,r,o){let u=kn();const h=mE(t,r),m=mE(t,Tn.max());return qs(e).ee({index:L0,range:IDBKeyRange.bound(h,m,!0)},((p,_,T)=>{const S=this.Cr(le.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);u=u.insert(S.key,S),u.size===o&&T.done()})).next((()=>u))}newChangeBuffer(e){return new vC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return dE(e).get(Tp).next((t=>(me(!!t,20021),t)))}Dr(e,t){return dE(e).put(Tp,t)}Cr(e,t){if(t){const r=iC(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ye.min())))return r}return mt.newInvalidDocument(e)}}function Kb(s){return new yC(s)}class vC extends Gb{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new sr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new Ye(((u,h)=>Ie(u.canonicalString(),h.canonicalString())));return this.changes.forEach(((u,h)=>{const m=this.Br.get(u);if(t.push(this.Nr.removeEntry(e,u,m.readTime)),h.isValidDocument()){const p=$T(this.Nr.serializer,h);o=o.add(u.path.popLast());const _=lf(p);r+=_-m.size,t.push(this.Nr.addEntry(e,u,p))}else if(r-=m.size,this.trackRemovals){const p=$T(this.Nr.serializer,h.convertToNoDocument(ye.min()));t.push(this.Nr.addEntry(e,u,p))}})),o.forEach((u=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,u))})),t.push(this.Nr.updateMetadata(e,r)),B.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:o})=>(o.forEach(((u,h)=>{this.Br.set(u,{size:h,readTime:r.get(u).readTime})})),r)))}}function dE(s){return Vt(s,wu)}function qs(s){return Vt(s,$h)}function su(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mE(s,e){const t=e.documentKey.path.toArray();return[s,af(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pE(s,e){const t=s.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ie(t[u],r[u]),o)return o;return o=Ie(t.length,r.length),o||(o=Ie(t[t.length-2],r[r.length-2]),o||Ie(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Tu(r.mutation,o,$i.empty(),ot.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Oe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Oe()){const o=gi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((u=>{let h=uu();return u.forEach(((m,p)=>{h=h.insert(m,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const r=gi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Oe())))}populateOverlays(e,t,r){const o=[];return r.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,r,o){let u=kn();const h=vu(),m=(function(){return vu()})();return t.forEach(((p,_)=>{const T=r.get(_.key);o.has(_.key)&&(T===void 0||T.mutation instanceof qo)?u=u.insert(_.key,_):T!==void 0?(h.set(_.key,T.mutation.getFieldMask()),Tu(T.mutation,_,T.mutation.getFieldMask(),ot.now())):h.set(_.key,$i.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((_,T)=>h.set(_,T))),t.forEach(((_,T)=>m.set(_,new TC(T,h.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=vu();let o=new ut(((h,m)=>h-m)),u=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((p=>{const _=t.get(p);if(_===null)return;let T=r.get(p)||$i.empty();T=m.applyToLocalView(_,T),r.set(p,T);const S=(o.get(m.batchId)||Oe()).add(p);o=o.insert(m.batchId,S)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),_=p.key,T=p.value,S=db();T.forEach((A=>{if(!u.has(A)){const P=_b(t.get(A),r.get(A));P!==null&&S.set(A,P),u=u.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,S))}return B.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(h){return le.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):B.resolve(gi());let m=Su,p=u;return h.next((_=>B.forEach(_,((T,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(T)?B.resolve():this.remoteDocumentCache.getEntry(e,T).next((A=>{p=p.insert(T,A)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,p,_,Oe()))).next((T=>({batchId:m,changes:AR(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next((r=>{let o=uu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const u=t.collectionGroup;let h=uu();return this.indexManager.getCollectionParents(e,u).next((m=>B.forEach(m,(p=>{const _=(function(S,A){return new Nf(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,r,o).next((T=>{T.forEach(((S,A)=>{h=h.insert(S,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,o)))).next((h=>{u.forEach(((p,_)=>{const T=_.getKey();h.get(T)===null&&(h=h.insert(T,mt.newInvalidDocument(T)))}));let m=uu();return h.forEach(((p,_)=>{const T=u.get(p);T!==void 0&&Tu(T.mutation,_,$i.empty(),ot.now()),qu(t,_)&&(m=m.insert(p,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return B.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:an(o.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:kb(o.bundledQuery),readTime:an(o.readTime)}})(t)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.overlays=new ut(le.comparator),this.qr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gi();return B.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,u)=>{this.St(e,t,u)})),B.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,t,r){const o=gi(),u=t.length+1,h=new le(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===u&&p.largestBatchId>r&&o.set(p.getKey(),p)}return B.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new ut(((_,T)=>_-T));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let T=u.get(_.largestBatchId);T===null&&(T=gi(),u=u.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const m=gi(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((_,T)=>m.set(_,T))),!(m.size()>=o)););return B.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new cg(t,r));let u=this.qr.get(t);u===void 0&&(u=Oe(),this.qr.set(t,u)),this.qr.set(t,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.Qr=new Ye(Bt.$r),this.Ur=new Ye(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Bt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Bt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new le(new We([])),r=new Bt(t,e),o=new Bt(t,e+1),u=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new le(new We([])),r=new Bt(t,e),o=new Bt(t,e+1);let u=Oe();return this.Ur.forEachInRange([r,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new Bt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return le.comparator(e.key,t.key)||Ie(e.Yr,t.Yr)}static Kr(e,t){return Ie(e.Yr,t.Yr)||le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ye(Bt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new lg(u,t,r,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Bt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return B.resolve(h)}lookupMutationBatch(e,t){return B.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),u=o<0?0:o;return B.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Js:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bt(t,0),o=new Bt(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),B.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ye(Ie);return t.forEach((o=>{const u=new Bt(o,0),h=new Bt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{r=r.add(m.Yr)}))})),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;le.isDocumentKey(u)||(u=u.child(""));const h=new Bt(new le(u),0);let m=new Ye(Ie);return this.Zr.forEachWhile((p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(m=m.add(p.Yr)),!0)}),h),B.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){me(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(t.mutations,(o=>{const u=new Bt(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Bt(t,0),o=this.Zr.firstAfterOrEqual(r);return B.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.ri=e,this.docs=(function(){return new ut(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return B.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let r=kn();return t.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():mt.newInvalidDocument(o))})),B.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=kn();const h=t.path,m=new le(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:_,value:{document:T}}=p.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||Zp(O0(T),r)<=0||(o.has(T.key)||qu(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return B.resolve(u)}getAllFromCollectionGroup(e,t,r,o){de(9500)}ii(e,t){return B.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new wC(this)}getSize(e){return B.resolve(this.size)}}class wC extends Gb{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),B.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.persistence=e,this.si=new sr((t=>oa(t)),zu),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new mg,this.targetCount=0,this.ai=ca.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),B.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ca(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.Pr(t),B.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),B.waitFor(u).next((()=>o))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return B.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),B.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),B.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return B.resolve(r)}containsKey(e,t){return B.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t){this.ui={},this.overlays={},this.ci=new Mn(0),this.li=!1,this.li=!0,this.hi=new SC,this.referenceDelegate=e(this),this.Pi=new RC(this),this.indexManager=new hC,this.remoteDocumentCache=(function(o){return new IC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Pb(t),this.Ii=new EC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new AC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);const o=new CC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return B.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class CC extends M0{constructor(e){super(),this.currentSequenceNumber=e}}class Uf{constructor(e){this.persistence=e,this.Ri=new mg,this.Vi=null}static mi(e){return new Uf(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),B.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,(r=>{const o=le.fromPath(r);return this.gi(e,o).next((u=>{u||t.removeEntry(o,ye.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class uf{constructor(e,t){this.persistence=e,this.pi=new sr((r=>Wt(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=Hb(this,t)}static mi(e,t){return new uf(e,t)}Ei(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return B.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?B.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((m=>{m||(r++,u.removeEntry(h,ye.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ph(e.data.value)),t}br(e,t,r){return B.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return B.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.serializer=e}k(e,t,r,o){const u=new Sf("createOrUpgrade",t);r<1&&o>=1&&((function(p){p.createObjectStore(Bu)})(e),(function(p){p.createObjectStore(Iu,{keyPath:Pw}),p.createObjectStore(Gn,{keyPath:wT,autoIncrement:!0}).createIndex(Zs,RT,{unique:!0}),p.createObjectStore(No)})(e),gE(e),(function(p){p.createObjectStore(Gs)})(e));let h=B.resolve();return r<3&&o>=3&&(r!==0&&((function(p){p.deleteObjectStore(Vo),p.deleteObjectStore(xo),p.deleteObjectStore(Ws)})(e),gE(e)),h=h.next((()=>(function(p){const _=p.store(Ws),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ye.min().toTimestamp(),targetCount:0};return _.put(Zh,T)})(u)))),r<4&&o>=4&&(r!==0&&(h=h.next((()=>(function(p,_){return _.store(Gn).J().next((S=>{p.deleteObjectStore(Gn),p.createObjectStore(Gn,{keyPath:wT,autoIncrement:!0}).createIndex(Zs,RT,{unique:!0});const A=_.store(Gn),P=S.map((H=>A.put(H)));return B.waitFor(P)}))})(e,u)))),h=h.next((()=>{(function(p){p.createObjectStore(Oo,{keyPath:Fw})})(e)}))),r<5&&o>=5&&(h=h.next((()=>this.yi(u)))),r<6&&o>=6&&(h=h.next((()=>((function(p){p.createObjectStore(wu)})(e),this.wi(u))))),r<7&&o>=7&&(h=h.next((()=>this.Si(u)))),r<8&&o>=8&&(h=h.next((()=>this.bi(e,u)))),r<9&&o>=9&&(h=h.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(h=h.next((()=>this.Di(u)))),r<11&&o>=11&&(h=h.next((()=>{(function(p){p.createObjectStore(If,{keyPath:Hw})})(e),(function(p){p.createObjectStore(wf,{keyPath:Gw})})(e)}))),r<12&&o>=12&&(h=h.next((()=>{(function(p){const _=p.createObjectStore(Rf,{keyPath:Jw});_.createIndex(bp,Ww,{unique:!1}),_.createIndex(q0,eR,{unique:!1})})(e)}))),r<13&&o>=13&&(h=h.next((()=>(function(p){const _=p.createObjectStore($h,{keyPath:kw});_.createIndex(Vh,Uw),_.createIndex(L0,Lw)})(e))).next((()=>this.Ci(e,u))).next((()=>e.deleteObjectStore(Gs)))),r<14&&o>=14&&(h=h.next((()=>this.Fi(e,u)))),r<15&&o>=15&&(h=h.next((()=>(function(p){p.createObjectStore(eg,{keyPath:Kw,autoIncrement:!0}).createIndex(Ep,Qw,{unique:!1}),p.createObjectStore(pu,{keyPath:Yw}).createIndex(j0,Xw,{unique:!1}),p.createObjectStore(gu,{keyPath:$w}).createIndex(z0,Zw,{unique:!1})})(e)))),r<16&&o>=16&&(h=h.next((()=>{t.objectStore(pu).clear()})).next((()=>{t.objectStore(gu).clear()}))),r<17&&o>=17&&(h=h.next((()=>{(function(p){p.createObjectStore(tg,{keyPath:tR})})(e)}))),r<18&&o>=18&&g0()&&(h=h.next((()=>{t.objectStore(pu).clear()})).next((()=>{t.objectStore(gu).clear()}))),h}wi(e){let t=0;return e.store(Gs).ee(((r,o)=>{t+=lf(o)})).next((()=>{const r={byteSize:t};return e.store(wu).put(Tp,r)}))}yi(e){const t=e.store(Iu),r=e.store(Gn);return t.J().next((o=>B.forEach(o,(u=>{const h=IDBKeyRange.bound([u.userId,Js],[u.userId,u.lastAcknowledgedBatchId]);return r.J(Zs,h).next((m=>B.forEach(m,(p=>{me(p.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const _=Qs(this.serializer,p);return jb(e,u.userId,_).next((()=>{}))}))))}))))}Si(e){const t=e.store(Vo),r=e.store(Gs);return e.store(Ws).get(Zh).next((o=>{const u=[];return r.ee(((h,m)=>{const p=new We(h),_=(function(S){return[0,Wt(S)]})(p);u.push(t.get(_).next((T=>T?B.resolve():(S=>t.put({targetId:0,path:Wt(S),sequenceNumber:o.highestListenSequenceNumber}))(p))))})).next((()=>B.waitFor(u)))}))}bi(e,t){e.createObjectStore(Ru,{keyPath:qw});const r=t.store(Ru),o=new dg,u=h=>{if(o.add(h)){const m=h.lastSegment(),p=h.popLast();return r.put({collectionId:m,parent:Wt(p)})}};return t.store(Gs).ee({X:!0},((h,m)=>{const p=new We(h);return u(p.popLast())})).next((()=>t.store(No).ee({X:!0},(([h,m,p],_)=>{const T=pi(m);return u(T.popLast())}))))}Di(e){const t=e.store(xo);return t.ee(((r,o)=>{const u=hu(o),h=Mb(this.serializer,u);return t.put(h)}))}Ci(e,t){const r=t.store(Gs),o=[];return r.ee(((u,h)=>{const m=t.store($h),p=(function(S){return S.document?new le(We.fromString(S.document.name).popFirst(5)):S.noDocument?le.fromSegments(S.noDocument.path):S.unknownDocument?le.fromSegments(S.unknownDocument.path):de(36783)})(h).path.toArray(),_={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(_))})).next((()=>B.waitFor(o)))}Fi(e,t){const r=t.store(Gn),o=Kb(this.serializer),u=new pg(Uf.mi,this.serializer.yt);return r.J().next((h=>{const m=new Map;return h.forEach((p=>{let _=m.get(p.userId)??Oe();Qs(this.serializer,p).keys().forEach((T=>_=_.add(T))),m.set(p.userId,_)})),B.forEach(m,((p,_)=>{const T=new Kt(_),S=Mf.wt(this.serializer,T),A=u.getIndexManager(T),P=kf.wt(T,this.serializer,A,u.referenceDelegate);return new Qb(o,P,S,A).recalculateAndSaveOverlaysForDocumentKeys(new Sp(t,Mn.ce),p).next()}))}))}}function gE(s){s.createObjectStore(Vo,{keyPath:jw}).createIndex(Wp,zw,{unique:!0}),s.createObjectStore(xo,{keyPath:"targetId"}).createIndex(B0,Bw,{unique:!0}),s.createObjectStore(Ws)}const Ur="IndexedDbPersistence",rp=18e5,sp=5e3,ap="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",NC="main";class gg{constructor(e,t,r,o,u,h,m,p,_,T,S=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=u,this.window=h,this.document=m,this.xi=_,this.Oi=T,this.Ni=S,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!gg.v())throw new he(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _C(this,o),this.$i=t+NC,this.serializer=new Pb(p),this.Ui=new Xr(this.$i,this.Ni,new DC(this.serializer)),this.hi=new sC,this.Pi=new dC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Kb(this.serializer),this.Ii=new rC,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,T===!1&&sn(Ur,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(Z.FAILED_PRECONDITION,ap);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Mn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ah(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(rs(e))return te(Ur,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te(Ur,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return au(e).get(uo).next((t=>B.resolve(this.es(t))))}ts(e){return Ah(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,rp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Vt(t,Oo);return r.J().next((o=>{const u=this.ss(o,rp),h=o.filter((m=>u.indexOf(m)===-1));return B.forEach(h,(m=>r.delete(m.clientId))).next((()=>h))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?B.resolve(!0):au(e).get(uo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sp)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new he(Z.FAILED_PRECONDITION,ap);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ah(e).J().next((r=>this.ss(r,sp).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||h&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&te(Ur,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Bu,Oo],(e=>{const t=new Sp(e,Mn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Ah(e).J().next((t=>this.ss(t,rp).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return kf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fC(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Mf.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){te(Ur,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",u=(function(p){return p===18?rR:p===17?K0:p===16?iR:p===15?ng:p===14?G0:p===13?H0:p===12?nR:p===11?F0:void de(60245)})(this.Ni);let h;return this.Ui.runTransaction(e,o,u,(m=>(h=new Sp(m,this.ci?this.ci.next():Mn.ce),t==="readwrite-primary"?this.Hi(h).next((p=>!!p||this.Yi(h))).next((p=>{if(!p)throw sn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new he(Z.FAILED_PRECONDITION,P0);return r(h)})).next((p=>this.Xi(h).next((()=>p)))):this.Is(h).next((()=>r(h)))))).then((m=>(h.raiseOnCommittedEvent(),m)))}Is(e){return au(e).get(uo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sp)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(Z.FAILED_PRECONDITION,ap)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return au(e).put(uo,t)}static v(){return Xr.v()}Zi(e){const t=au(e);return t.get(uo).next((r=>this.es(r)?(te(Ur,"Releasing primary lease."),t.delete(uo)):B.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(sn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;p0()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return te(Ur,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return sn(Ur,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){sn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function au(s){return Vt(s,Bu)}function Ah(s){return Vt(s,Oo)}function xC(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=Oe(),o=Oe();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new _g(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return p0()?8:k0(xt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const u={result:null};return this.ys(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,t,o,r).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new VC;return this.Ss(e,t,h).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>u.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(go()<=Pe.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",_o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(go()<=Pe.DEBUG&&te("QueryEngine","Query:",_o(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(go()<=Pe.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",_o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(t))):B.resolve())}ys(e,t){if(jT(t))return B.resolve(null);let r=Ln(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Dp(t,null,"F"),r=Ln(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const h=Oe(...u);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,r).next((p=>{const _=this.Ds(t,m);return this.Cs(t,_,h,p.readTime)?this.ys(e,Dp(t,null,"F")):this.vs(e,_,t,p)}))))})))))}ws(e,t,r,o){return jT(t)||o.isEqual(ye.min())?B.resolve(null):this.ps.getDocuments(e,r).next((u=>{const h=this.Ds(t,u);return this.Cs(t,h,r,o)?B.resolve(null):(go()<=Pe.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_o(t)),this.vs(e,h,t,Cw(o,Su)).next((m=>m)))}))}Ds(e,t){let r=new Ye(hb(e));return t.forEach(((o,u)=>{qu(e,u)&&(r=r.add(u))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,r){return go()<=Pe.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",_o(t)),this.ps.getDocumentsMatchingQuery(e,t,Tn.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="LocalStore",OC=3e8;class PC{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ut(Ie),this.xs=new sr((u=>oa(u)),zu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Xb(s,e,t,r){return new PC(s,e,t,r)}async function $b(s,e){const t=we(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const h=[],m=[];let p=Oe();for(const _ of o){h.push(_.batchId);for(const T of _.mutations)p=p.add(T.key)}for(const _ of u){m.push(_.batchId);for(const T of _.mutations)p=p.add(T.key)}return t.localDocuments.getDocuments(r,p).next((_=>({Ls:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function MC(s,e){const t=we(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,_,T){const S=_.batch,A=S.keys();let P=B.resolve();return A.forEach((H=>{P=P.next((()=>T.getEntry(p,H))).next((ee=>{const X=_.docVersions.get(H);me(X!==null,48541),ee.version.compareTo(X)<0&&(S.applyToRemoteDocument(ee,_),ee.isValidDocument()&&(ee.setReadTime(_.commitVersion),T.addEntry(ee)))}))})),P.next((()=>m.mutationQueue.removeMutationBatch(p,S)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let p=Oe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(p=p.add(m.batch.mutations[_].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function Zb(s){const e=we(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function kC(s,e){const t=we(s),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((T,S)=>{const A=o.get(S);if(!A)return;m.push(t.Pi.removeMatchingKeys(u,T.removedDocuments,S).next((()=>t.Pi.addMatchingKeys(u,T.addedDocuments,S))));let P=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?P=P.withResumeToken(It.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):T.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(T.resumeToken,r)),o=o.insert(S,P),(function(ee,X,ce){return ee.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=OC?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(A,P,T)&&m.push(t.Pi.updateTargetData(u,P))}));let p=kn(),_=Oe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(UC(u,h,e.documentUpdates).next((T=>{p=T.ks,_=T.qs}))),!r.isEqual(ye.min())){const T=t.Pi.getLastRemoteSnapshotVersion(u).next((S=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(T)}return B.waitFor(m).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,p,_))).next((()=>p))})).then((u=>(t.Ms=o,u)))}function UC(s,e,t){let r=Oe(),o=Oe();return t.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let h=kn();return t.forEach(((m,p)=>{const _=u.get(m);p.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(ye.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):te(yg,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function LC(s,e){const t=we(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Js),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function BC(s,e){const t=we(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((u=>u?(o=u,B.resolve(o)):t.Pi.allocateTargetId(r).next((h=>(o=new Zi(e,h,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Up(s,e,t){const r=we(s),o=r.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!rs(h))throw h;te(yg,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function _E(s,e,t){const r=we(s);let o=ye.min(),u=Oe();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,_,T){const S=we(p),A=S.xs.get(T);return A!==void 0?B.resolve(S.Ms.get(A)):S.Pi.getTargetData(_,T)})(r,h,Ln(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,m.targetId).next((p=>{u=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,e,t?o:ye.min(),t?u:Oe()))).next((m=>(jC(r,ER(e),m),{documents:m,Qs:u})))))}function jC(s,e,t){let r=s.Os.get(e)||ye.min();t.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}class yE{constructor(){this.activeTargetIds=CR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jb{constructor(){this.Mo=new yE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="ConnectivityMonitor";class TE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){te(vE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){te(vE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih=null;function Lp(){return Ih===null?Ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ih++,"0x"+Ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="RestConnection",qC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Jh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,u){const h=Lp(),m=this.zo(e,t.toUriEncodedString());te(op,`Sending RPC '${e}' ${h}:`,m,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:_}=new URL(m),T=da(_);return this.Jo(e,m,p,r,T).then((S=>(te(op,`Received RPC '${e}' ${h}: `,S),S)),(S=>{throw sa(op,`RPC '${e}' ${h} failed with error: `,S,"url: ",m,"request:",r),S}))}Ho(e,t,r,o,u,h){return this.Go(e,t,r,o,u)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const r=qC[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class GC extends FC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,u){const h=Lp();return new Promise(((m,p)=>{const _=new A0;_.setWithCredentials(!0),_.listenOnce(I0.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Dh.NO_ERROR:const S=_.getResponseJson();te(Zt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),m(S);break;case Dh.TIMEOUT:te(Zt,`RPC '${e}' ${h} timed out`),p(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const A=_.getStatus();if(te(Zt,`RPC '${e}' ${h} failed with status:`,A,"response text:",_.getResponseText()),A>0){let P=_.getResponseJson();Array.isArray(P)&&(P=P[0]);const H=P?.error;if(H&&H.status&&H.message){const ee=(function(ce){const ue=ce.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ue)>=0?ue:Z.UNKNOWN})(H.status);p(new he(ee,H.message))}else p(new he(Z.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new he(Z.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{te(Zt,`RPC '${e}' ${h} completed.`)}}));const T=JSON.stringify(o);te(Zt,`RPC '${e}' ${h} sending request:`,o),_.send(t,"POST",T,r,15)}))}T_(e,t,r){const o=Lp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=C0(),m=R0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const T=u.join("");te(Zt,`Creating RPC '${e}' stream ${o}: ${T}`,p);const S=h.createWebChannel(T,p);this.I_(S);let A=!1,P=!1;const H=new HC({Yo:X=>{P?te(Zt,`Not sending because RPC '${e}' stream ${o} is closed:`,X):(A||(te(Zt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),A=!0),te(Zt,`RPC '${e}' stream ${o} sending:`,X),S.send(X))},Zo:()=>S.close()}),ee=(X,ce,ue)=>{X.listen(ce,(ne=>{try{ue(ne)}catch(J){setTimeout((()=>{throw J}),0)}}))};return ee(S,lu.EventType.OPEN,(()=>{P||(te(Zt,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),ee(S,lu.EventType.CLOSE,(()=>{P||(P=!0,te(Zt,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(S))})),ee(S,lu.EventType.ERROR,(X=>{P||(P=!0,sa(Zt,`RPC '${e}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),H.a_(new he(Z.UNAVAILABLE,"The operation could not be completed")))})),ee(S,lu.EventType.MESSAGE,(X=>{if(!P){const ce=X.data[0];me(!!ce,16349);const ue=ce,ne=ue?.error||ue[0]?.error;if(ne){te(Zt,`RPC '${e}' stream ${o} received error:`,ne);const J=ne.status;let ae=(function(I){const R=St[I];if(R!==void 0)return Tb(R)})(J),ge=ne.message;ae===void 0&&(ae=Z.INTERNAL,ge="Unknown error status: "+J+" with message "+ne.message),P=!0,H.a_(new he(ae,ge)),S.close()}else te(Zt,`RPC '${e}' stream ${o} received:`,ce),H.u_(ce)}})),ee(m,w0.STAT_EVENT,(X=>{X.stat===_p.PROXY?te(Zt,`RPC '${e}' stream ${o} detected buffering proxy`):X.stat===_p.NOPROXY&&te(Zt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){return typeof window<"u"?window:null}function Lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(s){return new KR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="PersistentStream";class tS{constructor(e,t,r,o,u,h,m,p){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(sn(t.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new he(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return te(EE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(te(EE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class QC extends tS{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=$R(this.serializer,e),r=(function(u){if(!("targetChange"in u))return ye.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?ye.min():h.readTime?an(h.readTime):ye.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Vp(this.serializer),t.addTarget=(function(u,h){let m;const p=h.target;if(m=ef(p)?{documents:Cb(u,p)}:{query:Db(u,p).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=QR(u,h.resumeToken);const _=Np(u,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(ye.min())>0){m.readTime=nf(u,h.snapshotVersion.toTimestamp());const _=Np(u,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const r=JR(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Vp(this.serializer),t.removeTarget=e,this.q_(t)}}class YC extends tS{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZR(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Vp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>sf(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{}class $C extends XC{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,xp(t,r),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(Z.UNKNOWN,u.toString())}))}Ho(e,t,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,xp(t,r),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ZC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sn(t),this.aa=!1):te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="RemoteStore";class JC{constructor(e,t,r,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{ga(this)&&(te(ha,"Restarting streams for network reachability change."),await(async function(p){const _=we(p);_.Ea.add(4),await Gu(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Lf(_)})(this))}))})),this.Ra=new ZC(r,o)}}async function Lf(s){if(ga(s))for(const e of s.da)await e(!0)}async function Gu(s){for(const e of s.da)await e(!1)}function nS(s,e){const t=we(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),bg(t)?Eg(t):Fo(t).O_()&&Tg(t,e))}function vg(s,e){const t=we(s),r=Fo(t);t.Ia.delete(e),r.O_()&&iS(t,e),t.Ia.size===0&&(r.O_()?r.L_():ga(t)&&t.Ra.set("Unknown"))}function Tg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fo(s).Y_(e)}function iS(s,e){s.Va.Ue(e),Fo(s).Z_(e)}function Eg(s){s.Va=new qR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Fo(s).start(),s.Ra.ua()}function bg(s){return ga(s)&&!Fo(s).x_()&&s.Ia.size>0}function ga(s){return we(s).Ea.size===0}function rS(s){s.Va=void 0}async function WC(s){s.Ra.set("Online")}async function eD(s){s.Ia.forEach(((e,t)=>{Tg(s,e)}))}async function tD(s,e){rS(s),bg(s)?(s.Ra.ha(e),Eg(s)):s.Ra.set("Unknown")}async function nD(s,e,t){if(s.Ra.set("Online"),e instanceof bb&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(r){te(ha,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cf(s,r)}else if(e instanceof kh?s.Va.Ze(e):e instanceof Eb?s.Va.st(e):s.Va.tt(e),!t.isEqual(ye.min()))try{const r=await Zb(s.localStore);t.compareTo(r)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const T=u.Ia.get(_);T&&u.Ia.set(_,T.withResumeToken(p.resumeToken,h))}})),m.targetMismatches.forEach(((p,_)=>{const T=u.Ia.get(p);if(!T)return;u.Ia.set(p,T.withResumeToken(It.EMPTY_BYTE_STRING,T.snapshotVersion)),iS(u,p);const S=new Zi(T.target,p,_,T.sequenceNumber);Tg(u,S)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){te(ha,"Failed to raise snapshot:",r),await cf(s,r)}}async function cf(s,e,t){if(!rs(e))throw e;s.Ea.add(1),await Gu(s),s.Ra.set("Offline"),t||(t=()=>Zb(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{te(ha,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Lf(s)}))}function sS(s,e){return e().catch((t=>cf(s,t,e)))}async function Bf(s){const e=we(s),t=ts(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Js;for(;iD(e);)try{const o=await LC(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,rD(e,o)}catch(o){await cf(e,o)}aS(e)&&oS(e)}function iD(s){return ga(s)&&s.Ta.length<10}function rD(s,e){s.Ta.push(e);const t=ts(s);t.O_()&&t.X_&&t.ea(e.mutations)}function aS(s){return ga(s)&&!ts(s).x_()&&s.Ta.length>0}function oS(s){ts(s).start()}async function sD(s){ts(s).ra()}async function aD(s){const e=ts(s);for(const t of s.Ta)e.ea(t.mutations)}async function oD(s,e,t){const r=s.Ta.shift(),o=ug.from(r,e,t);await sS(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Bf(s)}async function lD(s,e){e&&ts(s).X_&&await(async function(r,o){if((function(h){return BR(h)&&h!==Z.ABORTED})(o.code)){const u=r.Ta.shift();ts(r).B_(),await sS(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Bf(r)}})(s,e),aS(s)&&oS(s)}async function bE(s,e){const t=we(s);t.asyncQueue.verifyOperationInProgress(),te(ha,"RemoteStore received new credentials");const r=ga(t);t.Ea.add(3),await Gu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Lf(t)}async function uD(s,e){const t=we(s);e?(t.Ea.delete(2),await Lf(t)):e||(t.Ea.add(2),await Gu(t),t.Ra.set("Unknown"))}function Fo(s){return s.ma||(s.ma=(function(t,r,o){const u=we(t);return u.sa(),new QC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:WC.bind(null,s),t_:eD.bind(null,s),r_:tD.bind(null,s),H_:nD.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),bg(s)?Eg(s):s.Ra.set("Unknown")):(await s.ma.stop(),rS(s))}))),s.ma}function ts(s){return s.fa||(s.fa=(function(t,r,o){const u=we(t);return u.sa(),new YC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:sD.bind(null,s),r_:lD.bind(null,s),ta:aD.bind(null,s),na:oD.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Bf(s)):(await s.fa.stop(),s.Ta.length>0&&(te(ha,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,m=new Sg(e,t,h,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lS(s,e){if(sn("AsyncQueue",`${e}: ${s}`),rs(s))return new he(Z.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{static emptySet(e){return new bo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=uu(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new bo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.ga=new ut(le.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Bo{constructor(e,t,r,o,u,h,m,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,o,u){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new Bo(e,t,bo.emptySet(t),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hD{constructor(){this.queries=AE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=we(t),u=o.queries;o.queries=AE(),u.forEach(((h,m)=>{for(const p of m.Sa)p.onError(r)}))})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function AE(){return new sr((s=>cb(s)),xf)}async function fD(s,e){const t=we(s);let r=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new cD,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=lS(h,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Ag(t)}async function dD(s,e){const t=we(s),r=e.query;let o=3;const u=t.queries.get(r);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function mD(s,e){const t=we(s);let r=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(r=!0);h.wa=o}}r&&Ag(t)}function pD(s,e,t){const r=we(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);r.queries.delete(e)}function Ag(s){s.Ca.forEach((e=>{e.next()}))}var Bp,IE;(IE=Bp||(Bp={})).Ma="default",IE.Cache="cache";class gD{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Bo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.key=e}}class cS{constructor(e){this.key=e}}class _D{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=hb(e),this.tu=new bo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new SE,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,S)=>{const A=o.get(T),P=qu(this.query,S)?S:null,H=!!A&&this.mutatedKeys.has(A.key),ee=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let X=!1;A&&P?A.data.isEqual(P.data)?H!==ee&&(r.track({type:3,doc:P}),X=!0):this.su(A,P)||(r.track({type:2,doc:P}),X=!0,(p&&this.eu(P,p)>0||_&&this.eu(P,_)<0)&&(m=!0)):!A&&P?(r.track({type:0,doc:P}),X=!0):A&&!P&&(r.track({type:1,doc:A}),X=!0,(p||_)&&(m=!0)),X&&(P?(h=h.add(P),u=ee?u.add(T):u.delete(T)):(h=h.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:h,iu:r,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((T,S)=>(function(P,H){const ee=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:X})}};return ee(P)-ee(H)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,_=p!==this.Za;return this.Za=p,h.length!==0||_?{snapshot:new Bo(this.query,e.tu,u,h,e.mutatedKeys,p===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new SE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new cS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new uS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ig="SyncEngine";class yD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vD{constructor(e){this.key=e,this.hu=!1}}class TD{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new sr((m=>cb(m)),xf),this.Iu=new Map,this.Eu=new Set,this.du=new ut(le.comparator),this.Au=new Map,this.Ru=new mg,this.Vu={},this.mu=new Map,this.fu=ca.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ED(s,e,t=!0){const r=gS(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await hS(r,e,t,!0),o}async function bD(s,e){const t=gS(s);await hS(t,e,!0,!1)}async function hS(s,e,t,r){const o=await BC(s.localStore,Ln(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let m;return r&&(m=await SD(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&nS(s.remoteStore,o),m}async function SD(s,e,t,r,o){s.pu=(S,A,P)=>(async function(ee,X,ce,ue){let ne=X.view.ru(ce);ne.Cs&&(ne=await _E(ee.localStore,X.query,!1).then((({documents:x})=>X.view.ru(x,ne))));const J=ue&&ue.targetChanges.get(X.targetId),ae=ue&&ue.targetMismatches.get(X.targetId)!=null,ge=X.view.applyChanges(ne,ee.isPrimaryClient,J,ae);return RE(ee,X.targetId,ge.au),ge.snapshot})(s,S,A,P);const u=await _E(s.localStore,e,!0),h=new _D(e,u.Qs),m=h.ru(u.documents),p=Hu.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,p);RE(s,t,_.au);const T=new yD(e,t,h);return s.Tu.set(e,T),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),_.snapshot}async function AD(s,e,t){const r=we(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((h=>!xf(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Up(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&vg(r.remoteStore,o.targetId),jp(r,o.targetId)})).catch(pa)):(jp(r,o.targetId),await Up(r.localStore,o.targetId,!0))}async function ID(s,e){const t=we(s),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),vg(t.remoteStore,r.targetId))}async function fS(s,e){const t=we(s);try{const r=await kC(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=t.Au.get(u);h&&(me(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?me(h.hu,14607):o.removedDocuments.size>0&&(me(h.hu,42227),h.hu=!1))})),await jf(t,r,e)}catch(r){await pa(r)}}function wE(s,e,t){const r=we(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((u,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const p=we(h);p.onlineState=m;let _=!1;p.queries.forEach(((T,S)=>{for(const A of S.Sa)A.va(m)&&(_=!0)})),_&&Ag(p)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wD(s,e,t){const r=we(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),u=o&&o.key;if(u){let h=new ut(le.comparator);h=h.insert(u,mt.newNoDocument(u,ye.min()));const m=Oe().add(u),p=new Pf(ye.min(),new Map,new ut(Ie),h,m);await fS(r,p),r.du=r.du.remove(u),r.Au.delete(e),wg(r)}else await Up(r.localStore,e,!1).then((()=>jp(r,e,t))).catch(pa)}async function RD(s,e){const t=we(s),r=e.batch.batchId;try{const o=await MC(t.localStore,e);mS(t,r,null),dS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await jf(t,o)}catch(o){await pa(o)}}async function CD(s,e,t){const r=we(s);try{const o=await(function(h,m){const p=we(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return p.mutationQueue.lookupMutationBatch(_,m).next((S=>(me(S!==null,37113),T=S.keys(),p.mutationQueue.removeMutationBatch(_,S)))).next((()=>p.mutationQueue.performConsistencyCheck(_))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(_,T,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>p.localDocuments.getDocuments(_,T)))}))})(r.localStore,e);mS(r,e,t),dS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await jf(r,o)}catch(o){await pa(o)}}function dS(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function mS(s,e,t){const r=we(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function jp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||pS(s,r)}))}function pS(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(vg(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),wg(s))}function RE(s,e,t){for(const r of t)r instanceof uS?(s.Ru.addReference(r.key,e),DD(s,r)):r instanceof cS?(te(Ig,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||pS(s,r.key)):de(19791,{wu:r})}function DD(s,e){const t=e.key,r=t.path.canonicalString();s.du.get(t)||s.Eu.has(r)||(te(Ig,"New document in limbo: "+t),s.Eu.add(r),wg(s))}function wg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new le(We.fromString(e)),r=s.fu.next();s.Au.set(r,new vD(t)),s.du=s.du.insert(t,r),nS(s.remoteStore,new Zi(Ln(ag(t.path)),r,"TargetPurposeLimboResolution",Mn.ce))}}async function jf(s,e,t){const r=we(s),o=[],u=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,p)=>{h.push(r.pu(p,e,t).then((_=>{if((_||t)&&r.isPrimaryClient){const T=_?!_.fromCache:t?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(_){o.push(_);const T=_g.As(p.targetId,_);u.push(T)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(p,_){const T=we(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>B.forEach(_,(A=>B.forEach(A.Es,(P=>T.persistence.referenceDelegate.addReference(S,A.targetId,P))).next((()=>B.forEach(A.ds,(P=>T.persistence.referenceDelegate.removeReference(S,A.targetId,P)))))))))}catch(S){if(!rs(S))throw S;te(yg,"Failed to update sequence numbers: "+S)}for(const S of _){const A=S.targetId;if(!S.fromCache){const P=T.Ms.get(A),H=P.snapshotVersion,ee=P.withLastLimboFreeSnapshotVersion(H);T.Ms=T.Ms.insert(A,ee)}}})(r.localStore,u))}async function ND(s,e){const t=we(s);if(!t.currentUser.isEqual(e)){te(Ig,"User change. New user:",e.toKey());const r=await $b(t.localStore,e);t.currentUser=e,(function(u,h){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new he(Z.CANCELLED,h))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jf(t,r.Ls)}}function xD(s,e){const t=we(s),r=t.Au.get(e);if(r&&r.hu)return Oe().add(r.key);{let o=Oe();const u=t.Iu.get(e);if(!u)return o;for(const h of u){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function gS(s){const e=we(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=fS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wD.bind(null,e),e.Pu.H_=mD.bind(null,e.eventManager),e.Pu.yu=pD.bind(null,e.eventManager),e}function VD(s){const e=we(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CD.bind(null,e),e}class Pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wb(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Xb(this.persistence,new Yb,e.initialUser,this.serializer)}Cu(e){return new pg(Uf.mi,this.serializer)}Du(e){return new Jb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pu.provider={build:()=>new Pu};class OD extends Pu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){me(this.persistence.referenceDelegate instanceof uf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Fb(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new pg((r=>uf.mi(r,t)),this.serializer)}}class PD extends Pu{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await VD(this.xu.syncEngine),await Bf(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Xb(this.persistence,new Yb,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new Fb(r,e.asyncQueue,t)}Mu(e,t){const r=new Vw(t,this.persistence);return new xw(e.asyncQueue,r)}Cu(e){const t=xC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new gg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,KC(),Lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Jb}}class hf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ND.bind(null,this.syncEngine),await uD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hD})()}createDatastore(e){const t=Wb(e.databaseInfo.databaseId),r=(function(u){return new GC(u)})(e.databaseInfo);return(function(u,h,m,p){return new $C(u,h,m,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,u,h,m){return new JC(r,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>wE(this.syncEngine,t,0)),(function(){return TE.v()?new TE:new zC})())}createSyncEngine(e,t){return(function(o,u,h,m,p,_,T){const S=new TD(o,u,h,m,p,_);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=we(t);te(ha,"RemoteStore shutting down."),r.Ea.add(5),await Gu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hf.provider={build:()=>new hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="FirestoreClient";class kD{constructor(e,t,r,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Kt.UNAUTHENTICATED,this.clientId=x0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async h=>{te(ns,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(te(ns,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=lS(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function lp(s,e){s.asyncQueue.verifyOperationInProgress(),te(ns,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await $b(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function CE(s,e){s.asyncQueue.verifyOperationInProgress();const t=await UD(s);te(ns,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>bE(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>bE(e.remoteStore,o))),s._onlineComponents=e}async function UD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){te(ns,"Using user provided OfflineComponentProvider");try{await lp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;sa("Error using user provided cache. Falling back to memory cache: "+t),await lp(s,new Pu)}}else te(ns,"Using default OfflineComponentProvider"),await lp(s,new OD(void 0));return s._offlineComponents}async function LD(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(te(ns,"Using user provided OnlineComponentProvider"),await CE(s,s._uninitializedComponentsProvider._online)):(te(ns,"Using default OnlineComponentProvider"),await CE(s,new hf))),s._onlineComponents}async function BD(s){const e=await LD(s),t=e.eventManager;return t.onListen=ED.bind(null,e.syncEngine),t.onUnlisten=AD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ID.bind(null,e.syncEngine),t}function jD(s,e,t={}){const r=new Yr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,p,_){const T=new MD({next:A=>{T.Nu(),h.enqueueAndForget((()=>dD(u,S))),A.fromCache&&p.source==="server"?_.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),S=new gD(m,T,{includeMetadataChanges:!0,qa:!0});return fD(u,S)})(await BD(s),s.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="firestore.googleapis.com",NE=!0;class xE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yS,this.ssl=NE}else this.host=e.host,this.ssl=e.ssl??NE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mC)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Iw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_S(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rg{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new pw;switch(r.type){case"firstParty":return new vw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=DE.get(t);r&&(te("ComponentProvider","Removing Datastore"),DE.delete(t),r.terminate())})(this),Promise.resolve()}}function zD(s,e,t,r={}){s=Kh(s,Rg);const o=da(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(Gp(`https://${m}`),Kp("Firestore",!0)),u.host!==yS&&u.host!==m&&sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:r};if(!na(p,h)&&(s._setSettings(p),r.mockUserToken)){let _,T;if(typeof r.mockUserToken=="string")_=r.mockUserToken,T=Kt.MOCK_USER;else{_=d0(r.mockUserToken,s._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Kt(S)}s._authCredentials=new gw(new N0(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zf(this.firestore,e,this._query)}}class Un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new So(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}toJSON(){return{type:Un._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Lu(t,Un._jsonSchema))return new Un(e,r||null,new le(We.fromString(t.referencePath)))}}Un._jsonSchemaVersion="firestore/documentReference/1.0",Un._jsonSchema={type:At("string",Un._jsonSchemaVersion),referencePath:At("string")};class So extends zf{constructor(e,t,r){super(e,t,ag(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new le(e))}withConverter(e){return new So(this.firestore,e,this._path)}}function qD(s,e,...t){if(s=is(s),s instanceof Rg){const r=We.fromString(e,...t);return ET(r),new So(s,null,r)}{if(!(s instanceof Un||s instanceof So))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(We.fromString(e,...t));return ET(r),new So(s.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="AsyncQueue";class OE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eS(this,"async_queue_retry"),this._c=()=>{const r=Lh();r&&te(VE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Yr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rs(e))throw e;te(VE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,sn("INTERNAL UNHANDLED ERROR: ",PE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Sg.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&de(47125,{Pc:PE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function PE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Cg extends Rg{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new OE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OE(e),this._firestoreClient=void 0,await e}}}function FD(s,e){const t=typeof s=="object"?s:Xp(),r=typeof s=="string"?s:Jh,o=bf(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=c0("firestore");u&&zD(o,...u)}return o}function HD(s){if(s._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||vS(s),s._firestoreClient}function vS(s){const e=s._freezeSettings(),t=(function(o,u,h,m){return new oR(o,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,_S(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new kD(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}function GD(s,e){sa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return KD(s,hf.provider,{build:r=>new PD(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function KD(s,e,t){if((s=Kh(s,Cg))._firestoreClient||s._terminated)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new he(Z.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},vS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mi(It.fromBase64String(e))}catch(t){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mi(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,mi._jsonSchema))return mi.fromBase64String(e.bytes)}}mi._jsonSchemaVersion="firestore/bytes/1.0",mi._jsonSchema={type:At("string",mi._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$r._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,$r._jsonSchema))return new $r(e.latitude,e.longitude)}}$r._jsonSchemaVersion="firestore/geoPoint/1.0",$r._jsonSchema={type:At("string",$r._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,Zr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Zr(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zr._jsonSchemaVersion="firestore/vectorValue/1.0",Zr._jsonSchema={type:At("string",Zr._jsonSchemaVersion),vectorValues:At("object")};const QD=new RegExp("[~\\*/\\[\\]]");function YD(s,e,t){if(e.search(QD)>=0)throw ME(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s);try{return new TS(...e.split("."))._internalPath}catch{throw ME(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s)}}function ME(s,e,t,r,o){let u=`Function ${e}() called with invalid data`;u+=". ";let h="";return new he(Z.INVALID_ARGUMENT,u+s+h)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class XD extends ES{data(){return super.data()}}function bS(s,e){return typeof e=="string"?YD(s,e):e instanceof TS?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZD{convertValue(e,t="none"){switch(Wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ju(e,((o,u)=>{r[o]=this.convertValue(u,t)})),r}convertVectorValue(e){const t=e.fields?.[Du].arrayValue?.values?.map((r=>at(r.doubleValue)));return new Zr(t)}convertGeoPoint(e){return new $r(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Cf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cu(e));default:return null}}convertTimestamp(e){const t=tr(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=We.fromString(e);me(Ob(r),9688,{name:e});const o=new aa(r.get(1),r.get(3)),u=new le(r.popFirst(5));return o.isEqual(t)||sn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class wh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ao extends ES{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(bS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ao._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ao._jsonSchema={type:At("string",Ao._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class Bh extends Ao{data(e={}){return super.data(e)}}class Io{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new wh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Bh(this._firestore,this._userDataWriter,r.key,r,new wh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const p=new Bh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new wh(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new Bh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new wh(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,T=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),T=h.indexOf(m.doc.key)),{type:JD(m.type),doc:p,oldIndex:_,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=x0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function JD(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:s})}}Io._jsonSchemaVersion="firestore/querySnapshot/1.0",Io._jsonSchema={type:At("string",Io._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class WD extends ZD{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}function eN(s){s=Kh(s,zf);const e=Kh(s.firestore,Cg),t=HD(e),r=new WD(e);return $D(s._query),jD(t,s._query).then((o=>new Io(e,r,s,o)))}(function(e,t=!0){(function(o){zo=o})(ma),ia(new Jr("firestore",((r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new Cg(new _w(r.getProvider("auth-internal")),new Tw(h,r.getProvider("app-check-internal")),(function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aa(_.options.projectId,T)})(h,o),h);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),_i(_T,yT,e),_i(_T,yT,"esm2020")})();var tN="firebase",nN="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i(tN,nN,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="firebasestorage.googleapis.com",iN="storageBucket",rN=120*1e3,sN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends bi{constructor(e,t,r=0){super(up(e),`Firebase Storage: ${t} (${up(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Si.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return up(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ei;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ei||(Ei={}));function up(s){return"storage/"+s}function aN(){const s="An unknown error occurred, please check the error payload for server response.";return new Si(Ei.UNKNOWN,s)}function oN(){return new Si(Ei.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lN(){return new Si(Ei.CANCELED,"User canceled the upload/download.")}function uN(s){return new Si(Ei.INVALID_URL,"Invalid URL '"+s+"'.")}function cN(s){return new Si(Ei.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function kE(s){return new Si(Ei.INVALID_ARGUMENT,s)}function AS(){return new Si(Ei.APP_DELETED,"The Firebase app was deleted.")}function hN(s){return new Si(Ei.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Yn.makeFromUrl(e,t)}catch{return new Yn(e,"")}if(r.path==="")return r;throw cN(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function _(J){J.path_=decodeURIComponent(J.path)}const T="v[A-Za-z0-9_]+",S=t.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",P=new RegExp(`^https?://${S}/${T}/b/${o}/o${A}`,"i"),H={bucket:1,path:3},ee=t===SS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,X="([^?#]*)",ce=new RegExp(`^https?://${ee}/${o}/${X}`,"i"),ne=[{regex:m,indices:p,postModify:u},{regex:P,indices:H,postModify:_},{regex:ce,indices:{bucket:1,path:2},postModify:_}];for(let J=0;J<ne.length;J++){const ae=ne[J],ge=ae.regex.exec(e);if(ge){const x=ge[ae.indices.bucket];let I=ge[ae.indices.path];I||(I=""),r=new Yn(x,I),ae.postModify(r);break}}if(r==null)throw uN(e);return r}}class fN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(s,e,t){let r=1,o=null,u=null,h=!1,m=0;function p(){return m===2}let _=!1;function T(...X){_||(_=!0,e.apply(null,X))}function S(X){o=setTimeout(()=>{o=null,s(P,p())},X)}function A(){u&&clearTimeout(u)}function P(X,...ce){if(_){A();return}if(X){A(),T.call(null,X,...ce);return}if(p()||h){A(),T.call(null,X,...ce);return}r<64&&(r*=2);let ne;m===1?(m=2,ne=0):ne=(r+Math.random())*1e3,S(ne)}let H=!1;function ee(X){H||(H=!0,A(),!_&&(o!==null?(X||(m=2),clearTimeout(o),S(0)):X||(m=1)))}return S(0),u=setTimeout(()=>{h=!0,ee(!0)},t),ee}function mN(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(s){return s!==void 0}function UE(s,e,t,r){if(r<e)throw kE(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>t)throw kE(`Invalid value for '${s}'. Expected ${t} or less.`)}function gN(s){const e=encodeURIComponent;let t="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var ff;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(ff||(ff={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,t,r,o,u,h,m,p,_,T,S,A=!0,P=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=T,this.connectionFactory_=S,this.retry=A,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,ee)=>{this.resolve_=H,this.reject_=ee,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Rh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=m=>{const p=m.loaded,_=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,_)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const m=u.getErrorCode()===ff.NO_ERROR,p=u.getStatus();if(!m||_N(p,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===ff.ABORT;r(!1,new Rh(!1,null,T));return}const _=this.successCodes_.indexOf(p)!==-1;r(!0,new Rh(_,u))})},t=(r,o)=>{const u=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());pN(p)?u(p):u()}catch(p){h(p)}else if(m!==null){const p=aN();p.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,p)):h(p)}else if(o.canceled){const p=this.appDelete_?AS():lN();h(p)}else{const p=oN();h(p)}};this.canceled_?t(!1,new Rh(!1,null,!0)):this.backoffId_=dN(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Rh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function vN(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function TN(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function EN(s,e){e&&(s["X-Firebase-GMPID"]=e)}function bN(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function SN(s,e,t,r,o,u,h=!0,m=!1){const p=gN(s.urlParams),_=s.url+p,T=Object.assign({},s.headers);return EN(T,e),vN(T,t),TN(T,u),bN(T,r),new yN(_,s.method,T,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function IN(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this._service=e,t instanceof Yn?this._location=t:this._location=Yn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new df(e,t)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IN(this._location.path)}get storage(){return this._service}get parent(){const e=AN(this._location.path);if(e===null)return null;const t=new Yn(this._location.bucket,e);return new df(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw hN(e)}}function LE(s,e){const t=e?.[iN];return t==null?null:Yn.makeFromBucketSpec(t,s)}function wN(s,e,t,r={}){s.host=`${e}:${t}`;const o=da(e);o&&(Gp(`https://${s.host}/b`),Kp("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=r;u&&(s._overrideAuthToken=typeof u=="string"?u:d0(u,s.app.options.projectId))}class RN{constructor(e,t,r,o,u,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=SS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rN,this._maxUploadRetryTime=sN,this._requests=new Set,o!=null?this._bucket=Yn.makeFromBucketSpec(o,this._host):this._bucket=LE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=LE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new df(this,e)}_makeRequest(e,t,r,o,u=!0){if(this._deleted)return new fN(AS());{const h=SN(e,this._appId,r,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const BE="@firebase/storage",jE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="storage";function CN(s=Xp(),e){s=is(s);const r=bf(s,IS).getImmediate({identifier:e}),o=c0("storage");return o&&DN(r,...o),r}function DN(s,e,t,r={}){wN(s,e,t,r)}function NN(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new RN(t,r,o,e,ma)}function xN(){ia(new Jr(IS,NN,"PUBLIC").setMultipleInstances(!0)),_i(BE,jE,""),_i(BE,jE,"esm2020")}xN();function wS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VN=wS,RS=new ku("auth","Firebase",wS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new Qp("@firebase/auth");function ON(s,...e){mf.logLevel<=Pe.WARN&&mf.warn(`Auth (${ma}): ${s}`,...e)}function jh(s,...e){mf.logLevel<=Pe.ERROR&&mf.error(`Auth (${ma}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(s,...e){throw Dg(s,...e)}function yi(s,...e){return Dg(s,...e)}function CS(s,e,t){const r={...VN(),[e]:t};return new ku("auth","Firebase",r).create(e,{appName:s.name})}function ta(s){return CS(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dg(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return RS.create(s,...e)}function Se(s,e,...t){if(!s)throw Dg(e,...t)}function Ji(s){const e="INTERNAL ASSERTION FAILED: "+s;throw jh(e),new Error(e)}function rr(s,e){s||Ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(){return typeof self<"u"&&self.location?.href||""}function PN(){return zE()==="http:"||zE()==="https:"}function zE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PN()||$I()||"connection"in navigator)?navigator.onLine:!0}function kN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,rr(t>e,"Short delay should be less than long delay!"),this.isMobile=YI()||ZI()}get(){return MN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(s,e){rr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BN=new Ku(3e4,6e4);function xg(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ho(s,e,t,r,o={}){return NS(s,o,async()=>{let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});const m=Uu({key:s.config.apiKey,...h}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:p,...u};return XI()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&da(s.emulatorConfig.host)&&(_.credentials="include"),DS.fetch()(await xS(s,s.config.apiHost,t,m),_)})}async function NS(s,e,t){s._canInitEmulator=!1;const r={...UN,...e};try{const o=new zN(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Ch(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[p,_]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ch(s,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Ch(s,"email-already-in-use",h);if(p==="USER_DISABLED")throw Ch(s,"user-disabled",h);const T=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw CS(s,T,_);ir(s,T)}}catch(o){if(o instanceof bi)throw o;ir(s,"network-request-failed",{message:String(o)})}}async function jN(s,e,t,r,o={}){const u=await Ho(s,e,t,r,o);return"mfaPendingCredential"in u&&ir(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function xS(s,e,t,r){const o=`${e}${t}?${r}`,u=s,h=u.config.emulator?Ng(s.config,o):`${s.config.apiScheme}://${o}`;return LN.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}class zN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(yi(this.auth,"network-request-failed")),BN.get())})}}function Ch(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=yi(s,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(s,e){return Ho(s,"POST","/v1/accounts:delete",e)}async function pf(s,e){return Ho(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FN(s,e=!1){const t=is(s),r=await t.getIdToken(e),o=Vg(r);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:r,authTime:Eu(cp(o.auth_time)),issuedAtTime:Eu(cp(o.iat)),expirationTime:Eu(cp(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function cp(s){return Number(s)*1e3}function Vg(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const o=o0(t);return o?JSON.parse(o):(jh("Failed to decode base64 JWT payload"),null)}catch(o){return jh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function qE(s){const e=Vg(s);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof bi&&HN(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function HN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eu(this.lastLoginAt),this.creationTime=Eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gf(s){const e=s.auth,t=await s.getIdToken(),r=await Mu(s,pf(e,{idToken:t}));Se(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?VS(o.providerUserInfo):[],h=QN(s.providerData,u),m=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!h?.length,_=m?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new qp(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(s,T)}async function KN(s){const e=is(s);await gf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QN(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function VS(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(s,e){const t=await NS(s,{},async()=>{const r=Uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=await xS(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:r};return s.emulatorConfig&&da(s.emulatorConfig.host)&&(p.credentials="include"),DS.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function XN(s,e){return Ho(s,"POST","/v2/accounts:revokeToken",xg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=qE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:u}=await YN(e,t);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:u}=t,h=new wo;return r&&(Se(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Se(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wo,this.toJSON())}_performRefresh(){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(s,e){Se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new GN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Mu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FN(this,e)}reload(){return KN(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await gf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(ta(this.auth));const e=await this.getIdToken();return await Mu(this,qN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,p=t._redirectEventId??void 0,_=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:S,emailVerified:A,isAnonymous:P,providerData:H,stsTokenManager:ee}=t;Se(S&&ee,e,"internal-error");const X=wo.fromJSON(this.name,ee);Se(typeof S=="string",e,"internal-error"),Lr(r,e.name),Lr(o,e.name),Se(typeof A=="boolean",e,"internal-error"),Se(typeof P=="boolean",e,"internal-error"),Lr(u,e.name),Lr(h,e.name),Lr(m,e.name),Lr(p,e.name),Lr(_,e.name),Lr(T,e.name);const ce=new Xn({uid:S,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:P,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:X,createdAt:_,lastLoginAt:T});return H&&Array.isArray(H)&&(ce.providerData=H.map(ue=>({...ue}))),p&&(ce._redirectEventId=p),ce}static async _fromIdTokenResponse(e,t,r=!1){const o=new wo;o.updateFromServerResponse(t);const u=new Xn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await gf(u),u}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?VS(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new wo;m.updateFromIdToken(r);const p=new Xn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new qp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,_),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=new Map;function Wi(s){rr(s instanceof Function,"Expected a class definition");let e=FE.get(s);return e?(rr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,FE.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OS.type="NONE";const HE=OS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(s,e,t){return`firebase:${s}:${e}:${t}`}class Ro{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=zh(this.userKey,o.apiKey,u),this.fullPersistenceKey=zh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pf(this.auth,{idToken:e}).catch(()=>{});return t?Xn._fromGetAccountInfoResponse(this.auth,t,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ro(Wi(HE),e,r);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||Wi(HE);const h=zh(r,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const T=await _._get(h);if(T){let S;if(typeof T=="string"){const A=await pf(e,{idToken:T}).catch(()=>{});if(!A)break;S=await Xn._fromGetAccountInfoResponse(e,A,T)}else S=Xn._fromJSON(e,T);_!==u&&(m=S),u=_;break}}catch{}const p=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Ro(u,e,r):(u=p[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==u)try{await _._remove(h)}catch{}})),new Ro(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(US(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BS(e))return"Blackberry";if(jS(e))return"Webos";if(MS(e))return"Safari";if((e.includes("chrome/")||kS(e))&&!e.includes("edge/"))return"Chrome";if(LS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function PS(s=xt()){return/firefox\//i.test(s)}function MS(s=xt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kS(s=xt()){return/crios\//i.test(s)}function US(s=xt()){return/iemobile/i.test(s)}function LS(s=xt()){return/android/i.test(s)}function BS(s=xt()){return/blackberry/i.test(s)}function jS(s=xt()){return/webos/i.test(s)}function Og(s=xt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function $N(s=xt()){return Og(s)&&!!window.navigator?.standalone}function ZN(){return JI()&&document.documentMode===10}function zS(s=xt()){return Og(s)||LS(s)||jS(s)||BS(s)||/windows phone/i.test(s)||US(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(s,e=[]){let t;switch(s){case"Browser":t=GE(xt());break;case"Worker":t=`${GE(xt())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ma}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((h,m)=>{try{const p=e(u);h(p)}catch(p){m(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(s,e={}){return Ho(s,"GET","/v2/passwordPolicy",xg(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=6;class t2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??e2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KE(this),this.idTokenSubscription=new KE(this),this.beforeStateQueue=new JN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pf(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Kn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(ta(this));const t=e?is(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(ta(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(ta(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WN(this),t=new t2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ku("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await XN(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wi(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[Wi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ON(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Pg(s){return is(s)}class KE{constructor(e){this.auth=e,this.observer=null,this.addObserver=r1(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function i2(s){Mg=s}function r2(s){return Mg.loadJS(s)}function s2(){return Mg.gapiScript}function a2(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(s,e){const t=bf(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(na(u,e??{}))return o;ir(o,"already-initialized")}return t.initialize({options:e})}function l2(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Wi);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function u2(s,e,t){const r=Pg(s);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=FS(e),{host:h,port:m}=c2(e),p=m===null?"":`:${m}`,_={url:`${u}//${h}${p}/`},T=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(na(_,r.config.emulator)&&na(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,da(h)?(Gp(`${u}//${h}${p}`),Kp("Auth",!0)):h2()}function FS(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function c2(s){const e=FS(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:QE(r.substr(u.length+1))}}else{const[u,h]=r.split(":");return{host:u,port:QE(h)}}}function QE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function h2(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ji("not implemented")}_getIdTokenResponse(e){return Ji("not implemented")}_linkToIdToken(e,t){return Ji("not implemented")}_getReauthenticationResolver(e){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(s,e){return jN(s,"POST","/v1/accounts:signInWithIdp",xg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="http://localhost";class fa extends HS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=t;if(!r||!o)return null;const h=new fa(r,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Co(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Co(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Co(e,t)}buildRequest(){const e={requestUri:f2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Uu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends GS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Qu{constructor(){super("facebook.com")}static credential(e){return fa._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fa._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return zr.credential(t,r)}catch{return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com";zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Qu{constructor(){super("github.com")}static credential(e){return fa._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Qu{constructor(){super("twitter.com")}static credential(e,t){return fa._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Fr.credential(t,r)}catch{return null}}}Fr.TWITTER_SIGN_IN_METHOD="twitter.com";Fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const u=await Xn._fromIdTokenResponse(e,r,o),h=YE(r);return new jo({user:u,providerId:h,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=YE(r);return new jo({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function YE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends bi{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,_f.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new _f(e,t,r,o)}}function KS(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?_f._fromErrorAndOperation(s,u,e,r):u})}async function d2(s,e,t=!1){const r=await Mu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return jo._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(s,e,t=!1){const{auth:r}=s;if(Kn(r.app))return Promise.reject(ta(r));const o="reauthenticate";try{const u=await Mu(s,KS(r,o,e,s),t);Se(u.idToken,r,"internal-error");const h=Vg(u.idToken);Se(h,r,"internal-error");const{sub:m}=h;return Se(s.uid===m,r,"user-mismatch"),jo._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ir(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(s,e,t=!1){if(Kn(s.app))return Promise.reject(ta(s));const r="signIn",o=await KS(s,r,e),u=await jo._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(u.user),u}function g2(s,e,t,r){return is(s).onIdTokenChanged(e,t,r)}function _2(s,e,t){return is(s).beforeAuthStateChanged(e,t)}const yf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yf,"1"),this.storage.removeItem(yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=1e3,v2=10;class YS extends QS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!t&&this.localCache[r]===h||this.notifyListeners(r,h)},u=this.storage.getItem(r);ZN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,v2):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}YS.type="LOCAL";const T2=YS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS extends QS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XS.type="SESSION";const $S=XS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new qf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(h).map(async _=>_(t.origin,u)),p=await E2(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,p)=>{const _=kg("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(S){const A=S;if(A.data.eventId===_)switch(A.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function S2(s){vi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function A2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I2(){return navigator?.serviceWorker?.controller||null}function w2(){return ZS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="firebaseLocalStorageDb",R2=1,vf="firebaseLocalStorage",WS="fbase_key";class Yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ff(s,e){return s.transaction([vf],e?"readwrite":"readonly").objectStore(vf)}function C2(){const s=indexedDB.deleteDatabase(JS);return new Yu(s).toPromise()}function Fp(){const s=indexedDB.open(JS,R2);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(vf,{keyPath:WS})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(vf)?e(r):(r.close(),await C2(),e(await Fp()))})})}async function XE(s,e,t){const r=Ff(s,!0).put({[WS]:e,value:t});return new Yu(r).toPromise()}async function D2(s,e){const t=Ff(s,!1).get(e),r=await new Yu(t).toPromise();return r===void 0?null:r.value}function $E(s,e){const t=Ff(s,!0).delete(e);return new Yu(t).toPromise()}const N2=800,x2=3;class eA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>x2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qf._getInstance(w2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await A2(),!this.activeServiceWorker)return;this.sender=new b2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||I2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fp();return await XE(e,yf,"1"),await $E(e,yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>XE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>D2(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$E(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ff(o,!1).getAll();return new Yu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eA.type="LOCAL";const V2=eA;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(s,e){return e?Wi(e):(Se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends HS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function P2(s){return p2(s.auth,new Ug(s),s.bypassAuthState)}function M2(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),m2(t,new Ug(s),s.bypassAuthState)}async function k2(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),d2(t,new Ug(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P2;case"linkViaPopup":case"linkViaRedirect":return k2;case"reauthViaPopup":case"reauthViaRedirect":return M2;default:ir(this.auth,"internal-error")}}resolve(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new Ku(2e3,1e4);class Eo extends tA{constructor(e,t,r,o,u){super(e,t,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){rr(this.filter.length===1,"Popup operations only handle one event");const e=kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,U2.get())};e()}}Eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="pendingRedirect",qh=new Map;class B2 extends tA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=qh.get(this.auth._key());if(!e){try{const r=await j2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}qh.set(this.auth._key(),e)}return this.bypassAuthState||qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function j2(s,e){const t=F2(e),r=q2(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function z2(s,e){qh.set(s._key(),e)}function q2(s){return Wi(s._redirectPersistence)}function F2(s){return zh(L2,s.config.apiKey,s.name)}async function H2(s,e,t=!1){if(Kn(s.app))return Promise.reject(ta(s));const r=Pg(s),o=O2(r,e),h=await new B2(r,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=600*1e3;class K2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Q2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!nA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=G2&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZE(e))}saveEventToCache(e){this.cachedEventUids.add(ZE(e)),this.lastProcessedEventTime=Date.now()}}function ZE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function nA({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function Q2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nA(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(s,e={}){return Ho(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$2=/^https?/;async function Z2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await Y2(s);for(const t of e)try{if(J2(t))return}catch{}ir(s,"unauthorized-domain")}function J2(s){const e=zp(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===r}if(!$2.test(t))return!1;if(X2.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=new Ku(3e4,6e4);function JE(){const s=vi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function ex(s){return new Promise((e,t)=>{function r(){JE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JE(),t(yi(s,"network-request-failed"))},timeout:W2.get()})}if(vi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vi().gapi?.load)r();else{const o=a2("iframefcb");return vi()[o]=()=>{gapi.load?r():t(yi(s,"network-request-failed"))},r2(`${s2()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw Fh=null,e})}let Fh=null;function tx(s){return Fh=Fh||ex(s),Fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Ku(5e3,15e3),ix="__/auth/iframe",rx="emulator/auth/iframe",sx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ax=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ox(s){const e=s.config;Se(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Ng(e,rx):`https://${s.config.authDomain}/${ix}`,r={apiKey:e.apiKey,appName:s.name,v:ma},o=ax.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${Uu(r).slice(1)}`}async function lx(s){const e=await tx(s),t=vi().gapi;return Se(t,s,"internal-error"),e.open({where:document.body,url:ox(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sx,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const h=yi(s,"network-request-failed"),m=vi().setTimeout(()=>{u(h)},nx.get());function p(){vi().clearTimeout(m),o(r)}r.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cx=500,hx=600,fx="_blank",dx="http://localhost";class WE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mx(s,e,t,r=cx,o=hx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p={...ux,width:r.toString(),height:o.toString(),top:u,left:h},_=xt().toLowerCase();t&&(m=kS(_)?fx:t),PS(_)&&(e=e||dx,p.scrollbars="yes");const T=Object.entries(p).reduce((A,[P,H])=>`${A}${P}=${H},`,"");if($N(_)&&m!=="_self")return px(e||"",m),new WE(null);const S=window.open(e||"",m,T);Se(S,s,"popup-blocked");try{S.focus()}catch{}return new WE(S)}function px(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="__/auth/handler",_x="emulator/auth/handler",yx=encodeURIComponent("fac");async function e0(s,e,t,r,o,u){Se(s.config.authDomain,s,"auth-domain-config-required"),Se(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:ma,eventId:o};if(e instanceof GS){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",i1(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))h[T]=S}if(e instanceof Qu){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(h.scopes=T.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await s._getAppCheckToken(),_=p?`#${yx}=${encodeURIComponent(p)}`:"";return`${vx(s)}?${Uu(m).slice(1)}${_}`}function vx({config:s}){return s.emulator?Ng(s,_x):`https://${s.authDomain}/${gx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="webStorageSupport";class Tx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$S,this._completeRedirectFn=H2,this._overrideRedirectResult=z2}async _openPopup(e,t,r,o){rr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await e0(e,t,r,zp(),o);return mx(e,u,kg())}async _openRedirect(e,t,r,o){await this._originValidation(e);const u=await e0(e,t,r,zp(),o);return S2(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(rr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await lx(e),r=new K2(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hp,{type:hp},o=>{const u=o?.[0]?.[hp];u!==void 0&&t(!!u),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Z2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zS()||MS()||Og()}}const Ex=Tx;var t0="@firebase/auth",n0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ax(s){ia(new Jr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=r.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qS(s)},_=new n2(r,o,u,p);return l2(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ia(new Jr("auth-internal",e=>{const t=Pg(e.getProvider("auth").getImmediate());return(r=>new bx(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(t0,n0,Sx(s)),_i(t0,n0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=300,wx=f0("authIdTokenMaxAge")||Ix;let i0=null;const Rx=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>wx)return;const o=t?.token;i0!==o&&(i0=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Cx(s=Xp()){const e=bf(s,"auth");if(e.isInitialized())return e.getImmediate();const t=o2(s,{popupRedirectResolver:Ex,persistence:[V2,T2,$S]}),r=f0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const h=Rx(u.toString());_2(t,h,()=>h(t.currentUser)),g2(t,m=>h(m))}}const o=u0("auth");return o&&u2(t,`http://${o}`),t}function Dx(){return document.getElementsByTagName("head")?.[0]??document}i2({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=yi("internal-error");u.customData=o,t(u)},r.type="text/javascript",r.charset="UTF-8",Dx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ax("Browser");const Nx={apiKey:"AIzaSyCdpp9ViBcfb37o4V2_OCzWO9nUhCiv9Vc",authDomain:"fibreflow-73daf.firebaseapp.com",projectId:"fibreflow-73daf",storageBucket:"fibreflow-73daf.firebasestorage.app",messagingSenderId:"296054249427",appId:"1:296054249427:web:2f0d6482daa6beb0624126",measurementId:"G-J0P7YRLGPW"},Lg=T0(Nx),iA=FD(Lg);CN(Lg);Cx(Lg);GD(iA,{}).catch(s=>{s.code==="failed-precondition"?console.warn("Persistence failed: Multiple tabs open"):s.code==="unimplemented"&&console.warn("Persistence not available in this browser")});function xx({onNewCapture:s,onResumeCapture:e,selectedProject:t}){const[r,o]=Me.useState([]),[u,h]=Me.useState([]),[m,p]=Me.useState([]),[_,T]=Me.useState(""),[S,A]=Me.useState(!0);Me.useEffect(()=>{P(),H(),ee()},[]);const P=async()=>{try{const J=qD(iA,"projects"),ge=(await eN(J)).docs.map(x=>({id:x.id,...x.data()}));o(ge)}catch(J){console.error("Error loading projects:",J)}},H=()=>{const J=localStorage.getItem("incompletePoles");if(J){const ae=JSON.parse(J);h(ae)}A(!1)},ee=()=>{const J=localStorage.getItem("completedPoles");if(J){const ae=JSON.parse(J);p(ae.slice(-5).reverse())}},X=J=>{s(J)},ce=u.filter(J=>J.poleNumber?.toLowerCase().includes(_.toLowerCase())),ue=J=>`${[J.data?.beforePhoto?.captured,J.data?.depthPhoto?.captured,J.data?.compactionPhoto?.captured,J.data?.concretePhoto?.captured,J.data?.frontPhoto?.captured,J.data?.sidePhoto?.captured].filter(Boolean).length}/6 photos`,ne=J=>{const ae=new Date,ge=new Date(J),x=ae-ge,I=Math.floor(x/6e4),R=Math.floor(I/60),O=Math.floor(R/24);return O>0?`${O} day${O>1?"s":""} ago`:R>0?`${R} hour${R>1?"s":""} ago`:I>0?`${I} minute${I>1?"s":""} ago`:"Just now"};return D.jsxs("div",{className:"dashboard",children:[D.jsxs("header",{className:"dashboard-header",children:[D.jsx("h1",{children:"Pole Planting"}),D.jsx("p",{children:"Field Installation Capture"})]}),D.jsx("div",{className:"search-container",children:D.jsx("input",{type:"text",placeholder:"Search pole number...",value:_,onChange:J=>T(J.target.value),className:"search-input"})}),!t&&D.jsxs("div",{className:"section",children:[D.jsx("h2",{children:"Select Project"}),D.jsx("div",{className:"project-grid",children:r.map(J=>D.jsxs("button",{className:"project-card",onClick:()=>X(J),children:[D.jsx("h3",{children:J.name}),D.jsx("p",{children:J.description||"No description"})]},J.id))})]}),t&&D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:"current-project",children:[D.jsxs("div",{className:"project-info",children:[D.jsx("span",{className:"project-label",children:"Current Project"}),D.jsx("h3",{children:t.name})]}),D.jsxs("button",{className:"btn-primary btn-new-capture",onClick:()=>s(t),children:[D.jsx("span",{children:"+"})," New Capture"]})]}),D.jsxs("div",{className:"dashboard-content",children:[ce.length>0&&D.jsxs("div",{className:"section",children:[D.jsxs("div",{className:"section-header",children:[D.jsx("h2",{children:"Incomplete Captures"}),D.jsx("span",{className:"count-badge",children:ce.length})]}),D.jsx("div",{className:"incomplete-list",children:ce.map(J=>D.jsxs("div",{className:"incomplete-card",children:[D.jsxs("div",{className:"pole-info",children:[D.jsx("h3",{children:J.poleNumber||"No pole number"}),D.jsxs("div",{className:"pole-meta",children:[D.jsx("span",{className:"progress",children:ue(J)}),D.jsx("span",{className:"separator",children:"•"}),D.jsx("span",{className:"time",children:ne(J.lastUpdated)})]})]}),D.jsx("button",{className:"btn-continue",onClick:()=>e(J),children:"Continue"})]},J.id))})]}),m.length>0&&D.jsxs("div",{className:"section",children:[D.jsxs("div",{className:"section-header",children:[D.jsx("h2",{children:"Recently Completed"}),D.jsx("span",{className:"count-badge success",children:m.length})]}),D.jsx("div",{className:"recent-list",children:m.map(J=>D.jsxs("div",{className:"recent-card",children:[D.jsx("div",{className:"recent-icon",children:D.jsx("span",{children:"✓"})}),D.jsxs("div",{className:"recent-info",children:[D.jsx("h4",{children:J.data?.poleNumber||"No pole number"}),D.jsxs("p",{className:"time",children:["Completed ",ne(J.completedAt)]})]}),D.jsx("div",{className:"photo-count",children:D.jsx("span",{children:"📷 6/6"})})]},J.id))})]}),ce.length===0&&m.length===0&&!_&&D.jsxs("div",{className:"empty-state",children:[D.jsx("div",{className:"empty-icon",children:"📍"}),D.jsx("h3",{children:"Ready to start capturing"}),D.jsx("p",{children:'Tap the "New Capture" button to begin documenting pole installations'})]}),ce.length===0&&_&&D.jsxs("div",{className:"empty-state",children:[D.jsx("div",{className:"empty-icon",children:"🔍"}),D.jsx("h3",{children:"No results found"}),D.jsxs("p",{children:['No poles found matching "',_,'"']})]})]})]}),S&&D.jsx("div",{className:"loading",children:D.jsx("p",{children:"Loading..."})}),D.jsx("footer",{className:"dashboard-footer",children:D.jsx("p",{children:"Logged in as: Dev User"})})]})}const Go=({onPhotoCapture:s,existingPhoto:e,placeholder:t="📷 Take Photo",instruction:r="",showExample:o=!1})=>{const[u,h]=Me.useState(!1),m=Me.useRef(null),p=async A=>new Promise(P=>{const H=document.createElement("canvas"),ee=H.getContext("2d"),X=new Image;X.onload=()=>{let{width:ne,height:J}=X;ne>J?ne>1920&&(J=J*1920/ne,ne=1920):J>1080&&(ne=ne*1080/J,J=1080),H.width=ne,H.height=J,ee.drawImage(X,0,0,ne,J),H.toBlob(ae=>{P({blob:ae,dataUrl:H.toDataURL("image/jpeg",.8),size:ae.size,dimensions:{width:ne,height:J},originalSize:A.size,timestamp:new Date})},"image/jpeg",.8)},X.src=URL.createObjectURL(A)}),_=async A=>{const P=A.target.files[0];if(P){if(!P.type.startsWith("image/")){alert("Please select an image file");return}if(P.size>10*1024*1024){alert("Image file too large (max 10MB)");return}h(!0);try{const H=await p(P);s(H.dataUrl)}catch(H){console.error("Error processing image:",H),alert("Error processing image. Please try again.")}finally{h(!1)}}},T=()=>{m.current?.click()},S=()=>{s(null),m.current&&(m.current.value="")};return D.jsxs("div",{className:"photo-capture",children:[D.jsx("input",{ref:m,type:"file",accept:"image/*",capture:"camera",onChange:_,style:{display:"none"}}),e?D.jsxs("div",{className:"photo-preview captured",children:[D.jsx("img",{src:e,alt:"Captured",className:"preview-image"}),D.jsx("button",{onClick:S,className:"retake-button",disabled:u,children:"Retake Photo"})]}):D.jsx("button",{className:"photo-capture-box",onClick:T,disabled:u,children:D.jsxs("div",{className:"placeholder-content",children:[D.jsx("span",{children:t}),r&&D.jsx("p",{className:"instruction",children:r})]})})]})},Vx=({onLocationCapture:s,existingLocation:e,existingAccuracy:t})=>{const[r,o]=Me.useState(!1),[u,h]=Me.useState(""),m=()=>{o(!0),h("");const _={enableHighAccuracy:!0,timeout:3e4,maximumAge:0};navigator.geolocation.getCurrentPosition(T=>{const S={latitude:T.coords.latitude,longitude:T.coords.longitude},A=T.coords.accuracy;s(S,A),o(!1)},T=>{console.error("GPS Error:",T);let S="";switch(T.code){case T.PERMISSION_DENIED:S="GPS access denied. Please enable location permissions.";break;case T.POSITION_UNAVAILABLE:S="GPS location unavailable. Please try again.";break;case T.TIMEOUT:S="GPS timeout. Please try again in a better location.";break;default:S="Unknown GPS error. Please try again."}h(S),o(!1)},_)},p=_=>_?.toFixed(6)||"N/A";return D.jsx("div",{className:"gps-capture",children:e?D.jsxs("div",{className:"gps-display",children:[D.jsx("span",{children:"📍 Location Captured"}),D.jsxs("span",{children:[p(e.latitude),", ",p(e.longitude)]})]}):D.jsxs(D.Fragment,{children:[!r&&!u&&D.jsx("button",{onClick:m,className:"capture-gps-button",children:"📍 Capture GPS Location"}),r&&D.jsxs("div",{className:"gps-status",children:[D.jsx("p",{children:"📡 Acquiring GPS signal..."}),D.jsx("small",{children:"This may take up to 30 seconds"})]}),u&&D.jsxs("div",{className:"gps-error",children:[D.jsx("p",{children:u}),D.jsx("button",{onClick:m,className:"capture-gps-button",children:"Try Again"})]})]})})};function Ox({data:s,onUpdate:e,onNext:t,onBack:r,isFirstStep:o}){const[u,h]=Me.useState(s.poleNumber||""),[m,p]=Me.useState(s.gpsLocation),[_,T]=Me.useState(s.gpsAccuracy),[S,A]=Me.useState(s.beforePhoto?.url),P=(ce,ue)=>{p(ce),T(ue),e({gpsLocation:ce,gpsAccuracy:ue})},H=ce=>{A(ce),e({beforePhoto:{captured:!0,url:ce}})},ee=ce=>{const ue=ce.target.value;h(ue),e({poleNumber:ue})},X=u&&m&&S;return D.jsxs("div",{className:"wizard-step before-installation",children:[D.jsx("h2",{children:"Before Installation"}),D.jsx("p",{className:"subtitle",children:"Capture the initial site condition and pole number from iMap"}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Site Photo *"}),D.jsx(Go,{onPhotoCapture:H,existingPhoto:S,placeholder:"📷 Before Installation"})]}),D.jsx("div",{className:"form-group",children:D.jsx(Vx,{onLocationCapture:P,existingLocation:m,existingAccuracy:_})}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Pole Number (from iMap) *"}),D.jsx("input",{type:"text",value:u,onChange:ee,placeholder:"Enter the pole number from iMap system",className:"text-input"})]}),D.jsxs("div",{className:"navigation-buttons",children:[D.jsx("button",{className:"btn-secondary",onClick:r,children:"Back"}),D.jsx("button",{className:"btn-primary",onClick:t,disabled:!X,children:"Next >"})]})]})}function Px({data:s,onUpdate:e,onNext:t,onBack:r}){const[o,u]=Me.useState(s.depthPhoto?.url),[h,m]=Me.useState(s.depthVerified||!1),p=S=>{u(S),e({depthPhoto:{captured:!0,url:S}})},_=S=>{const A=S.target.checked;m(A),e({depthVerified:A})},T=o&&h;return D.jsxs("div",{className:"wizard-step hole-depth",children:[D.jsx("h2",{children:"Hole Depth Verification"}),D.jsx("p",{className:"subtitle",children:"Confirm the hole is at least 1.2 meters deep"}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Depth Photo *"}),D.jsx(Go,{onPhotoCapture:p,existingPhoto:o,placeholder:"📷 Take Photo",instruction:"Show depth measurement"})]}),D.jsxs("div",{className:"form-group verification-section",children:[D.jsx("h3",{children:"Depth Verification"}),D.jsxs("label",{className:`checkbox-label ${h?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h,onChange:_}),D.jsx("span",{children:"Hole is at least 1.2 meters deep"})]})]}),D.jsxs("div",{className:"navigation-buttons",children:[D.jsx("button",{className:"btn-secondary",onClick:r,children:"Back"}),D.jsx("button",{className:"btn-primary",onClick:t,disabled:!T,children:"Next >"})]})]})}function Mx({data:s,onUpdate:e,onNext:t,onBack:r}){const[o,u]=Me.useState(s.compactionPhoto?.url),[h,m]=Me.useState(s.compactionVerified||!1),p=S=>{u(S),e({compactionPhoto:{captured:!0,url:S}})},_=S=>{const A=S.target.checked;m(A),e({compactionVerified:A})},T=o&&h;return D.jsxs("div",{className:"wizard-step ground-compaction",children:[D.jsx("h2",{children:"Ground Compaction"}),D.jsx("p",{className:"subtitle",children:"Document ground compaction around the pole"}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Compaction Photo *"}),D.jsx(Go,{onPhotoCapture:p,existingPhoto:o,placeholder:"📷 Take Photo",instruction:"Show ground compaction"})]}),D.jsxs("div",{className:"form-group verification-section",children:[D.jsx("h3",{children:"Compaction Verification"}),D.jsxs("label",{className:`checkbox-label ${h?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h,onChange:_}),D.jsx("span",{children:"Ground compaction completed properly"})]})]}),D.jsxs("div",{className:"navigation-buttons",children:[D.jsx("button",{className:"btn-secondary",onClick:r,children:"Back"}),D.jsx("button",{className:"btn-primary",onClick:t,disabled:!T,children:"Next >"})]})]})}function kx({data:s,onUpdate:e,onNext:t,onBack:r}){const[o,u]=Me.useState(s.concretePhoto?.url),[h,m]=Me.useState(s.concreteVerified||!1),p=S=>{u(S),e({concretePhoto:{captured:!0,url:S}})},_=S=>{const A=S.target.checked;m(A),e({concreteVerified:A})},T=o&&h;return D.jsxs("div",{className:"wizard-step concrete-application",children:[D.jsx("h2",{children:"Concrete Application"}),D.jsx("p",{className:"subtitle",children:"Document concrete usage for pole foundation"}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Concrete Photo *"}),D.jsx(Go,{onPhotoCapture:p,existingPhoto:o,placeholder:"📷 Take Photo",instruction:"Show concrete application"})]}),D.jsxs("div",{className:"form-group verification-section",children:[D.jsx("h3",{children:"Concrete Verification"}),D.jsxs("label",{className:`checkbox-label ${h?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h,onChange:_}),D.jsx("span",{children:"Concrete was properly applied"})]})]}),D.jsxs("div",{className:"navigation-buttons",children:[D.jsx("button",{className:"btn-secondary",onClick:r,children:"Back"}),D.jsx("button",{className:"btn-primary",onClick:t,disabled:!T,children:"Next >"})]})]})}function Ux({data:s,onUpdate:e,onNext:t,onBack:r}){const[o,u]=Me.useState(s.frontPhoto?.url),[h,m]=Me.useState(s.frontView||{vertical:!1,clearPowerLines:!1,clearInfrastructure:!1,spiritLevelVisible:!1}),p=A=>{u(A),e({frontPhoto:{captured:!0,url:A}})},_=A=>P=>{const H={...h,[A]:P.target.checked};m(H),e({frontView:H})},T=Object.values(h).every(A=>A===!0),S=o&&T;return D.jsxs("div",{className:"wizard-step front-view",children:[D.jsx("h2",{children:"Front View Verification"}),D.jsx("p",{className:"subtitle",children:"Photo from front with spirit level showing pole is vertical"}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Front Photo (with Spirit Level) *"}),D.jsx(Go,{onPhotoCapture:p,existingPhoto:o,placeholder:"📷 Take Photo",showExample:!0})]}),D.jsxs("div",{className:"form-group verification-section",children:[D.jsx("h3",{children:"Front View Verification"}),D.jsxs("label",{className:`checkbox-label ${h.vertical?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h.vertical,onChange:_("vertical")}),D.jsx("span",{children:"Pole is vertical (plumb)"})]}),D.jsxs("label",{className:`checkbox-label ${h.clearPowerLines?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h.clearPowerLines,onChange:_("clearPowerLines")}),D.jsx("span",{children:"Clear of power lines"})]}),D.jsxs("label",{className:`checkbox-label ${h.clearInfrastructure?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h.clearInfrastructure,onChange:_("clearInfrastructure")}),D.jsx("span",{children:"Clear of other infrastructure"})]}),D.jsxs("label",{className:`checkbox-label ${h.spiritLevelVisible?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h.spiritLevelVisible,onChange:_("spiritLevelVisible")}),D.jsx("span",{children:"Spirit level visible in photo"})]})]}),D.jsxs("div",{className:"navigation-buttons",children:[D.jsx("button",{className:"btn-secondary",onClick:r,children:"Back"}),D.jsx("button",{className:"btn-primary",onClick:t,disabled:!S,children:"Next >"})]})]})}function Lx({data:s,onUpdate:e,onNext:t,onBack:r}){const[o,u]=Me.useState(s.sidePhoto?.url),[h,m]=Me.useState(s.sideView||{vertical:!1,clearPowerLines:!1,clearInfrastructure:!1,spiritLevelVisible:!1}),p=A=>{u(A),e({sidePhoto:{captured:!0,url:A}})},_=A=>P=>{const H={...h,[A]:P.target.checked};m(H),e({sideView:H})},T=Object.values(h).every(A=>A===!0),S=o&&T;return D.jsxs("div",{className:"wizard-step side-view",children:[D.jsx("h2",{children:"Side View Verification"}),D.jsx("p",{className:"subtitle",children:"Photo from side with spirit level showing pole is vertical"}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Side Photo (with Spirit Level) *"}),D.jsx(Go,{onPhotoCapture:p,existingPhoto:o,placeholder:"📷 Take Photo",instruction:"Include spirit level in photo"})]}),D.jsxs("div",{className:"form-group verification-section",children:[D.jsx("h3",{children:"Side View Verification"}),D.jsxs("label",{className:`checkbox-label ${h.vertical?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h.vertical,onChange:_("vertical")}),D.jsx("span",{children:"Pole is vertical (plumb)"})]}),D.jsxs("label",{className:`checkbox-label ${h.clearPowerLines?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h.clearPowerLines,onChange:_("clearPowerLines")}),D.jsx("span",{children:"Clear of power lines"})]}),D.jsxs("label",{className:`checkbox-label ${h.clearInfrastructure?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h.clearInfrastructure,onChange:_("clearInfrastructure")}),D.jsx("span",{children:"Clear of other infrastructure"})]}),D.jsxs("label",{className:`checkbox-label ${h.spiritLevelVisible?"checked":""}`,children:[D.jsx("input",{type:"checkbox",checked:h.spiritLevelVisible,onChange:_("spiritLevelVisible")}),D.jsx("span",{children:"Spirit level visible in photo"})]})]}),D.jsxs("div",{className:"navigation-buttons",children:[D.jsx("button",{className:"btn-secondary",onClick:r,children:"Back"}),D.jsx("button",{className:"btn-primary",onClick:t,disabled:!S,children:"Next >"})]})]})}function Bx({data:s,onUpdate:e,onBack:t,onComplete:r,isLastStep:o}){const[u,h]=Me.useState(s.notes||""),[m,p]=Me.useState(!1),_=P=>{const H=P.target.value;h(H),e({notes:H})},T=async()=>{p(!0);try{await new Promise(P=>setTimeout(P,1e3)),r()}catch(P){console.error("Error completing capture:",P),p(!1)}},S=()=>[s.beforePhoto?.captured,s.depthPhoto?.captured,s.compactionPhoto?.captured,s.concretePhoto?.captured,s.frontPhoto?.captured,s.sidePhoto?.captured].filter(Boolean).length,A=()=>s.gpsLocation?`${s.gpsLocation.latitude.toFixed(6)}, ${s.gpsLocation.longitude.toFixed(6)}`:"Not captured";return D.jsxs("div",{className:"wizard-step review-complete",children:[D.jsx("h2",{children:"Review & Complete"}),D.jsx("p",{className:"subtitle",children:"Review your pole installation capture"}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Additional Notes (Optional)"}),D.jsx("textarea",{value:u,onChange:_,placeholder:"Any additional observations, issues, or special conditions...",className:"notes-textarea",rows:4})]}),D.jsxs("div",{className:"summary-section",children:[D.jsx("h3",{children:"Installation Summary"}),D.jsxs("div",{className:"summary-items",children:[D.jsxs("div",{className:"summary-item",children:[D.jsx("span",{className:"label",children:"Project:"}),D.jsx("span",{className:"value",children:s.projectName||"No project"})]}),D.jsxs("div",{className:"summary-item",children:[D.jsx("span",{className:"label",children:"Pole Number:"}),D.jsx("span",{className:"value",children:s.poleNumber||"Not entered"})]}),D.jsxs("div",{className:"summary-item",children:[D.jsx("span",{className:"label",children:"Photos Captured:"}),D.jsx("span",{className:"value",children:S()})]}),D.jsxs("div",{className:"summary-item",children:[D.jsx("span",{className:"label",children:"GPS Location:"}),D.jsx("span",{className:"value",children:A()})]})]})]}),D.jsxs("div",{className:"navigation-buttons",children:[D.jsx("button",{className:"btn-secondary",onClick:t,disabled:m,children:"Back"}),D.jsx("button",{className:"btn-success",onClick:T,disabled:m,children:m?"Syncing...":"✓ Complete Capture"})]})]})}const jx="PolePlantingDB",zx=1,Tf="poleCaptures";let $s=null;const qx=()=>new Promise((s,e)=>{const t=indexedDB.open(jx,zx);t.onerror=()=>e(t.error),t.onsuccess=()=>{$s=t.result,s($s)},t.onupgradeneeded=r=>{if($s=r.target.result,!$s.objectStoreNames.contains(Tf)){const o=$s.createObjectStore(Tf,{keyPath:"id"});o.createIndex("poleNumber","data.poleNumber",{unique:!1}),o.createIndex("status","status",{unique:!1}),o.createIndex("projectId","projectId",{unique:!1})}}}),r0=async s=>($s||await qx(),new Promise((e,t)=>{const u=$s.transaction([Tf],"readwrite").objectStore(Tf).put(s);u.onsuccess=()=>{Fx(s),e(u.result)},u.onerror=()=>t(u.error)})),Fx=s=>{if(s.status==="incomplete"){const e=JSON.parse(localStorage.getItem("incompletePoles")||"[]"),t=e.findIndex(r=>r.id===s.id);t>=0?e[t]=s:e.push(s),localStorage.setItem("incompletePoles",JSON.stringify(e))}},ou=[{id:1,name:"Before Installation",component:Ox},{id:2,name:"Hole Depth",component:Px},{id:3,name:"Ground Compaction",component:Mx},{id:4,name:"Concrete Application",component:kx},{id:5,name:"Front View",component:Ux},{id:6,name:"Side View",component:Lx},{id:7,name:"Review & Complete",component:Bx}];function Hx({project:s,resumingPole:e,onBack:t,onComplete:r}){const[o,u]=Me.useState(1),[h,m]=Me.useState({id:null,projectId:s?.id,projectName:s?.name,status:"incomplete",currentStep:1,lastUpdated:new Date().toISOString(),data:{poleNumber:"",gpsLocation:null,gpsAccuracy:null,notes:"",beforePhoto:{captured:!1,url:null},depthPhoto:{captured:!1,url:null},compactionPhoto:{captured:!1,url:null},concretePhoto:{captured:!1,url:null},frontPhoto:{captured:!1,url:null},sidePhoto:{captured:!1,url:null},depthVerified:!1,compactionVerified:!1,concreteVerified:!1,frontView:{vertical:!1,clearPowerLines:!1,clearInfrastructure:!1,spiritLevelVisible:!1},sideView:{vertical:!1,clearPowerLines:!1,clearInfrastructure:!1,spiritLevelVisible:!1}}});Me.useEffect(()=>{if(e)m(e),u(e.currentStep||1);else{const P=`pole_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;m(H=>({...H,id:P}))}},[e]),Me.useEffect(()=>{if(h.id&&h.status==="incomplete"){r0(h);const P=JSON.parse(localStorage.getItem("incompletePoles")||"[]"),H=P.findIndex(ee=>ee.id===h.id);H>=0?P[H]=h:P.push(h),localStorage.setItem("incompletePoles",JSON.stringify(P))}},[h]);const p=P=>{m(H=>({...H,data:{...H.data,...P},...P.poleNumber?{poleNumber:P.poleNumber}:{},currentStep:o,lastUpdated:new Date().toISOString()}))},_=()=>{if(o<ou.length){const P=o+1;u(P),m(H=>({...H,currentStep:P,lastUpdated:new Date().toISOString()}))}},T=()=>{if(o>1){const P=o-1;u(P),m(H=>({...H,currentStep:P,lastUpdated:new Date().toISOString()}))}else t()},S=async()=>{const P={...h,status:"completed",completedAt:new Date().toISOString()};await r0(P);const H=JSON.parse(localStorage.getItem("completedPoles")||"[]");H.push(P),localStorage.setItem("completedPoles",JSON.stringify(H));const X=JSON.parse(localStorage.getItem("incompletePoles")||"[]").filter(ce=>ce.id!==h.id);localStorage.setItem("incompletePoles",JSON.stringify(X)),r()},A=ou[o-1].component;return D.jsxs("div",{className:"wizard-capture",children:[D.jsx("div",{className:"progress-bar",children:D.jsx("div",{className:"progress-fill",style:{width:`${o/ou.length*100}%`}})}),D.jsxs("div",{className:"step-indicator",children:["Step ",o," of ",ou.length]}),D.jsx(A,{data:h.data,onUpdate:p,onNext:_,onBack:T,onComplete:S,isFirstStep:o===1,isLastStep:o===ou.length})]})}function Gx(){const[s,e]=Me.useState("dashboard"),[t,r]=Me.useState(null),[o,u]=Me.useState(null);Me.useEffect(()=>{const T=localStorage.getItem("lastSelectedProject");T&&r(JSON.parse(T))},[]);const h=T=>{r(T),u(null),e("capture"),localStorage.setItem("lastSelectedProject",JSON.stringify(T))},m=T=>{u(T),e("capture")},p=()=>{e("dashboard"),u(null)},_=()=>{e("dashboard"),u(null)};return D.jsxs("div",{className:"app",children:[s==="dashboard"&&D.jsx(xx,{onNewCapture:h,onResumeCapture:m,selectedProject:t}),s==="capture"&&D.jsx(Hx,{project:t,resumingPole:o,onBack:p,onComplete:_})]})}UI.createRoot(document.getElementById("root")).render(D.jsx(Me.StrictMode,{children:D.jsx(Gx,{})}));
